var myChrome={};
(function(l,d){function b(){}!(Object.prototype.defineProperty instanceof Function)&&(Object.prototype.__defineGetter__ instanceof Function&&Object.prototype.__defineSetter__ instanceof Function)&&(Object.defineProperty=function(a,e,b){b.get instanceof Function&&a.__defineGetter__(e,b.get);b.set instanceof Function&&a.__defineSetter__(e,b.set)});l.inherit=function(a,e){b.prototype=e.prototype;a.prototype=new b;a.prototype.constructor=a};l.generateCallback=function(a,e){return function(){e.apply(a,arguments)}};
l.NVector=function(a){a===d&&(a=0);for(var e=Array(a||0),b=0;b<a;++b)e[b]=0;return e};l.is=function(a,e){return a===null?false:e instanceof Function&&a instanceof e||a.constructor.__implements!=d&&a.constructor.__implements[e]?true:false};l.parseUInt=function(a){return Math.abs(parseInt(a))}})(myChrome);var Vector=Array,Vector_a2j_Number=myChrome.NVector;"undefined"===typeof myChrome&&(myChrome={});"undefined"===typeof myChrome.Collision&&(myChrome.Collision={});
"undefined"===typeof myChrome.Collision.Shapes&&(myChrome.Collision.Shapes={});"undefined"===typeof myChrome.Common&&(myChrome.Common={});"undefined"===typeof myChrome.Common.Math&&(myChrome.Common.Math={});"undefined"===typeof myChrome.Dynamics&&(myChrome.Dynamics={});"undefined"===typeof myChrome.Dynamics.Contacts&&(myChrome.Dynamics.Contacts={});"undefined"===typeof myChrome.Dynamics.Controllers&&(myChrome.Dynamics.Controllers={});
"undefined"===typeof myChrome.Dynamics.Joints&&(myChrome.Dynamics.Joints={});
(function(){function l(){l.b2AABB.apply(this,arguments)}function d(){d.b2Bound.apply(this,arguments)}function b(){b.b2BoundValues.apply(this,arguments);this.constructor===b&&this.b2BoundValues.apply(this,arguments)}function a(){a.b2Collision.apply(this,arguments)}function e(){e.b2ContactID.apply(this,arguments);this.constructor===e&&this.b2ContactID.apply(this,arguments)}function c(){c.b2ContactPoint.apply(this,arguments)}function h(){h.b2Distance.apply(this,arguments)}function f(){f.b2DistanceInput.apply(this,
arguments)}function k(){k.b2DistanceOutput.apply(this,arguments)}function r(){r.b2DistanceProxy.apply(this,arguments)}function t(){t.b2DynamicTree.apply(this,arguments);this.constructor===t&&this.b2DynamicTree.apply(this,arguments)}function q(){q.b2DynamicTreeBroadPhase.apply(this,arguments)}function s(){s.b2DynamicTreeNode.apply(this,arguments)}function u(){u.b2DynamicTreePair.apply(this,arguments)}function C(){C.b2Manifold.apply(this,arguments);this.constructor===C&&this.b2Manifold.apply(this,arguments)}
function F(){F.b2ManifoldPoint.apply(this,arguments);this.constructor===F&&this.b2ManifoldPoint.apply(this,arguments)}function o(){o.b2Point.apply(this,arguments)}function G(){G.b2RayCastInput.apply(this,arguments);this.constructor===G&&this.b2RayCastInput.apply(this,arguments)}function z(){z.b2RayCastOutput.apply(this,arguments)}function J(){J.b2Segment.apply(this,arguments)}function H(){H.b2SeparationFunction.apply(this,arguments)}function A(){A.b2Simplex.apply(this,arguments);this.constructor===
A&&this.b2Simplex.apply(this,arguments)}function x(){x.b2SimplexCache.apply(this,arguments)}function M(){M.b2SimplexVertex.apply(this,arguments)}function D(){D.b2TimeOfImpact.apply(this,arguments)}function I(){I.b2TOIInput.apply(this,arguments)}function N(){N.b2WorldManifold.apply(this,arguments);this.constructor===N&&this.b2WorldManifold.apply(this,arguments)}function K(){K.ClipVertex.apply(this,arguments)}function m(){m.Features.apply(this,arguments)}function p(){p.b2CircleShape.apply(this,arguments);
this.constructor===p&&this.b2CircleShape.apply(this,arguments)}function w(){w.b2EdgeChainDef.apply(this,arguments);this.constructor===w&&this.b2EdgeChainDef.apply(this,arguments)}function v(){v.b2EdgeShape.apply(this,arguments);this.constructor===v&&this.b2EdgeShape.apply(this,arguments)}function E(){E.b2MassData.apply(this,arguments)}function L(){L.b2PolygonShape.apply(this,arguments);this.constructor===L&&this.b2PolygonShape.apply(this,arguments)}function B(){B.b2Shape.apply(this,arguments);this.constructor===
B&&this.b2Shape.apply(this,arguments)}function g(){g.b2Color.apply(this,arguments);this.constructor===g&&this.b2Color.apply(this,arguments)}function j(){j.b2Settings.apply(this,arguments)}function y(){y.b2Mat22.apply(this,arguments);this.constructor===y&&this.b2Mat22.apply(this,arguments)}function O(){O.b2Mat33.apply(this,arguments);this.constructor===O&&this.b2Mat33.apply(this,arguments)}function za(){za.b2Math.apply(this,arguments)}function Aa(){Aa.b2Sweep.apply(this,arguments)}function P(){P.b2Transform.apply(this,
arguments);this.constructor===P&&this.b2Transform.apply(this,arguments)}function Q(){Q.b2Vec2.apply(this,arguments);this.constructor===Q&&this.b2Vec2.apply(this,arguments)}function R(){R.b2Vec3.apply(this,arguments);this.constructor===R&&this.b2Vec3.apply(this,arguments)}function S(){S.b2Body.apply(this,arguments);this.constructor===S&&this.b2Body.apply(this,arguments)}function T(){T.b2BodyDef.apply(this,arguments);this.constructor===T&&this.b2BodyDef.apply(this,arguments)}function Ba(){Ba.b2ContactFilter.apply(this,
arguments)}function Ca(){Ca.b2ContactImpulse.apply(this,arguments)}function Da(){Da.b2ContactListener.apply(this,arguments)}function U(){U.b2ContactManager.apply(this,arguments);this.constructor===U&&this.b2ContactManager.apply(this,arguments)}function V(){V.b2DebugDraw.apply(this,arguments);this.constructor===V&&this.b2DebugDraw.apply(this,arguments)}function Ea(){Ea.b2DestructionListener.apply(this,arguments)}function Fa(){Fa.b2FilterData.apply(this,arguments)}function W(){W.b2Fixture.apply(this,
arguments);this.constructor===W&&this.b2Fixture.apply(this,arguments)}function X(){X.b2FixtureDef.apply(this,arguments);this.constructor===X&&this.b2FixtureDef.apply(this,arguments)}function Y(){Y.b2Island.apply(this,arguments);this.constructor===Y&&this.b2Island.apply(this,arguments)}function Ga(){Ga.b2TimeStep.apply(this,arguments)}function Z(){Z.b2World.apply(this,arguments);this.constructor===Z&&this.b2World.apply(this,arguments)}function Ha(){Ha.b2CircleContact.apply(this,arguments)}function $(){$.b2Contact.apply(this,
arguments);this.constructor===$&&this.b2Contact.apply(this,arguments)}function aa(){aa.b2ContactConstraint.apply(this,arguments);this.constructor===aa&&this.b2ContactConstraint.apply(this,arguments)}function Ia(){Ia.b2ContactConstraintPoint.apply(this,arguments)}function Ja(){Ja.b2ContactEdge.apply(this,arguments)}function ba(){ba.b2ContactFactory.apply(this,arguments);this.constructor===ba&&this.b2ContactFactory.apply(this,arguments)}function Ka(){Ka.b2ContactRegister.apply(this,arguments)}function La(){La.b2ContactResult.apply(this,
arguments)}function ca(){ca.b2ContactSolver.apply(this,arguments);this.constructor===ca&&this.b2ContactSolver.apply(this,arguments)}function Ma(){Ma.b2EdgeAndCircleContact.apply(this,arguments)}function da(){da.b2NullContact.apply(this,arguments);this.constructor===da&&this.b2NullContact.apply(this,arguments)}function Na(){Na.b2PolyAndCircleContact.apply(this,arguments)}function Oa(){Oa.b2PolyAndEdgeContact.apply(this,arguments)}function Pa(){Pa.b2PolygonContact.apply(this,arguments)}function ea(){ea.b2PositionSolverManifold.apply(this,
arguments);this.constructor===ea&&this.b2PositionSolverManifold.apply(this,arguments)}function Qa(){Qa.b2BuoyancyController.apply(this,arguments)}function Ra(){Ra.b2ConstantAccelController.apply(this,arguments)}function Sa(){Sa.b2ConstantForceController.apply(this,arguments)}function Ta(){Ta.b2Controller.apply(this,arguments)}function Ua(){Ua.b2ControllerEdge.apply(this,arguments)}function Va(){Va.b2GravityController.apply(this,arguments)}function Wa(){Wa.b2TensorDampingController.apply(this,arguments)}
function fa(){fa.b2DistanceJoint.apply(this,arguments);this.constructor===fa&&this.b2DistanceJoint.apply(this,arguments)}function ga(){ga.b2DistanceJointDef.apply(this,arguments);this.constructor===ga&&this.b2DistanceJointDef.apply(this,arguments)}function ha(){ha.b2FrictionJoint.apply(this,arguments);this.constructor===ha&&this.b2FrictionJoint.apply(this,arguments)}function ia(){ia.b2FrictionJointDef.apply(this,arguments);this.constructor===ia&&this.b2FrictionJointDef.apply(this,arguments)}function ja(){ja.b2GearJoint.apply(this,
arguments);this.constructor===ja&&this.b2GearJoint.apply(this,arguments)}function ka(){ka.b2GearJointDef.apply(this,arguments);this.constructor===ka&&this.b2GearJointDef.apply(this,arguments)}function Xa(){Xa.b2Jacobian.apply(this,arguments)}function la(){la.b2Joint.apply(this,arguments);this.constructor===la&&this.b2Joint.apply(this,arguments)}function ma(){ma.b2JointDef.apply(this,arguments);this.constructor===ma&&this.b2JointDef.apply(this,arguments)}function Ya(){Ya.b2JointEdge.apply(this,arguments)}
function na(){na.b2LineJoint.apply(this,arguments);this.constructor===na&&this.b2LineJoint.apply(this,arguments)}function oa(){oa.b2LineJointDef.apply(this,arguments);this.constructor===oa&&this.b2LineJointDef.apply(this,arguments)}function pa(){pa.b2MouseJoint.apply(this,arguments);this.constructor===pa&&this.b2MouseJoint.apply(this,arguments)}function qa(){qa.b2MouseJointDef.apply(this,arguments);this.constructor===qa&&this.b2MouseJointDef.apply(this,arguments)}function ra(){ra.b2PrismaticJoint.apply(this,
arguments);this.constructor===ra&&this.b2PrismaticJoint.apply(this,arguments)}function sa(){sa.b2PrismaticJointDef.apply(this,arguments);this.constructor===sa&&this.b2PrismaticJointDef.apply(this,arguments)}function ta(){ta.b2PulleyJoint.apply(this,arguments);this.constructor===ta&&this.b2PulleyJoint.apply(this,arguments)}function ua(){ua.b2PulleyJointDef.apply(this,arguments);this.constructor===ua&&this.b2PulleyJointDef.apply(this,arguments)}function va(){va.b2RevoluteJoint.apply(this,arguments);
this.constructor===va&&this.b2RevoluteJoint.apply(this,arguments)}function wa(){wa.b2RevoluteJointDef.apply(this,arguments);this.constructor===wa&&this.b2RevoluteJointDef.apply(this,arguments)}function xa(){xa.b2WeldJoint.apply(this,arguments);this.constructor===xa&&this.b2WeldJoint.apply(this,arguments)}function ya(){ya.b2WeldJointDef.apply(this,arguments);this.constructor===ya&&this.b2WeldJointDef.apply(this,arguments)}myChrome.Collision.IBroadPhase="myChrome.Collision.IBroadPhase";myChrome.Collision.b2AABB=
l;myChrome.Collision.b2Bound=d;myChrome.Collision.b2BoundValues=b;myChrome.Collision.b2Collision=a;myChrome.Collision.b2ContactID=e;myChrome.Collision.b2ContactPoint=c;myChrome.Collision.b2Distance=h;myChrome.Collision.b2DistanceInput=f;myChrome.Collision.b2DistanceOutput=k;myChrome.Collision.b2DistanceProxy=r;myChrome.Collision.b2DynamicTree=t;myChrome.Collision.b2DynamicTreeBroadPhase=q;myChrome.Collision.b2DynamicTreeNode=s;myChrome.Collision.b2DynamicTreePair=u;myChrome.Collision.b2Manifold=C;
myChrome.Collision.b2ManifoldPoint=F;myChrome.Collision.b2Point=o;myChrome.Collision.b2RayCastInput=G;myChrome.Collision.b2RayCastOutput=z;myChrome.Collision.b2Segment=J;myChrome.Collision.b2SeparationFunction=H;myChrome.Collision.b2Simplex=A;myChrome.Collision.b2SimplexCache=x;myChrome.Collision.b2SimplexVertex=M;myChrome.Collision.b2TimeOfImpact=D;myChrome.Collision.b2TOIInput=I;myChrome.Collision.b2WorldManifold=N;myChrome.Collision.ClipVertex=K;myChrome.Collision.Features=m;myChrome.Collision.Shapes.b2CircleShape=
p;myChrome.Collision.Shapes.b2EdgeChainDef=w;myChrome.Collision.Shapes.b2EdgeShape=v;myChrome.Collision.Shapes.b2MassData=E;myChrome.Collision.Shapes.b2PolygonShape=L;myChrome.Collision.Shapes.b2Shape=B;myChrome.Common.b2internal="myChrome.Common.b2internal";myChrome.Common.b2Color=g;myChrome.Common.b2Settings=j;myChrome.Common.Math.b2Mat22=y;myChrome.Common.Math.b2Mat33=O;myChrome.Common.Math.b2Math=za;myChrome.Common.Math.b2Sweep=Aa;myChrome.Common.Math.b2Transform=P;myChrome.Common.Math.b2Vec2=
Q;myChrome.Common.Math.b2Vec3=R;myChrome.Dynamics.b2Body=S;myChrome.Dynamics.b2BodyDef=T;myChrome.Dynamics.b2ContactFilter=Ba;myChrome.Dynamics.b2ContactImpulse=Ca;myChrome.Dynamics.b2ContactListener=Da;myChrome.Dynamics.b2ContactManager=U;myChrome.Dynamics.b2DebugDraw=V;myChrome.Dynamics.b2DestructionListener=Ea;myChrome.Dynamics.b2FilterData=Fa;myChrome.Dynamics.b2Fixture=W;myChrome.Dynamics.b2FixtureDef=X;myChrome.Dynamics.b2Island=Y;myChrome.Dynamics.b2TimeStep=Ga;myChrome.Dynamics.b2World=Z;
myChrome.Dynamics.Contacts.b2CircleContact=Ha;myChrome.Dynamics.Contacts.b2Contact=$;myChrome.Dynamics.Contacts.b2ContactConstraint=aa;myChrome.Dynamics.Contacts.b2ContactConstraintPoint=Ia;myChrome.Dynamics.Contacts.b2ContactEdge=Ja;myChrome.Dynamics.Contacts.b2ContactFactory=ba;myChrome.Dynamics.Contacts.b2ContactRegister=Ka;myChrome.Dynamics.Contacts.b2ContactResult=La;myChrome.Dynamics.Contacts.b2ContactSolver=ca;myChrome.Dynamics.Contacts.b2EdgeAndCircleContact=Ma;myChrome.Dynamics.Contacts.b2NullContact=
da;myChrome.Dynamics.Contacts.b2PolyAndCircleContact=Na;myChrome.Dynamics.Contacts.b2PolyAndEdgeContact=Oa;myChrome.Dynamics.Contacts.b2PolygonContact=Pa;myChrome.Dynamics.Contacts.b2PositionSolverManifold=ea;myChrome.Dynamics.Controllers.b2BuoyancyController=Qa;myChrome.Dynamics.Controllers.b2ConstantAccelController=Ra;myChrome.Dynamics.Controllers.b2ConstantForceController=Sa;myChrome.Dynamics.Controllers.b2Controller=Ta;myChrome.Dynamics.Controllers.b2ControllerEdge=Ua;myChrome.Dynamics.Controllers.b2GravityController=
Va;myChrome.Dynamics.Controllers.b2TensorDampingController=Wa;myChrome.Dynamics.Joints.b2DistanceJoint=fa;myChrome.Dynamics.Joints.b2DistanceJointDef=ga;myChrome.Dynamics.Joints.b2FrictionJoint=ha;myChrome.Dynamics.Joints.b2FrictionJointDef=ia;myChrome.Dynamics.Joints.b2GearJoint=ja;myChrome.Dynamics.Joints.b2GearJointDef=ka;myChrome.Dynamics.Joints.b2Jacobian=Xa;myChrome.Dynamics.Joints.b2Joint=la;myChrome.Dynamics.Joints.b2JointDef=ma;myChrome.Dynamics.Joints.b2JointEdge=Ya;myChrome.Dynamics.Joints.b2LineJoint=
na;myChrome.Dynamics.Joints.b2LineJointDef=oa;myChrome.Dynamics.Joints.b2MouseJoint=pa;myChrome.Dynamics.Joints.b2MouseJointDef=qa;myChrome.Dynamics.Joints.b2PrismaticJoint=ra;myChrome.Dynamics.Joints.b2PrismaticJointDef=sa;myChrome.Dynamics.Joints.b2PulleyJoint=ta;myChrome.Dynamics.Joints.b2PulleyJointDef=ua;myChrome.Dynamics.Joints.b2RevoluteJoint=va;myChrome.Dynamics.Joints.b2RevoluteJointDef=wa;myChrome.Dynamics.Joints.b2WeldJoint=xa;myChrome.Dynamics.Joints.b2WeldJointDef=ya})();
myChrome.postDefs=[];
(function(){var l=myChrome.Collision.Shapes.b2CircleShape,d=myChrome.Collision.Shapes.b2PolygonShape,b=myChrome.Collision.Shapes.b2Shape,a=myChrome.Common.b2Settings,e=myChrome.Common.Math.b2Math,c=myChrome.Common.Math.b2Sweep,h=myChrome.Common.Math.b2Transform,f=myChrome.Common.Math.b2Vec2,k=myChrome.Collision.b2AABB,r=myChrome.Collision.b2Bound,t=myChrome.Collision.b2BoundValues,q=myChrome.Collision.b2Collision,s=myChrome.Collision.b2ContactID,u=myChrome.Collision.b2ContactPoint,C=myChrome.Collision.b2Distance,
F=myChrome.Collision.b2DistanceInput,o=myChrome.Collision.b2DistanceOutput,G=myChrome.Collision.b2DistanceProxy,z=myChrome.Collision.b2DynamicTree,J=myChrome.Collision.b2DynamicTreeBroadPhase,H=myChrome.Collision.b2DynamicTreeNode,A=myChrome.Collision.b2DynamicTreePair,x=myChrome.Collision.b2Manifold,M=myChrome.Collision.b2ManifoldPoint,D=myChrome.Collision.b2Point,I=myChrome.Collision.b2RayCastInput,N=myChrome.Collision.b2RayCastOutput,K=myChrome.Collision.b2Segment,m=myChrome.Collision.b2SeparationFunction,
p=myChrome.Collision.b2Simplex,w=myChrome.Collision.b2SimplexCache,v=myChrome.Collision.b2SimplexVertex,E=myChrome.Collision.b2TimeOfImpact,L=myChrome.Collision.b2TOIInput,B=myChrome.Collision.b2WorldManifold,g=myChrome.Collision.ClipVertex,j=myChrome.Collision.Features,y=myChrome.Collision.IBroadPhase;k.b2AABB=function(){this.lowerBound=new f;this.upperBound=new f};k.prototype.IsValid=function(){var a=this.upperBound.y-this.lowerBound.y;return this.upperBound.x-this.lowerBound.x>=0&&a>=0&&this.lowerBound.IsValid()&&
this.upperBound.IsValid()};k.prototype.GetCenter=function(){return new f((this.lowerBound.x+this.upperBound.x)/2,(this.lowerBound.y+this.upperBound.y)/2)};k.prototype.GetExtents=function(){return new f((this.upperBound.x-this.lowerBound.x)/2,(this.upperBound.y-this.lowerBound.y)/2)};k.prototype.Contains=function(a){return this.lowerBound.x<=a.lowerBound.x&&this.lowerBound.y<=a.lowerBound.y&&a.upperBound.x<=this.upperBound.x&&a.upperBound.y<=this.upperBound.y};k.prototype.RayCast=function(a,g){var j=
-Number.MAX_VALUE,m=Number.MAX_VALUE,e=g.p1.x,b=g.p1.y,c=g.p2.x-g.p1.x,f=g.p2.y-g.p1.y,p=Math.abs(f),v=a.normal,d=0,y=0,w=0;if(Math.abs(c)<Number.MIN_VALUE){if(e<this.lowerBound.x||this.upperBound.x<e)return false}else{d=1/c;y=(this.lowerBound.x-e)*d;d=(this.upperBound.x-e)*d;w=-1;if(y>d){w=y;y=d;d=w;w=1}if(y>j){v.x=w;v.y=0;j=y}m=Math.min(m,d);if(j>m)return false}if(p<Number.MIN_VALUE){if(b<this.lowerBound.y||this.upperBound.y<b)return false}else{d=1/f;y=(this.lowerBound.y-b)*d;d=(this.upperBound.y-
b)*d;w=-1;if(y>d){w=y;y=d;d=w;w=1}if(y>j){v.y=w;v.x=0;j=y}m=Math.min(m,d);if(j>m)return false}a.fraction=j;return true};k.prototype.TestOverlap=function(a){var g=a.lowerBound.y-this.upperBound.y,j=this.lowerBound.y-a.upperBound.y;return a.lowerBound.x-this.upperBound.x>0||g>0||this.lowerBound.x-a.upperBound.x>0||j>0?false:true};k.Combine=function(a,g){var j=new k;j.Combine(a,g);return j};k.prototype.Combine=function(a,g){this.lowerBound.x=Math.min(a.lowerBound.x,g.lowerBound.x);this.lowerBound.y=
Math.min(a.lowerBound.y,g.lowerBound.y);this.upperBound.x=Math.max(a.upperBound.x,g.upperBound.x);this.upperBound.y=Math.max(a.upperBound.y,g.upperBound.y)};r.b2Bound=function(){};r.prototype.IsLower=function(){return(this.value&1)==0};r.prototype.IsUpper=function(){return(this.value&1)==1};r.prototype.Swap=function(a){var g=this.value,j=this.proxy,m=this.stabbingCount;this.value=a.value;this.proxy=a.proxy;this.stabbingCount=a.stabbingCount;a.value=g;a.proxy=j;a.stabbingCount=m};t.b2BoundValues=function(){};
t.prototype.b2BoundValues=function(){this.lowerValues=new Vector_a2j_Number;this.lowerValues[0]=0;this.lowerValues[1]=0;this.upperValues=new Vector_a2j_Number;this.upperValues[0]=0;this.upperValues[1]=0};q.b2Collision=function(){};q.ClipSegmentToLine=function(a,g,j,m){m===void 0&&(m=0);var e,b=0;e=g[0];var c=e.v;e=g[1];var f=e.v,p=j.x*c.x+j.y*c.y-m;e=j.x*f.x+j.y*f.y-m;p<=0&&a[b++].Set(g[0]);e<=0&&a[b++].Set(g[1]);if(p*e<0){j=p/(p-e);e=a[b];e=e.v;e.x=c.x+j*(f.x-c.x);e.y=c.y+j*(f.y-c.y);e=a[b];e.id=
(p>0?g[0]:g[1]).id;++b}return b};q.EdgeSeparation=function(a,g,j,e,m){j===void 0&&(j=0);parseInt(a.m_vertexCount);var b=a.m_vertices,a=a.m_normals,c=parseInt(e.m_vertexCount),f=e.m_vertices,p,d;p=g.R;d=a[j];a=p.col1.x*d.x+p.col2.x*d.y;e=p.col1.y*d.x+p.col2.y*d.y;p=m.R;var v=p.col1.x*a+p.col1.y*e;p=p.col2.x*a+p.col2.y*e;for(var y=0,w=Number.MAX_VALUE,o=0;o<c;++o){d=f[o];d=d.x*v+d.y*p;if(d<w){w=d;y=o}}d=b[j];p=g.R;j=g.position.x+(p.col1.x*d.x+p.col2.x*d.y);g=g.position.y+(p.col1.y*d.x+p.col2.y*d.y);
d=f[y];p=m.R;b=m.position.x+(p.col1.x*d.x+p.col2.x*d.y);m=m.position.y+(p.col1.y*d.x+p.col2.y*d.y);return(b-j)*a+(m-g)*e};q.FindMaxSeparation=function(a,g,j,e,m){var b=parseInt(g.m_vertexCount),c=g.m_normals,f,p;p=m.R;f=e.m_centroid;var d=m.position.x+(p.col1.x*f.x+p.col2.x*f.y),v=m.position.y+(p.col1.y*f.x+p.col2.y*f.y);p=j.R;f=g.m_centroid;d=d-(j.position.x+(p.col1.x*f.x+p.col2.x*f.y));v=v-(j.position.y+(p.col1.y*f.x+p.col2.y*f.y));p=d*j.R.col1.x+v*j.R.col1.y;for(var v=d*j.R.col2.x+v*j.R.col2.y,
d=0,y=-Number.MAX_VALUE,w=0;w<b;++w){f=c[w];f=f.x*p+f.y*v;if(f>y){y=f;d=w}}c=q.EdgeSeparation(g,j,d,e,m);f=parseInt(d-1>=0?d-1:b-1);p=q.EdgeSeparation(g,j,f,e,m);var v=parseInt(d+1<b?d+1:0),y=q.EdgeSeparation(g,j,v,e,m),o=0,E=0;if(p>c&&p>y){E=-1;w=f;o=p}else if(y>c){E=1;w=v;o=y}else{a[0]=d;return c}for(;;){d=E==-1?w-1>=0?w-1:b-1:w+1<b?w+1:0;c=q.EdgeSeparation(g,j,d,e,m);if(c>o){w=d;o=c}else break}a[0]=w;return o};q.FindIncidentEdge=function(a,g,j,e,m,b){e===void 0&&(e=0);parseInt(g.m_vertexCount);
var c=g.m_normals,f=parseInt(m.m_vertexCount),g=m.m_vertices,m=m.m_normals,p;p=j.R;var j=c[e],c=p.col1.x*j.x+p.col2.x*j.y,d=p.col1.y*j.x+p.col2.y*j.y;p=b.R;j=p.col1.x*c+p.col1.y*d;d=p.col2.x*c+p.col2.y*d;c=j;p=0;for(var v=Number.MAX_VALUE,y=0;y<f;++y){j=m[y];j=c*j.x+d*j.y;if(j<v){v=j;p=y}}m=parseInt(p);c=parseInt(m+1<f?m+1:0);f=a[0];j=g[m];p=b.R;f.v.x=b.position.x+(p.col1.x*j.x+p.col2.x*j.y);f.v.y=b.position.y+(p.col1.y*j.x+p.col2.y*j.y);f.id.features.referenceEdge=e;f.id.features.incidentEdge=m;
f.id.features.incidentVertex=0;f=a[1];j=g[c];p=b.R;f.v.x=b.position.x+(p.col1.x*j.x+p.col2.x*j.y);f.v.y=b.position.y+(p.col1.y*j.x+p.col2.y*j.y);f.id.features.referenceEdge=e;f.id.features.incidentEdge=c;f.id.features.incidentVertex=1};q.MakeClipPointVector=function(){var a=new Vector(2);a[0]=new g;a[1]=new g;return a};q.CollidePolygons=function(g,j,m,e,b){var c;g.m_pointCount=0;var f=j.m_radius+e.m_radius;q.s_edgeAO[0]=0;var p=q.FindMaxSeparation(q.s_edgeAO,j,m,e,b);c=q.s_edgeAO[0];if(!(p>f)){var d;
q.s_edgeBO[0]=0;var v=q.FindMaxSeparation(q.s_edgeBO,e,b,j,m);d=q.s_edgeBO[0];if(!(v>f)){var y=0,w=0;if(v>0.98*p+0.001){p=e;e=j;j=b;y=d;g.m_type=x.e_faceB;w=1}else{p=j;j=m;m=b;y=c;g.m_type=x.e_faceA;w=0}c=q.s_incidentEdge;q.FindIncidentEdge(c,p,j,y,e,m);d=parseInt(p.m_vertexCount);var b=p.m_vertices,p=b[y],o;o=y+1<d?b[parseInt(y+1)]:b[0];y=q.s_localTangent;y.Set(o.x-p.x,o.y-p.y);y.Normalize();b=q.s_localNormal;b.x=y.y;b.y=-y.x;e=q.s_planePoint;e.Set(0.5*(p.x+o.x),0.5*(p.y+o.y));v=q.s_tangent;d=j.R;
v.x=d.col1.x*y.x+d.col2.x*y.y;v.y=d.col1.y*y.x+d.col2.y*y.y;var E=q.s_tangent2;E.x=-v.x;E.y=-v.y;y=q.s_normal;y.x=v.y;y.y=-v.x;var B=q.s_v11,k=q.s_v12;B.x=j.position.x+(d.col1.x*p.x+d.col2.x*p.y);B.y=j.position.y+(d.col1.y*p.x+d.col2.y*p.y);k.x=j.position.x+(d.col1.x*o.x+d.col2.x*o.y);k.y=j.position.y+(d.col1.y*o.x+d.col2.y*o.y);j=y.x*B.x+y.y*B.y;d=v.x*k.x+v.y*k.y+f;o=q.s_clipPoints1;p=q.s_clipPoints2;k=q.ClipSegmentToLine(o,c,E,-v.x*B.x-v.y*B.y+f);if(!(k<2)){k=q.ClipSegmentToLine(p,o,v,d);if(!(k<
2)){g.m_localPlaneNormal.SetV(b);g.m_localPoint.SetV(e);for(e=b=0;e<a.b2_maxManifoldPoints;++e){c=p[e];if(y.x*c.v.x+y.y*c.v.y-j<=f){v=g.m_points[b];d=m.R;E=c.v.x-m.position.x;B=c.v.y-m.position.y;v.m_localPoint.x=E*d.col1.x+B*d.col1.y;v.m_localPoint.y=E*d.col2.x+B*d.col2.y;v.m_id.Set(c.id);v.m_id.features.flip=w;++b}}g.m_pointCount=b}}}}};q.CollideCircles=function(a,g,j,e,m){a.m_pointCount=0;var b,c;b=j.R;c=g.m_p;var f=j.position.x+(b.col1.x*c.x+b.col2.x*c.y),j=j.position.y+(b.col1.y*c.x+b.col2.y*
c.y);b=m.R;c=e.m_p;f=m.position.x+(b.col1.x*c.x+b.col2.x*c.y)-f;m=m.position.y+(b.col1.y*c.x+b.col2.y*c.y)-j;b=g.m_radius+e.m_radius;if(!(f*f+m*m>b*b)){a.m_type=x.e_circles;a.m_localPoint.SetV(g.m_p);a.m_localPlaneNormal.SetZero();a.m_pointCount=1;a.m_points[0].m_localPoint.SetV(e.m_p);a.m_points[0].m_id.key=0}};q.CollidePolygonAndCircle=function(a,g,j,m,e){var b=a.m_pointCount=0,c=0,f,p;p=e.R;f=m.m_p;var d=e.position.y+(p.col1.y*f.x+p.col2.y*f.y),b=e.position.x+(p.col1.x*f.x+p.col2.x*f.y)-j.position.x,
c=d-j.position.y;p=j.R;j=b*p.col1.x+c*p.col1.y;p=b*p.col2.x+c*p.col2.y;for(var v=0,d=-Number.MAX_VALUE,e=g.m_radius+m.m_radius,y=parseInt(g.m_vertexCount),w=g.m_vertices,g=g.m_normals,o=0;o<y;++o){f=w[o];b=j-f.x;c=p-f.y;f=g[o];b=f.x*b+f.y*c;if(b>e)return;if(b>d){d=b;v=o}}b=parseInt(v);c=parseInt(b+1<y?b+1:0);f=w[b];w=w[c];if(d<Number.MIN_VALUE){a.m_pointCount=1;a.m_type=x.e_faceA;a.m_localPlaneNormal.SetV(g[v]);a.m_localPoint.x=0.5*(f.x+w.x);a.m_localPoint.y=0.5*(f.y+w.y)}else{d=(j-w.x)*(f.x-w.x)+
(p-w.y)*(f.y-w.y);if((j-f.x)*(w.x-f.x)+(p-f.y)*(w.y-f.y)<=0){if((j-f.x)*(j-f.x)+(p-f.y)*(p-f.y)>e*e)return;a.m_pointCount=1;a.m_type=x.e_faceA;a.m_localPlaneNormal.x=j-f.x;a.m_localPlaneNormal.y=p-f.y;a.m_localPlaneNormal.Normalize();a.m_localPoint.SetV(f)}else if(d<=0){if((j-w.x)*(j-w.x)+(p-w.y)*(p-w.y)>e*e)return;a.m_pointCount=1;a.m_type=x.e_faceA;a.m_localPlaneNormal.x=j-w.x;a.m_localPlaneNormal.y=p-w.y;a.m_localPlaneNormal.Normalize();a.m_localPoint.SetV(w)}else{v=0.5*(f.x+w.x);f=0.5*(f.y+w.y);
d=(j-v)*g[b].x+(p-f)*g[b].y;if(d>e)return;a.m_pointCount=1;a.m_type=x.e_faceA;a.m_localPlaneNormal.x=g[b].x;a.m_localPlaneNormal.y=g[b].y;a.m_localPlaneNormal.Normalize();a.m_localPoint.Set(v,f)}}a.m_points[0].m_localPoint.SetV(m.m_p);a.m_points[0].m_id.key=0};q.TestOverlap=function(a,g){var j=g.lowerBound,e=a.upperBound,m=j.x-e.x,b=j.y-e.y,j=a.lowerBound,e=g.upperBound,f=j.y-e.y;return m>0||b>0||j.x-e.x>0||f>0?false:true};myChrome.postDefs.push(function(){myChrome.Collision.b2Collision.s_incidentEdge=
q.MakeClipPointVector();myChrome.Collision.b2Collision.s_clipPoints1=q.MakeClipPointVector();myChrome.Collision.b2Collision.s_clipPoints2=q.MakeClipPointVector();myChrome.Collision.b2Collision.s_edgeAO=new Vector_a2j_Number(1);myChrome.Collision.b2Collision.s_edgeBO=new Vector_a2j_Number(1);myChrome.Collision.b2Collision.s_localTangent=new f;myChrome.Collision.b2Collision.s_localNormal=new f;myChrome.Collision.b2Collision.s_planePoint=new f;myChrome.Collision.b2Collision.s_normal=new f;myChrome.Collision.b2Collision.s_tangent=
new f;myChrome.Collision.b2Collision.s_tangent2=new f;myChrome.Collision.b2Collision.s_v11=new f;myChrome.Collision.b2Collision.s_v12=new f;myChrome.Collision.b2Collision.b2CollidePolyTempVec=new f;myChrome.Collision.b2Collision.b2_nullFeature=255});s.b2ContactID=function(){this.features=new j};s.prototype.b2ContactID=function(){this.features._m_id=this};s.prototype.Set=function(a){this.key=a._key};s.prototype.Copy=function(){var a=new s;a.key=this.key;return a};Object.defineProperty(s.prototype,
"key",{enumerable:false,configurable:true,get:function(){return this._key}});Object.defineProperty(s.prototype,"key",{enumerable:false,configurable:true,set:function(a){a===void 0&&(a=0);this._key=a;this.features._referenceEdge=this._key&255;this.features._incidentEdge=(this._key&65280)>>8&255;this.features._incidentVertex=(this._key&16711680)>>16&255;this.features._flip=(this._key&4278190080)>>24&255}});u.b2ContactPoint=function(){this.position=new f;this.velocity=new f;this.normal=new f;this.id=
new s};C.b2Distance=function(){};C.Distance=function(g,j,m){++C.b2_gjkCalls;var b=m.proxyA,c=m.proxyB,p=m.transformA,d=m.transformB,v=C.s_simplex;v.ReadCache(j,b,p,c,d);var y=v.m_vertices,w=C.s_saveA,o=C.s_saveB,E=0;v.GetClosestPoint().LengthSquared();for(var B=0,k,L=0;L<20;){E=v.m_count;for(B=0;B<E;B++){w[B]=y[B].indexA;o[B]=y[B].indexB}switch(v.m_count){case 1:break;case 2:v.Solve2();break;case 3:v.Solve3();break;default:a.b2Assert(false)}if(v.m_count==3)break;k=v.GetClosestPoint();k.LengthSquared();
B=v.GetSearchDirection();if(B.LengthSquared()<Number.MIN_VALUE*Number.MIN_VALUE)break;k=y[v.m_count];k.indexA=b.GetSupport(e.MulTMV(p.R,B.GetNegative()));k.wA=e.MulX(p,b.GetVertex(k.indexA));k.indexB=c.GetSupport(e.MulTMV(d.R,B));k.wB=e.MulX(d,c.GetVertex(k.indexB));k.w=e.SubtractVV(k.wB,k.wA);++L;++C.b2_gjkIters;for(var h=false,B=0;B<E;B++)if(k.indexA==w[B]&&k.indexB==o[B]){h=true;break}if(h)break;++v.m_count}C.b2_gjkMaxIters=e.Max(C.b2_gjkMaxIters,L);v.GetWitnessPoints(g.pointA,g.pointB);g.distance=
e.SubtractVV(g.pointA,g.pointB).Length();g.iterations=L;v.WriteCache(j);if(m.useRadii){j=b.m_radius;c=c.m_radius;if(g.distance>j+c&&g.distance>Number.MIN_VALUE){g.distance=g.distance-(j+c);m=e.SubtractVV(g.pointB,g.pointA);m.Normalize();g.pointA.x=g.pointA.x+j*m.x;g.pointA.y=g.pointA.y+j*m.y;g.pointB.x=g.pointB.x-c*m.x;g.pointB.y=g.pointB.y-c*m.y}else{k=new f;k.x=0.5*(g.pointA.x+g.pointB.x);k.y=0.5*(g.pointA.y+g.pointB.y);g.pointA.x=g.pointB.x=k.x;g.pointA.y=g.pointB.y=k.y;g.distance=0}}};myChrome.postDefs.push(function(){myChrome.Collision.b2Distance.s_simplex=
new p;myChrome.Collision.b2Distance.s_saveA=new Vector_a2j_Number(3);myChrome.Collision.b2Distance.s_saveB=new Vector_a2j_Number(3)});F.b2DistanceInput=function(){};o.b2DistanceOutput=function(){this.pointA=new f;this.pointB=new f};G.b2DistanceProxy=function(){};G.prototype.Set=function(g){switch(g.GetType()){case b.e_circleShape:g=g instanceof l?g:null;this.m_vertices=new Vector(1,true);this.m_vertices[0]=g.m_p;this.m_count=1;this.m_radius=g.m_radius;break;case b.e_polygonShape:g=g instanceof d?
g:null;this.m_vertices=g.m_vertices;this.m_count=g.m_vertexCount;this.m_radius=g.m_radius;break;default:a.b2Assert(false)}};G.prototype.GetSupport=function(a){for(var g=0,j=this.m_vertices[0].x*a.x+this.m_vertices[0].y*a.y,m=1;m<this.m_count;++m){var e=this.m_vertices[m].x*a.x+this.m_vertices[m].y*a.y;if(e>j){g=m;j=e}}return g};G.prototype.GetSupportVertex=function(a){for(var g=0,j=this.m_vertices[0].x*a.x+this.m_vertices[0].y*a.y,m=1;m<this.m_count;++m){var e=this.m_vertices[m].x*a.x+this.m_vertices[m].y*
a.y;if(e>j){g=m;j=e}}return this.m_vertices[g]};G.prototype.GetVertexCount=function(){return this.m_count};G.prototype.GetVertex=function(g){g===void 0&&(g=0);a.b2Assert(0<=g&&g<this.m_count);return this.m_vertices[g]};z.b2DynamicTree=function(){};z.prototype.b2DynamicTree=function(){this.m_freeList=this.m_root=null;this.m_insertionCount=this.m_path=0};z.prototype.CreateProxy=function(g,j){var m=this.AllocateNode(),e=a.b2_aabbExtension,b=a.b2_aabbExtension;m.aabb.lowerBound.x=g.lowerBound.x-e;m.aabb.lowerBound.y=
g.lowerBound.y-b;m.aabb.upperBound.x=g.upperBound.x+e;m.aabb.upperBound.y=g.upperBound.y+b;m.userData=j;this.InsertLeaf(m);return m};z.prototype.DestroyProxy=function(a){this.RemoveLeaf(a);this.FreeNode(a)};z.prototype.MoveProxy=function(g,j,m){a.b2Assert(g.IsLeaf());if(g.aabb.Contains(j))return false;this.RemoveLeaf(g);var e=a.b2_aabbExtension+a.b2_aabbMultiplier*(m.x>0?m.x:-m.x),m=a.b2_aabbExtension+a.b2_aabbMultiplier*(m.y>0?m.y:-m.y);g.aabb.lowerBound.x=j.lowerBound.x-e;g.aabb.lowerBound.y=j.lowerBound.y-
m;g.aabb.upperBound.x=j.upperBound.x+e;g.aabb.upperBound.y=j.upperBound.y+m;this.InsertLeaf(g);return true};z.prototype.Rebalance=function(a){a===void 0&&(a=0);if(this.m_root!=null)for(var g=0;g<a;g++){for(var j=this.m_root,m=0;j.IsLeaf()==false;){j=this.m_path>>m&1?j.child2:j.child1;m=m+1&31}++this.m_path;this.RemoveLeaf(j);this.InsertLeaf(j)}};z.prototype.GetFatAABB=function(a){return a.aabb};z.prototype.GetUserData=function(a){return a.userData};z.prototype.Query=function(a,g){if(this.m_root!=
null){var j=new Vector,m=0;for(j[m++]=this.m_root;m>0;){var e=j[--m];if(e.aabb.TestOverlap(g))if(e.IsLeaf()){if(!a(e))break}else{j[m++]=e.child1;j[m++]=e.child2}}}};z.prototype.RayCast=function(a,g){if(this.m_root!=null){var j=g.p1,m=g.p2,b=e.SubtractVV(j,m);b.Normalize();var b=e.CrossFV(1,b),c=e.AbsV(b),f=g.maxFraction,p=new k,d=0,v=0,d=j.x+f*(m.x-j.x),v=j.y+f*(m.y-j.y);p.lowerBound.x=Math.min(j.x,d);p.lowerBound.y=Math.min(j.y,v);p.upperBound.x=Math.max(j.x,d);p.upperBound.y=Math.max(j.y,v);var y=
new Vector,w=0;for(y[w++]=this.m_root;w>0;){f=y[--w];if(f.aabb.TestOverlap(p)!=false){d=f.aabb.GetCenter();v=f.aabb.GetExtents();if(!(Math.abs(b.x*(j.x-d.x)+b.y*(j.y-d.y))-c.x*v.x-c.y*v.y>0))if(f.IsLeaf()){d=new I;d.p1=g.p1;d.p2=g.p2;d.maxFraction=g.maxFraction;f=a(d,f);if(f==0)break;if(f>0){d=j.x+f*(m.x-j.x);v=j.y+f*(m.y-j.y);p.lowerBound.x=Math.min(j.x,d);p.lowerBound.y=Math.min(j.y,v);p.upperBound.x=Math.max(j.x,d);p.upperBound.y=Math.max(j.y,v)}}else{y[w++]=f.child1;y[w++]=f.child2}}}}};z.prototype.AllocateNode=
function(){if(this.m_freeList){var a=this.m_freeList;this.m_freeList=a.parent;a.parent=null;a.child1=null;a.child2=null;return a}return new H};z.prototype.FreeNode=function(a){a.parent=this.m_freeList;this.m_freeList=a};z.prototype.InsertLeaf=function(a){++this.m_insertionCount;if(this.m_root==null){this.m_root=a;this.m_root.parent=null}else{var g=a.aabb.GetCenter(),j=this.m_root;if(j.IsLeaf()==false){do var m=j.child1,j=j.child2,j=Math.abs((m.aabb.lowerBound.x+m.aabb.upperBound.x)/2-g.x)+Math.abs((m.aabb.lowerBound.y+
m.aabb.upperBound.y)/2-g.y)<Math.abs((j.aabb.lowerBound.x+j.aabb.upperBound.x)/2-g.x)+Math.abs((j.aabb.lowerBound.y+j.aabb.upperBound.y)/2-g.y)?m:j;while(j.IsLeaf()==false)}g=j.parent;m=this.AllocateNode();m.parent=g;m.userData=null;m.aabb.Combine(a.aabb,j.aabb);if(g){j.parent.child1==j?g.child1=m:g.child2=m;m.child1=j;m.child2=a;j.parent=m;a.parent=m;do{if(g.aabb.Contains(m.aabb))break;g.aabb.Combine(g.child1.aabb,g.child2.aabb);m=g;g=g.parent}while(g)}else{m.child1=j;m.child2=a;j.parent=m;this.m_root=
a.parent=m}}};z.prototype.RemoveLeaf=function(a){if(a==this.m_root)this.m_root=null;else{var g=a.parent,j=g.parent,a=g.child1==a?g.child2:g.child1;if(j){j.child1==g?j.child1=a:j.child2=a;a.parent=j;for(this.FreeNode(g);j;){g=j.aabb;j.aabb=k.Combine(j.child1.aabb,j.child2.aabb);if(g.Contains(j.aabb))break;j=j.parent}}else{this.m_root=a;a.parent=null;this.FreeNode(g)}}};J.b2DynamicTreeBroadPhase=function(){this.m_tree=new z;this.m_moveBuffer=new Vector;this.m_pairBuffer=new Vector;this.m_pairCount=
0};J.prototype.CreateProxy=function(a,g){var j=this.m_tree.CreateProxy(a,g);++this.m_proxyCount;this.BufferMove(j);return j};J.prototype.DestroyProxy=function(a){this.UnBufferMove(a);--this.m_proxyCount;this.m_tree.DestroyProxy(a)};J.prototype.MoveProxy=function(a,g,j){this.m_tree.MoveProxy(a,g,j)&&this.BufferMove(a)};J.prototype.TestOverlap=function(a,g){var j=this.m_tree.GetFatAABB(a),m=this.m_tree.GetFatAABB(g);return j.TestOverlap(m)};J.prototype.GetUserData=function(a){return this.m_tree.GetUserData(a)};
J.prototype.GetFatAABB=function(a){return this.m_tree.GetFatAABB(a)};J.prototype.GetProxyCount=function(){return this.m_proxyCount};J.prototype.UpdatePairs=function(a){for(var g=this,j=g.m_pairCount=0,m,j=0;j<g.m_moveBuffer.length;++j){m=g.m_moveBuffer[j];var e=g.m_tree.GetFatAABB(m);g.m_tree.Query(function(a){if(a==m)return true;g.m_pairCount==g.m_pairBuffer.length&&(g.m_pairBuffer[g.m_pairCount]=new A);var j=g.m_pairBuffer[g.m_pairCount];j.proxyA=a<m?a:m;j.proxyB=a>=m?a:m;++g.m_pairCount;return true},
e)}for(j=g.m_moveBuffer.length=0;j<g.m_pairCount;){var e=g.m_pairBuffer[j],b=g.m_tree.GetUserData(e.proxyA),f=g.m_tree.GetUserData(e.proxyB);a(b,f);for(++j;j<g.m_pairCount;){b=g.m_pairBuffer[j];if(b.proxyA!=e.proxyA||b.proxyB!=e.proxyB)break;++j}}};J.prototype.Query=function(a,g){this.m_tree.Query(a,g)};J.prototype.RayCast=function(a,g){this.m_tree.RayCast(a,g)};J.prototype.Validate=function(){};J.prototype.Rebalance=function(a){a===void 0&&(a=0);this.m_tree.Rebalance(a)};J.prototype.BufferMove=function(a){this.m_moveBuffer[this.m_moveBuffer.length]=
a};J.prototype.UnBufferMove=function(a){this.m_moveBuffer.splice(parseInt(this.m_moveBuffer.indexOf(a)),1)};J.prototype.ComparePairs=function(){return 0};J.__implements={};J.__implements[y]=true;H.b2DynamicTreeNode=function(){this.aabb=new k};H.prototype.IsLeaf=function(){return this.child1==null};A.b2DynamicTreePair=function(){};x.b2Manifold=function(){this.m_pointCount=0};x.prototype.b2Manifold=function(){this.m_points=new Vector(a.b2_maxManifoldPoints);for(var g=0;g<a.b2_maxManifoldPoints;g++)this.m_points[g]=
new M;this.m_localPlaneNormal=new f;this.m_localPoint=new f};x.prototype.Reset=function(){for(var g=0;g<a.b2_maxManifoldPoints;g++)(this.m_points[g]instanceof M?this.m_points[g]:null).Reset();this.m_localPlaneNormal.SetZero();this.m_localPoint.SetZero();this.m_pointCount=this.m_type=0};x.prototype.Set=function(g){this.m_pointCount=g.m_pointCount;for(var j=0;j<a.b2_maxManifoldPoints;j++)(this.m_points[j]instanceof M?this.m_points[j]:null).Set(g.m_points[j]);this.m_localPlaneNormal.SetV(g.m_localPlaneNormal);
this.m_localPoint.SetV(g.m_localPoint);this.m_type=g.m_type};x.prototype.Copy=function(){var a=new x;a.Set(this);return a};myChrome.postDefs.push(function(){myChrome.Collision.b2Manifold.e_circles=1;myChrome.Collision.b2Manifold.e_faceA=2;myChrome.Collision.b2Manifold.e_faceB=4});M.b2ManifoldPoint=function(){this.m_localPoint=new f;this.m_id=new s};M.prototype.b2ManifoldPoint=function(){this.Reset()};M.prototype.Reset=function(){this.m_localPoint.SetZero();this.m_tangentImpulse=this.m_normalImpulse=
0;this.m_id.key=0};M.prototype.Set=function(a){this.m_localPoint.SetV(a.m_localPoint);this.m_normalImpulse=a.m_normalImpulse;this.m_tangentImpulse=a.m_tangentImpulse;this.m_id.Set(a.m_id)};D.b2Point=function(){this.p=new f};D.prototype.Support=function(){return this.p};D.prototype.GetFirstVertex=function(){return this.p};I.b2RayCastInput=function(){this.p1=new f;this.p2=new f};I.prototype.b2RayCastInput=function(a,g,j){a===void 0&&(a=null);g===void 0&&(g=null);j===void 0&&(j=1);a&&this.p1.SetV(a);
g&&this.p2.SetV(g);this.maxFraction=j};N.b2RayCastOutput=function(){this.normal=new f};K.b2Segment=function(){this.p1=new f;this.p2=new f};K.prototype.TestSegment=function(a,g,j,m){m===void 0&&(m=0);var e=j.p1,b=j.p2.x-e.x,f=j.p2.y-e.y,j=this.p2.y-this.p1.y,c=-(this.p2.x-this.p1.x),p=100*Number.MIN_VALUE,d=-(b*j+f*c);if(d>p){var v=e.x-this.p1.x,y=e.y-this.p1.y,e=v*j+y*c;if(0<=e&&e<=m*d){m=-b*y+f*v;if(-p*d<=m&&m<=d*(1+p)){e=e/d;m=Math.sqrt(j*j+c*c);a[0]=e;g.Set(j/m,c/m);return true}}}return false};
K.prototype.Extend=function(a){this.ExtendForward(a);this.ExtendBackward(a)};K.prototype.ExtendForward=function(a){var g=this.p2.x-this.p1.x,j=this.p2.y-this.p1.y,a=Math.min(g>0?(a.upperBound.x-this.p1.x)/g:g<0?(a.lowerBound.x-this.p1.x)/g:Number.POSITIVE_INFINITY,j>0?(a.upperBound.y-this.p1.y)/j:j<0?(a.lowerBound.y-this.p1.y)/j:Number.POSITIVE_INFINITY);this.p2.x=this.p1.x+g*a;this.p2.y=this.p1.y+j*a};K.prototype.ExtendBackward=function(a){var g=-this.p2.x+this.p1.x,j=-this.p2.y+this.p1.y,a=Math.min(g>
0?(a.upperBound.x-this.p2.x)/g:g<0?(a.lowerBound.x-this.p2.x)/g:Number.POSITIVE_INFINITY,j>0?(a.upperBound.y-this.p2.y)/j:j<0?(a.lowerBound.y-this.p2.y)/j:Number.POSITIVE_INFINITY);this.p1.x=this.p2.x+g*a;this.p1.y=this.p2.y+j*a};m.b2SeparationFunction=function(){this.m_localPoint=new f;this.m_axis=new f};m.prototype.Initialize=function(g,j,b,c,p){this.m_proxyA=j;this.m_proxyB=c;var d=parseInt(g.count);a.b2Assert(0<d&&d<3);var v,y,w,o,B=0,E=0;if(d==1){this.m_type=m.e_points;v=this.m_proxyA.GetVertex(g.indexA[0]);
y=this.m_proxyB.GetVertex(g.indexB[0]);d=v;g=b.R;j=b.position.x+(g.col1.x*d.x+g.col2.x*d.y);c=b.position.y+(g.col1.y*d.x+g.col2.y*d.y);d=y;g=p.R;w=p.position.x+(g.col1.x*d.x+g.col2.x*d.y);o=p.position.y+(g.col1.y*d.x+g.col2.y*d.y);this.m_axis.x=w-j;this.m_axis.y=o-c;this.m_axis.Normalize()}else{if(g.indexB[0]==g.indexB[1]){this.m_type=m.e_faceA;j=this.m_proxyA.GetVertex(g.indexA[0]);c=this.m_proxyA.GetVertex(g.indexA[1]);y=this.m_proxyB.GetVertex(g.indexB[0]);this.m_localPoint.x=0.5*(j.x+c.x);this.m_localPoint.y=
0.5*(j.y+c.y);this.m_axis=e.CrossVF(e.SubtractVV(c,j),1);this.m_axis.Normalize();d=this.m_axis;g=b.R;B=g.col1.x*d.x+g.col2.x*d.y;E=g.col1.y*d.x+g.col2.y*d.y;d=this.m_localPoint;g=b.R;j=b.position.x+(g.col1.x*d.x+g.col2.x*d.y);c=b.position.y+(g.col1.y*d.x+g.col2.y*d.y);d=y;g=p.R;w=p.position.x+(g.col1.x*d.x+g.col2.x*d.y);o=p.position.y+(g.col1.y*d.x+g.col2.y*d.y);B=(w-j)*B+(o-c)*E}else if(g.indexA[0]==g.indexA[0]){this.m_type=m.e_faceB;w=this.m_proxyB.GetVertex(g.indexB[0]);o=this.m_proxyB.GetVertex(g.indexB[1]);
v=this.m_proxyA.GetVertex(g.indexA[0]);this.m_localPoint.x=0.5*(w.x+o.x);this.m_localPoint.y=0.5*(w.y+o.y);this.m_axis=e.CrossVF(e.SubtractVV(o,w),1);this.m_axis.Normalize();d=this.m_axis;g=p.R;B=g.col1.x*d.x+g.col2.x*d.y;E=g.col1.y*d.x+g.col2.y*d.y;d=this.m_localPoint;g=p.R;w=p.position.x+(g.col1.x*d.x+g.col2.x*d.y);o=p.position.y+(g.col1.y*d.x+g.col2.y*d.y);d=v;g=b.R;j=b.position.x+(g.col1.x*d.x+g.col2.x*d.y);c=b.position.y+(g.col1.y*d.x+g.col2.y*d.y);B=(j-w)*B+(c-o)*E}else{j=this.m_proxyA.GetVertex(g.indexA[0]);
c=this.m_proxyA.GetVertex(g.indexA[1]);w=this.m_proxyB.GetVertex(g.indexB[0]);o=this.m_proxyB.GetVertex(g.indexB[1]);e.MulX(b,v);v=e.MulMV(b.R,e.SubtractVV(c,j));e.MulX(p,y);B=e.MulMV(p.R,e.SubtractVV(o,w));p=v.x*v.x+v.y*v.y;y=B.x*B.x+B.y*B.y;g=e.SubtractVV(B,v);b=v.x*g.x+v.y*g.y;g=B.x*g.x+B.y*g.y;v=v.x*B.x+v.y*B.y;E=p*y-v*v;B=0;E!=0&&(B=e.Clamp((v*g-b*y)/E,0,1));(v*B+g)/y<0&&(B=e.Clamp((v-b)/p,0,1));v=new f;v.x=j.x+B*(c.x-j.x);v.y=j.y+B*(c.y-j.y);y=new f;y.x=w.x+B*(o.x-w.x);y.y=w.y+B*(o.y-w.y);if(B==
0||B==1){this.m_type=m.e_faceB;this.m_axis=e.CrossVF(e.SubtractVV(o,w),1);this.m_axis.Normalize();this.m_localPoint=y}else{this.m_type=m.e_faceA;this.m_axis=e.CrossVF(e.SubtractVV(c,j),1);this.m_localPoint=v}}B<0&&this.m_axis.NegativeSelf()}};m.prototype.Evaluate=function(g,j){var b,c,f=0;switch(this.m_type){case m.e_points:b=e.MulTMV(g.R,this.m_axis);c=e.MulTMV(j.R,this.m_axis.GetNegative());b=this.m_proxyA.GetSupportVertex(b);c=this.m_proxyB.GetSupportVertex(c);b=e.MulX(g,b);c=e.MulX(j,c);return(c.x-
b.x)*this.m_axis.x+(c.y-b.y)*this.m_axis.y;case m.e_faceA:f=e.MulMV(g.R,this.m_axis);b=e.MulX(g,this.m_localPoint);c=e.MulTMV(j.R,f.GetNegative());c=this.m_proxyB.GetSupportVertex(c);c=e.MulX(j,c);return(c.x-b.x)*f.x+(c.y-b.y)*f.y;case m.e_faceB:f=e.MulMV(j.R,this.m_axis);c=e.MulX(j,this.m_localPoint);b=e.MulTMV(g.R,f.GetNegative());b=this.m_proxyA.GetSupportVertex(b);b=e.MulX(g,b);return(b.x-c.x)*f.x+(b.y-c.y)*f.y;default:a.b2Assert(false);return 0}};myChrome.postDefs.push(function(){myChrome.Collision.b2SeparationFunction.e_points=
1;myChrome.Collision.b2SeparationFunction.e_faceA=2;myChrome.Collision.b2SeparationFunction.e_faceB=4});p.b2Simplex=function(){this.m_v1=new v;this.m_v2=new v;this.m_v3=new v;this.m_vertices=new Vector(3)};p.prototype.b2Simplex=function(){this.m_vertices[0]=this.m_v1;this.m_vertices[1]=this.m_v2;this.m_vertices[2]=this.m_v3};p.prototype.ReadCache=function(g,j,m,b,c){a.b2Assert(0<=g.count&&g.count<=3);var f,p;this.m_count=g.count;for(var d=this.m_vertices,v=0;v<this.m_count;v++){var y=d[v];y.indexA=
g.indexA[v];y.indexB=g.indexB[v];f=j.GetVertex(y.indexA);p=b.GetVertex(y.indexB);y.wA=e.MulX(m,f);y.wB=e.MulX(c,p);y.w=e.SubtractVV(y.wB,y.wA);y.a=0}if(this.m_count>1){g=g.metric;f=this.GetMetric();if(f<0.5*g||2*g<f||f<Number.MIN_VALUE)this.m_count=0}if(this.m_count==0){y=d[0];y.indexA=0;y.indexB=0;f=j.GetVertex(0);p=b.GetVertex(0);y.wA=e.MulX(m,f);y.wB=e.MulX(c,p);y.w=e.SubtractVV(y.wB,y.wA);this.m_count=1}};p.prototype.WriteCache=function(g){g.metric=this.GetMetric();g.count=myChrome.parseUInt(this.m_count);
for(var a=this.m_vertices,j=0;j<this.m_count;j++){g.indexA[j]=myChrome.parseUInt(a[j].indexA);g.indexB[j]=myChrome.parseUInt(a[j].indexB)}};p.prototype.GetSearchDirection=function(){switch(this.m_count){case 1:return this.m_v1.w.GetNegative();case 2:var g=e.SubtractVV(this.m_v2.w,this.m_v1.w);return e.CrossVV(g,this.m_v1.w.GetNegative())>0?e.CrossFV(1,g):e.CrossVF(g,1);default:a.b2Assert(false);return new f}};p.prototype.GetClosestPoint=function(){switch(this.m_count){case 0:a.b2Assert(false);return new f;
case 1:return this.m_v1.w;case 2:return new f(this.m_v1.a*this.m_v1.w.x+this.m_v2.a*this.m_v2.w.x,this.m_v1.a*this.m_v1.w.y+this.m_v2.a*this.m_v2.w.y);default:a.b2Assert(false);return new f}};p.prototype.GetWitnessPoints=function(g,j){switch(this.m_count){case 0:a.b2Assert(false);break;case 1:g.SetV(this.m_v1.wA);j.SetV(this.m_v1.wB);break;case 2:g.x=this.m_v1.a*this.m_v1.wA.x+this.m_v2.a*this.m_v2.wA.x;g.y=this.m_v1.a*this.m_v1.wA.y+this.m_v2.a*this.m_v2.wA.y;j.x=this.m_v1.a*this.m_v1.wB.x+this.m_v2.a*
this.m_v2.wB.x;j.y=this.m_v1.a*this.m_v1.wB.y+this.m_v2.a*this.m_v2.wB.y;break;case 3:j.x=g.x=this.m_v1.a*this.m_v1.wA.x+this.m_v2.a*this.m_v2.wA.x+this.m_v3.a*this.m_v3.wA.x;j.y=g.y=this.m_v1.a*this.m_v1.wA.y+this.m_v2.a*this.m_v2.wA.y+this.m_v3.a*this.m_v3.wA.y;break;default:a.b2Assert(false)}};p.prototype.GetMetric=function(){switch(this.m_count){case 0:a.b2Assert(false);return 0;case 1:return 0;case 2:return e.SubtractVV(this.m_v1.w,this.m_v2.w).Length();case 3:return e.CrossVV(e.SubtractVV(this.m_v2.w,
this.m_v1.w),e.SubtractVV(this.m_v3.w,this.m_v1.w));default:a.b2Assert(false);return 0}};p.prototype.Solve2=function(){var g=this.m_v1.w,a=this.m_v2.w,j=e.SubtractVV(a,g),g=-(g.x*j.x+g.y*j.y);if(g<=0)this.m_count=this.m_v1.a=1;else{a=a.x*j.x+a.y*j.y;if(a<=0){this.m_count=this.m_v2.a=1;this.m_v1.Set(this.m_v2)}else{j=1/(a+g);this.m_v1.a=a*j;this.m_v2.a=g*j;this.m_count=2}}};p.prototype.Solve3=function(){var g=this.m_v1.w,a=this.m_v2.w,j=this.m_v3.w,m=e.SubtractVV(a,g),b=e.Dot(g,m),c=e.Dot(a,m),b=-b,
f=e.SubtractVV(j,g),p=e.Dot(g,f),d=e.Dot(j,f),p=-p,v=e.SubtractVV(j,a),y=e.Dot(a,v),v=e.Dot(j,v),y=-y,f=e.CrossVV(m,f),m=f*e.CrossVV(a,j),j=f*e.CrossVV(j,g),g=f*e.CrossVV(g,a);if(b<=0&&p<=0)this.m_count=this.m_v1.a=1;else if(c>0&&b>0&&g<=0){d=1/(c+b);this.m_v1.a=c*d;this.m_v2.a=b*d;this.m_count=2}else if(d>0&&p>0&&j<=0){c=1/(d+p);this.m_v1.a=d*c;this.m_v3.a=p*c;this.m_count=2;this.m_v2.Set(this.m_v3)}else if(c<=0&&y<=0){this.m_count=this.m_v2.a=1;this.m_v1.Set(this.m_v2)}else if(d<=0&&v<=0){this.m_count=
this.m_v3.a=1;this.m_v1.Set(this.m_v3)}else if(v>0&&y>0&&m<=0){c=1/(v+y);this.m_v2.a=v*c;this.m_v3.a=y*c;this.m_count=2;this.m_v1.Set(this.m_v3)}else{c=1/(m+j+g);this.m_v1.a=m*c;this.m_v2.a=j*c;this.m_v3.a=g*c;this.m_count=3}};w.b2SimplexCache=function(){this.indexA=new Vector_a2j_Number(3);this.indexB=new Vector_a2j_Number(3)};v.b2SimplexVertex=function(){};v.prototype.Set=function(g){this.wA.SetV(g.wA);this.wB.SetV(g.wB);this.w.SetV(g.w);this.a=g.a;this.indexA=g.indexA;this.indexB=g.indexB};E.b2TimeOfImpact=
function(){};E.TimeOfImpact=function(g){++E.b2_toiCalls;var j=g.proxyA,m=g.proxyB,b=g.sweepA,c=g.sweepB;a.b2Assert(b.t0==c.t0);a.b2Assert(1-b.t0>Number.MIN_VALUE);var f=j.m_radius+m.m_radius,g=g.tolerance,p=0,d=0,v=0;E.s_cache.count=0;for(E.s_distanceInput.useRadii=false;;){b.GetTransform(E.s_xfA,p);c.GetTransform(E.s_xfB,p);E.s_distanceInput.proxyA=j;E.s_distanceInput.proxyB=m;E.s_distanceInput.transformA=E.s_xfA;E.s_distanceInput.transformB=E.s_xfB;C.Distance(E.s_distanceOutput,E.s_cache,E.s_distanceInput);
if(E.s_distanceOutput.distance<=0){p=1;break}E.s_fcn.Initialize(E.s_cache,j,E.s_xfA,m,E.s_xfB);var y=E.s_fcn.Evaluate(E.s_xfA,E.s_xfB);if(y<=0){p=1;break}d==0&&(v=y>f?e.Max(f-g,0.75*f):e.Max(y-g,0.02*f));if(y-v<0.5*g){if(d==0){p=1;break}break}var w=p,o=p,B=1;b.GetTransform(E.s_xfA,B);c.GetTransform(E.s_xfB,B);var k=E.s_fcn.Evaluate(E.s_xfA,E.s_xfB);if(k>=v){p=1;break}for(var L=0;;){var h=0,h=L&1?o+(v-y)*(B-o)/(k-y):0.5*(o+B);b.GetTransform(E.s_xfA,h);c.GetTransform(E.s_xfB,h);var z=E.s_fcn.Evaluate(E.s_xfA,
E.s_xfB);if(e.Abs(z-v)<0.025*g){w=h;break}if(z>v){o=h;y=z}else{B=h;k=z}++L;++E.b2_toiRootIters;if(L==50)break}E.b2_toiMaxRootIters=e.Max(E.b2_toiMaxRootIters,L);if(w<(1+100*Number.MIN_VALUE)*p)break;p=w;d++;++E.b2_toiIters;if(d==1E3)break}E.b2_toiMaxIters=e.Max(E.b2_toiMaxIters,d);return p};myChrome.postDefs.push(function(){myChrome.Collision.b2TimeOfImpact.b2_toiCalls=0;myChrome.Collision.b2TimeOfImpact.b2_toiIters=0;myChrome.Collision.b2TimeOfImpact.b2_toiMaxIters=0;myChrome.Collision.b2TimeOfImpact.b2_toiRootIters=
0;myChrome.Collision.b2TimeOfImpact.b2_toiMaxRootIters=0;myChrome.Collision.b2TimeOfImpact.s_cache=new w;myChrome.Collision.b2TimeOfImpact.s_distanceInput=new F;myChrome.Collision.b2TimeOfImpact.s_xfA=new h;myChrome.Collision.b2TimeOfImpact.s_xfB=new h;myChrome.Collision.b2TimeOfImpact.s_fcn=new m;myChrome.Collision.b2TimeOfImpact.s_distanceOutput=new o});L.b2TOIInput=function(){this.proxyA=new G;this.proxyB=new G;this.sweepA=new c;this.sweepB=new c};B.b2WorldManifold=function(){this.m_normal=new f};
B.prototype.b2WorldManifold=function(){this.m_points=new Vector(a.b2_maxManifoldPoints);for(var g=0;g<a.b2_maxManifoldPoints;g++)this.m_points[g]=new f};B.prototype.Initialize=function(g,a,j,m,b){j===void 0&&(j=0);b===void 0&&(b=0);if(g.m_pointCount!=0){var e=0,c,f,p=0,d=0,v=0,y=0,w=0;switch(g.m_type){case x.e_circles:f=a.R;c=g.m_localPoint;e=a.position.x+f.col1.x*c.x+f.col2.x*c.y;a=a.position.y+f.col1.y*c.x+f.col2.y*c.y;f=m.R;c=g.m_points[0].m_localPoint;g=m.position.x+f.col1.x*c.x+f.col2.x*c.y;
m=m.position.y+f.col1.y*c.x+f.col2.y*c.y;c=g-e;f=m-a;p=c*c+f*f;if(p>Number.MIN_VALUE*Number.MIN_VALUE){p=Math.sqrt(p);this.m_normal.x=c/p;this.m_normal.y=f/p}else{this.m_normal.x=1;this.m_normal.y=0}c=a+j*this.m_normal.y;m=m-b*this.m_normal.y;this.m_points[0].x=0.5*(e+j*this.m_normal.x+(g-b*this.m_normal.x));this.m_points[0].y=0.5*(c+m);break;case x.e_faceA:f=a.R;c=g.m_localPlaneNormal;p=f.col1.x*c.x+f.col2.x*c.y;d=f.col1.y*c.x+f.col2.y*c.y;f=a.R;c=g.m_localPoint;v=a.position.x+f.col1.x*c.x+f.col2.x*
c.y;y=a.position.y+f.col1.y*c.x+f.col2.y*c.y;this.m_normal.x=p;this.m_normal.y=d;for(e=0;e<g.m_pointCount;e++){f=m.R;c=g.m_points[e].m_localPoint;w=m.position.x+f.col1.x*c.x+f.col2.x*c.y;c=m.position.y+f.col1.y*c.x+f.col2.y*c.y;this.m_points[e].x=w+0.5*(j-(w-v)*p-(c-y)*d-b)*p;this.m_points[e].y=c+0.5*(j-(w-v)*p-(c-y)*d-b)*d}break;case x.e_faceB:f=m.R;c=g.m_localPlaneNormal;p=f.col1.x*c.x+f.col2.x*c.y;d=f.col1.y*c.x+f.col2.y*c.y;f=m.R;c=g.m_localPoint;v=m.position.x+f.col1.x*c.x+f.col2.x*c.y;y=m.position.y+
f.col1.y*c.x+f.col2.y*c.y;this.m_normal.x=-p;this.m_normal.y=-d;for(e=0;e<g.m_pointCount;e++){f=a.R;c=g.m_points[e].m_localPoint;w=a.position.x+f.col1.x*c.x+f.col2.x*c.y;c=a.position.y+f.col1.y*c.x+f.col2.y*c.y;this.m_points[e].x=w+0.5*(b-(w-v)*p-(c-y)*d-j)*p;this.m_points[e].y=c+0.5*(b-(w-v)*p-(c-y)*d-j)*d}}}};g.ClipVertex=function(){this.v=new f;this.id=new s};g.prototype.Set=function(g){this.v.SetV(g.v);this.id.Set(g.id)};j.Features=function(){};Object.defineProperty(j.prototype,"referenceEdge",
{enumerable:false,configurable:true,get:function(){return this._referenceEdge}});Object.defineProperty(j.prototype,"referenceEdge",{enumerable:false,configurable:true,set:function(g){g===void 0&&(g=0);this._referenceEdge=g;this._m_id._key=this._m_id._key&4294967040|this._referenceEdge&255}});Object.defineProperty(j.prototype,"incidentEdge",{enumerable:false,configurable:true,get:function(){return this._incidentEdge}});Object.defineProperty(j.prototype,"incidentEdge",{enumerable:false,configurable:true,
set:function(g){g===void 0&&(g=0);this._incidentEdge=g;this._m_id._key=this._m_id._key&4294902015|this._incidentEdge<<8&65280}});Object.defineProperty(j.prototype,"incidentVertex",{enumerable:false,configurable:true,get:function(){return this._incidentVertex}});Object.defineProperty(j.prototype,"incidentVertex",{enumerable:false,configurable:true,set:function(g){g===void 0&&(g=0);this._incidentVertex=g;this._m_id._key=this._m_id._key&4278255615|this._incidentVertex<<16&16711680}});Object.defineProperty(j.prototype,
"flip",{enumerable:false,configurable:true,get:function(){return this._flip}});Object.defineProperty(j.prototype,"flip",{enumerable:false,configurable:true,set:function(g){g===void 0&&(g=0);this._flip=g;this._m_id._key=this._m_id._key&16777215|this._flip<<24&4278190080}})})();
(function(){var l=myChrome.Common.b2Settings,d=myChrome.Collision.Shapes.b2CircleShape,b=myChrome.Collision.Shapes.b2EdgeChainDef,a=myChrome.Collision.Shapes.b2EdgeShape,e=myChrome.Collision.Shapes.b2MassData,c=myChrome.Collision.Shapes.b2PolygonShape,h=myChrome.Collision.Shapes.b2Shape,f=myChrome.Common.Math.b2Mat22,k=myChrome.Common.Math.b2Math,r=myChrome.Common.Math.b2Transform,t=myChrome.Common.Math.b2Vec2,q=myChrome.Collision.b2Distance,s=myChrome.Collision.b2DistanceInput,u=myChrome.Collision.b2DistanceOutput,
C=myChrome.Collision.b2DistanceProxy,F=myChrome.Collision.b2SimplexCache;myChrome.inherit(d,myChrome.Collision.Shapes.b2Shape);d.prototype.__super=myChrome.Collision.Shapes.b2Shape.prototype;d.b2CircleShape=function(){myChrome.Collision.Shapes.b2Shape.b2Shape.apply(this,arguments);this.m_p=new t};d.prototype.Copy=function(){var a=new d;a.Set(this);return a};d.prototype.Set=function(a){this.__super.Set.call(this,a);myChrome.is(a,d)&&this.m_p.SetV((a instanceof d?a:null).m_p)};d.prototype.TestPoint=
function(a,b){var e=a.R,c=a.position.x+(e.col1.x*this.m_p.x+e.col2.x*this.m_p.y),e=a.position.y+(e.col1.y*this.m_p.x+e.col2.y*this.m_p.y),c=b.x-c,e=b.y-e;return c*c+e*e<=this.m_radius*this.m_radius};d.prototype.RayCast=function(a,b,e){var c=e.R,f=b.p1.x-(e.position.x+(c.col1.x*this.m_p.x+c.col2.x*this.m_p.y)),e=b.p1.y-(e.position.y+(c.col1.y*this.m_p.x+c.col2.y*this.m_p.y)),c=b.p2.x-b.p1.x,d=b.p2.y-b.p1.y,k=f*c+e*d,h=c*c+d*d,r=k*k-h*(f*f+e*e-this.m_radius*this.m_radius);if(r<0||h<Number.MIN_VALUE)return false;
k=-(k+Math.sqrt(r));if(0<=k&&k<=b.maxFraction*h){k=k/h;a.fraction=k;a.normal.x=f+k*c;a.normal.y=e+k*d;a.normal.Normalize();return true}return false};d.prototype.ComputeAABB=function(a,b){var e=b.R,c=b.position.x+(e.col1.x*this.m_p.x+e.col2.x*this.m_p.y),e=b.position.y+(e.col1.y*this.m_p.x+e.col2.y*this.m_p.y);a.lowerBound.Set(c-this.m_radius,e-this.m_radius);a.upperBound.Set(c+this.m_radius,e+this.m_radius)};d.prototype.ComputeMass=function(a,b){b===void 0&&(b=0);a.mass=b*l.b2_pi*this.m_radius*this.m_radius;
a.center.SetV(this.m_p);a.I=a.mass*(0.5*this.m_radius*this.m_radius+(this.m_p.x*this.m_p.x+this.m_p.y*this.m_p.y))};d.prototype.ComputeSubmergedArea=function(a,b,e,c){b===void 0&&(b=0);var e=k.MulX(e,this.m_p),f=-(k.Dot(a,e)-b);if(f<-this.m_radius+Number.MIN_VALUE)return 0;if(f>this.m_radius){c.SetV(e);return Math.PI*this.m_radius*this.m_radius}var b=this.m_radius*this.m_radius,d=f*f,f=b*(Math.asin(f/this.m_radius)+Math.PI/2)+f*Math.sqrt(b-d),b=-2/3*Math.pow(b-d,1.5)/f;c.x=e.x+a.x*b;c.y=e.y+a.y*b;
return f};d.prototype.GetLocalPosition=function(){return this.m_p};d.prototype.SetLocalPosition=function(a){this.m_p.SetV(a)};d.prototype.GetRadius=function(){return this.m_radius};d.prototype.SetRadius=function(a){a===void 0&&(a=0);this.m_radius=a};d.prototype.b2CircleShape=function(a){a===void 0&&(a=0);this.__super.b2Shape.call(this);this.m_type=h.e_circleShape;this.m_radius=a};b.b2EdgeChainDef=function(){};b.prototype.b2EdgeChainDef=function(){this.vertexCount=0;this.isALoop=true;this.vertices=
[]};myChrome.inherit(a,myChrome.Collision.Shapes.b2Shape);a.prototype.__super=myChrome.Collision.Shapes.b2Shape.prototype;a.b2EdgeShape=function(){myChrome.Collision.Shapes.b2Shape.b2Shape.apply(this,arguments);this.s_supportVec=new t;this.m_v1=new t;this.m_v2=new t;this.m_coreV1=new t;this.m_coreV2=new t;this.m_normal=new t;this.m_direction=new t;this.m_cornerDir1=new t;this.m_cornerDir2=new t};a.prototype.TestPoint=function(){return false};a.prototype.RayCast=function(a,b,e){var c,f=b.p2.x-b.p1.x,
d=b.p2.y-b.p1.y;c=e.R;var k=e.position.x+(c.col1.x*this.m_v1.x+c.col2.x*this.m_v1.y),h=e.position.y+(c.col1.y*this.m_v1.x+c.col2.y*this.m_v1.y),r=e.position.y+(c.col1.y*this.m_v2.x+c.col2.y*this.m_v2.y)-h,e=-(e.position.x+(c.col1.x*this.m_v2.x+c.col2.x*this.m_v2.y)-k);c=100*Number.MIN_VALUE;var q=-(f*r+d*e);if(q>c){var k=b.p1.x-k,l=b.p1.y-h,h=k*r+l*e;if(0<=h&&h<=b.maxFraction*q){b=-f*l+d*k;if(-c*q<=b&&b<=q*(1+c)){a.fraction=h/q;b=Math.sqrt(r*r+e*e);a.normal.x=r/b;a.normal.y=e/b;return true}}}return false};
a.prototype.ComputeAABB=function(a,b){var e=b.R,c=b.position.x+(e.col1.x*this.m_v1.x+e.col2.x*this.m_v1.y),f=b.position.y+(e.col1.y*this.m_v1.x+e.col2.y*this.m_v1.y),d=b.position.x+(e.col1.x*this.m_v2.x+e.col2.x*this.m_v2.y),e=b.position.y+(e.col1.y*this.m_v2.x+e.col2.y*this.m_v2.y);if(c<d){a.lowerBound.x=c;a.upperBound.x=d}else{a.lowerBound.x=d;a.upperBound.x=c}if(f<e){a.lowerBound.y=f;a.upperBound.y=e}else{a.lowerBound.y=e;a.upperBound.y=f}};a.prototype.ComputeMass=function(a){a.mass=0;a.center.SetV(this.m_v1);
a.I=0};a.prototype.ComputeSubmergedArea=function(a,b,e,c){b===void 0&&(b=0);var f=new t(a.x*b,a.y*b),d=k.MulX(e,this.m_v1),e=k.MulX(e,this.m_v2),h=k.Dot(a,d)-b,a=k.Dot(a,e)-b;if(h>0){if(a>0)return 0;d.x=-a/(h-a)*d.x+h/(h-a)*e.x;d.y=-a/(h-a)*d.y+h/(h-a)*e.y}else if(a>0){e.x=-a/(h-a)*d.x+h/(h-a)*e.x;e.y=-a/(h-a)*d.y+h/(h-a)*e.y}c.x=(f.x+d.x+e.x)/3;c.y=(f.y+d.y+e.y)/3;return 0.5*((d.x-f.x)*(e.y-f.y)-(d.y-f.y)*(e.x-f.x))};a.prototype.GetLength=function(){return this.m_length};a.prototype.GetVertex1=function(){return this.m_v1};
a.prototype.GetVertex2=function(){return this.m_v2};a.prototype.GetCoreVertex1=function(){return this.m_coreV1};a.prototype.GetCoreVertex2=function(){return this.m_coreV2};a.prototype.GetNormalVector=function(){return this.m_normal};a.prototype.GetDirectionVector=function(){return this.m_direction};a.prototype.GetCorner1Vector=function(){return this.m_cornerDir1};a.prototype.GetCorner2Vector=function(){return this.m_cornerDir2};a.prototype.Corner1IsConvex=function(){return this.m_cornerConvex1};a.prototype.Corner2IsConvex=
function(){return this.m_cornerConvex2};a.prototype.GetFirstVertex=function(a){var e=a.R;return new t(a.position.x+(e.col1.x*this.m_coreV1.x+e.col2.x*this.m_coreV1.y),a.position.y+(e.col1.y*this.m_coreV1.x+e.col2.y*this.m_coreV1.y))};a.prototype.GetNextEdge=function(){return this.m_nextEdge};a.prototype.GetPrevEdge=function(){return this.m_prevEdge};a.prototype.Support=function(a,e,b){e===void 0&&(e=0);b===void 0&&(b=0);var c=a.R,f=a.position.x+(c.col1.x*this.m_coreV1.x+c.col2.x*this.m_coreV1.y),
d=a.position.y+(c.col1.y*this.m_coreV1.x+c.col2.y*this.m_coreV1.y),k=a.position.x+(c.col1.x*this.m_coreV2.x+c.col2.x*this.m_coreV2.y),a=a.position.y+(c.col1.y*this.m_coreV2.x+c.col2.y*this.m_coreV2.y);if(f*e+d*b>k*e+a*b){this.s_supportVec.x=f;this.s_supportVec.y=d}else{this.s_supportVec.x=k;this.s_supportVec.y=a}return this.s_supportVec};a.prototype.b2EdgeShape=function(a,e){this.__super.b2Shape.call(this);this.m_type=h.e_edgeShape;this.m_nextEdge=this.m_prevEdge=null;this.m_v1=a;this.m_v2=e;this.m_direction.Set(this.m_v2.x-
this.m_v1.x,this.m_v2.y-this.m_v1.y);this.m_length=this.m_direction.Normalize();this.m_normal.Set(this.m_direction.y,-this.m_direction.x);this.m_coreV1.Set(-l.b2_toiSlop*(this.m_normal.x-this.m_direction.x)+this.m_v1.x,-l.b2_toiSlop*(this.m_normal.y-this.m_direction.y)+this.m_v1.y);this.m_coreV2.Set(-l.b2_toiSlop*(this.m_normal.x+this.m_direction.x)+this.m_v2.x,-l.b2_toiSlop*(this.m_normal.y+this.m_direction.y)+this.m_v2.y);this.m_cornerDir1=this.m_normal;this.m_cornerDir2.Set(-this.m_normal.x,-this.m_normal.y)};
a.prototype.SetPrevEdge=function(a,e,b,c){this.m_prevEdge=a;this.m_coreV1=e;this.m_cornerDir1=b;this.m_cornerConvex1=c};a.prototype.SetNextEdge=function(a,e,b,c){this.m_nextEdge=a;this.m_coreV2=e;this.m_cornerDir2=b;this.m_cornerConvex2=c};e.b2MassData=function(){this.mass=0;this.center=new t(0,0);this.I=0};myChrome.inherit(c,myChrome.Collision.Shapes.b2Shape);c.prototype.__super=myChrome.Collision.Shapes.b2Shape.prototype;c.b2PolygonShape=function(){myChrome.Collision.Shapes.b2Shape.b2Shape.apply(this,
arguments)};c.prototype.Copy=function(){var a=new c;a.Set(this);return a};c.prototype.Set=function(a){this.__super.Set.call(this,a);if(myChrome.is(a,c)){a=a instanceof c?a:null;this.m_centroid.SetV(a.m_centroid);this.m_vertexCount=a.m_vertexCount;this.Reserve(this.m_vertexCount);for(var e=0;e<this.m_vertexCount;e++){this.m_vertices[e].SetV(a.m_vertices[e]);this.m_normals[e].SetV(a.m_normals[e])}}};c.prototype.SetAsArray=function(a,e){e===void 0&&(e=0);for(var b=new Vector,c=0,f,c=0;c<a.length;++c){f=
a[c];b.push(f)}this.SetAsVector(b,e)};c.AsArray=function(a,e){e===void 0&&(e=0);var b=new c;b.SetAsArray(a,e);return b};c.prototype.SetAsVector=function(a,e){e===void 0&&(e=0);if(e==0)e=a.length;l.b2Assert(2<=e);this.m_vertexCount=e;this.Reserve(e);for(var b=0,b=0;b<this.m_vertexCount;b++)this.m_vertices[b].SetV(a[b]);for(b=0;b<this.m_vertexCount;++b){var f=parseInt(b),d=parseInt(b+1<this.m_vertexCount?b+1:0),f=k.SubtractVV(this.m_vertices[d],this.m_vertices[f]);l.b2Assert(f.LengthSquared()>Number.MIN_VALUE);
this.m_normals[b].SetV(k.CrossVF(f,1));this.m_normals[b].Normalize()}this.m_centroid=c.ComputeCentroid(this.m_vertices,this.m_vertexCount)};c.AsVector=function(a,e){e===void 0&&(e=0);var b=new c;b.SetAsVector(a,e);return b};c.prototype.SetAsBox=function(a,e){a===void 0&&(a=0);e===void 0&&(e=0);this.m_vertexCount=4;this.Reserve(4);this.m_vertices[0].Set(-a,-e);this.m_vertices[1].Set(a,-e);this.m_vertices[2].Set(a,e);this.m_vertices[3].Set(-a,e);this.m_normals[0].Set(0,-1);this.m_normals[1].Set(1,0);
this.m_normals[2].Set(0,1);this.m_normals[3].Set(-1,0);this.m_centroid.SetZero()};c.AsBox=function(a,e){a===void 0&&(a=0);e===void 0&&(e=0);var b=new c;b.SetAsBox(a,e);return b};c.prototype.SetAsOrientedBox=function(a,e,b,c){a===void 0&&(a=0);e===void 0&&(e=0);b===void 0&&(b=null);c===void 0&&(c=0);this.m_vertexCount=4;this.Reserve(4);this.m_vertices[0].Set(-a,-e);this.m_vertices[1].Set(a,-e);this.m_vertices[2].Set(a,e);this.m_vertices[3].Set(-a,e);this.m_normals[0].Set(0,-1);this.m_normals[1].Set(1,
0);this.m_normals[2].Set(0,1);this.m_normals[3].Set(-1,0);this.m_centroid=b;a=new r;a.position=b;a.R.Set(c);for(b=0;b<this.m_vertexCount;++b){this.m_vertices[b]=k.MulX(a,this.m_vertices[b]);this.m_normals[b]=k.MulMV(a.R,this.m_normals[b])}};c.AsOrientedBox=function(a,e,b,f){a===void 0&&(a=0);e===void 0&&(e=0);b===void 0&&(b=null);f===void 0&&(f=0);var d=new c;d.SetAsOrientedBox(a,e,b,f);return d};c.prototype.SetAsEdge=function(a,e){this.m_vertexCount=2;this.Reserve(2);this.m_vertices[0].SetV(a);this.m_vertices[1].SetV(e);
this.m_centroid.x=0.5*(a.x+e.x);this.m_centroid.y=0.5*(a.y+e.y);this.m_normals[0]=k.CrossVF(k.SubtractVV(e,a),1);this.m_normals[0].Normalize();this.m_normals[1].x=-this.m_normals[0].x;this.m_normals[1].y=-this.m_normals[0].y};c.AsEdge=function(a,e){var b=new c;b.SetAsEdge(a,e);return b};c.prototype.TestPoint=function(a,e){var b;b=a.R;for(var c=e.x-a.position.x,f=e.y-a.position.y,d=c*b.col1.x+f*b.col1.y,k=c*b.col2.x+f*b.col2.y,h=0;h<this.m_vertexCount;++h){b=this.m_vertices[h];c=d-b.x;f=k-b.y;b=this.m_normals[h];
if(b.x*c+b.y*f>0)return false}return true};c.prototype.RayCast=function(a,e,b){var c=0,f=e.maxFraction,d=0,k=0,h,r,d=e.p1.x-b.position.x,k=e.p1.y-b.position.y;h=b.R;var q=d*h.col1.x+k*h.col1.y,l=d*h.col2.x+k*h.col2.y,d=e.p2.x-b.position.x,k=e.p2.y-b.position.y;h=b.R;e=d*h.col1.x+k*h.col1.y-q;h=d*h.col2.x+k*h.col2.y-l;for(var s=-1,m=0;m<this.m_vertexCount;++m){r=this.m_vertices[m];d=r.x-q;k=r.y-l;r=this.m_normals[m];d=r.x*d+r.y*k;k=r.x*e+r.y*h;if(k==0){if(d<0)return false}else if(k<0&&d<c*k){c=d/k;
s=m}else k>0&&d<f*k&&(f=d/k);if(f<c-Number.MIN_VALUE)return false}if(s>=0){a.fraction=c;h=b.R;r=this.m_normals[s];a.normal.x=h.col1.x*r.x+h.col2.x*r.y;a.normal.y=h.col1.y*r.x+h.col2.y*r.y;return true}return false};c.prototype.ComputeAABB=function(a,e){for(var b=e.R,c=this.m_vertices[0],f=e.position.x+(b.col1.x*c.x+b.col2.x*c.y),d=e.position.y+(b.col1.y*c.x+b.col2.y*c.y),k=f,h=d,r=1;r<this.m_vertexCount;++r)var c=this.m_vertices[r],q=e.position.x+(b.col1.x*c.x+b.col2.x*c.y),c=e.position.y+(b.col1.y*
c.x+b.col2.y*c.y),f=f<q?f:q,d=d<c?d:c,k=k>q?k:q,h=h>c?h:c;a.lowerBound.x=f-this.m_radius;a.lowerBound.y=d-this.m_radius;a.upperBound.x=k+this.m_radius;a.upperBound.y=h+this.m_radius};c.prototype.ComputeMass=function(a,e){e===void 0&&(e=0);if(this.m_vertexCount==2){a.center.x=0.5*(this.m_vertices[0].x+this.m_vertices[1].x);a.center.y=0.5*(this.m_vertices[0].y+this.m_vertices[1].y);a.mass=0;a.I=0}else{for(var b=0,c=0,f=0,d=0,k=1/3,h=0;h<this.m_vertexCount;++h)var r=this.m_vertices[h],q=h+1<this.m_vertexCount?
this.m_vertices[parseInt(h+1)]:this.m_vertices[0],l=r.x-0,s=r.y-0,m=q.x-0,p=q.y-0,w=l*p-s*m,v=0.5*w,f=f+v,b=b+v*k*(0+r.x+q.x),c=c+v*k*(0+r.y+q.y),r=l,d=d+w*(k*(0.25*(r*r+m*r+m*m)+(0*r+0*m))+0+(k*(0.25*(s*s+p*s+p*p)+(0*s+0*p))+0));a.mass=e*f;a.center.Set(b*(1/f),c*(1/f));a.I=e*d}};c.prototype.ComputeSubmergedArea=function(a,b,c,f){b===void 0&&(b=0);for(var d=k.MulTMV(c.R,a),h=b-k.Dot(a,c.position),r=new Vector_a2j_Number,q=0,l=-1,b=-1,s=false,a=a=0;a<this.m_vertexCount;++a){r[a]=k.Dot(d,this.m_vertices[a])-
h;var u=r[a]<-Number.MIN_VALUE;if(a>0)if(u){if(!s){l=a-1;q++}}else if(s){b=a-1;q++}s=u}switch(q){case 0:if(s){a=new e;this.ComputeMass(a,1);f.SetV(k.MulX(c,a.center));return a.mass}return 0;case 1:l==-1?l=this.m_vertexCount-1:b=this.m_vertexCount-1}a=parseInt((l+1)%this.m_vertexCount);d=parseInt((b+1)%this.m_vertexCount);h=(0-r[l])/(r[a]-r[l]);r=(0-r[b])/(r[d]-r[b]);l=new t(this.m_vertices[l].x*(1-h)+this.m_vertices[a].x*h,this.m_vertices[l].y*(1-h)+this.m_vertices[a].y*h);b=new t(this.m_vertices[b].x*
(1-r)+this.m_vertices[d].x*r,this.m_vertices[b].y*(1-r)+this.m_vertices[d].y*r);r=0;h=new t;for(q=this.m_vertices[a];a!=d;){a=(a+1)%this.m_vertexCount;s=a==d?b:this.m_vertices[a];u=0.5*((q.x-l.x)*(s.y-l.y)-(q.y-l.y)*(s.x-l.x));r=r+u;h.x=h.x+u*(l.x+q.x+s.x)/3;h.y=h.y+u*(l.y+q.y+s.y)/3;q=s}h.Multiply(1/r);f.SetV(k.MulX(c,h));return r};c.prototype.GetVertexCount=function(){return this.m_vertexCount};c.prototype.GetVertices=function(){return this.m_vertices};c.prototype.GetNormals=function(){return this.m_normals};
c.prototype.GetSupport=function(a){for(var b=0,e=this.m_vertices[0].x*a.x+this.m_vertices[0].y*a.y,c=1;c<this.m_vertexCount;++c){var f=this.m_vertices[c].x*a.x+this.m_vertices[c].y*a.y;if(f>e){b=c;e=f}}return b};c.prototype.GetSupportVertex=function(a){for(var b=0,e=this.m_vertices[0].x*a.x+this.m_vertices[0].y*a.y,c=1;c<this.m_vertexCount;++c){var f=this.m_vertices[c].x*a.x+this.m_vertices[c].y*a.y;if(f>e){b=c;e=f}}return this.m_vertices[b]};c.prototype.Validate=function(){return false};c.prototype.b2PolygonShape=
function(){this.__super.b2Shape.call(this);this.m_type=h.e_polygonShape;this.m_centroid=new t;this.m_vertices=new Vector;this.m_normals=new Vector};c.prototype.Reserve=function(a){a===void 0&&(a=0);for(var b=parseInt(this.m_vertices.length);b<a;b++){this.m_vertices[b]=new t;this.m_normals[b]=new t}};c.ComputeCentroid=function(a,b){b===void 0&&(b=0);for(var e=new t,c=0,f=1/3,d=0;d<b;++d){var k=a[d],h=d+1<b?a[parseInt(d+1)]:a[0],r=0.5*((k.x-0)*(h.y-0)-(k.y-0)*(h.x-0)),c=c+r;e.x=e.x+r*f*(0+k.x+h.x);
e.y=e.y+r*f*(0+k.y+h.y)}e.x=e.x*(1/c);e.y=e.y*(1/c);return e};c.ComputeOBB=function(a,b,e){e===void 0&&(e=0);for(var c=0,f=new Vector(e+1),c=0;c<e;++c)f[c]=b[c];f[e]=f[0];b=Number.MAX_VALUE;for(c=1;c<=e;++c){for(var d=f[parseInt(c-1)],k=f[c].x-d.x,h=f[c].y-d.y,r=Math.sqrt(k*k+h*h),k=k/r,h=h/r,q=-h,l=k,s=r=Number.MAX_VALUE,m=-Number.MAX_VALUE,p=-Number.MAX_VALUE,w=0;w<e;++w){var v=f[w].x-d.x,E=f[w].y-d.y,L=k*v+h*E,v=q*v+l*E;L<r&&(r=L);v<s&&(s=v);L>m&&(m=L);v>p&&(p=v)}w=(m-r)*(p-s);if(w<0.95*b){b=w;
a.R.col1.x=k;a.R.col1.y=h;a.R.col2.x=q;a.R.col2.y=l;k=0.5*(r+m);h=0.5*(s+p);q=a.R;a.center.x=d.x+(q.col1.x*k+q.col2.x*h);a.center.y=d.y+(q.col1.y*k+q.col2.y*h);a.extents.x=0.5*(m-r);a.extents.y=0.5*(p-s)}}};myChrome.postDefs.push(function(){myChrome.Collision.Shapes.b2PolygonShape.s_mat=new f});h.b2Shape=function(){};h.prototype.Copy=function(){return null};h.prototype.Set=function(a){this.m_radius=a.m_radius};h.prototype.GetType=function(){return this.m_type};h.prototype.TestPoint=function(){return false};
h.prototype.RayCast=function(){return false};h.prototype.ComputeAABB=function(){};h.prototype.ComputeMass=function(){};h.prototype.ComputeSubmergedArea=function(){return 0};h.TestOverlap=function(a,b,e,c){var f=new s;f.proxyA=new C;f.proxyA.Set(a);f.proxyB=new C;f.proxyB.Set(e);f.transformA=b;f.transformB=c;f.useRadii=true;a=new F;a.count=0;b=new u;q.Distance(b,a,f);return b.distance<10*Number.MIN_VALUE};h.prototype.b2Shape=function(){this.m_type=h.e_unknownShape;this.m_radius=l.b2_linearSlop};myChrome.postDefs.push(function(){myChrome.Collision.Shapes.b2Shape.e_unknownShape=
-1;myChrome.Collision.Shapes.b2Shape.e_circleShape=0;myChrome.Collision.Shapes.b2Shape.e_polygonShape=1;myChrome.Collision.Shapes.b2Shape.e_edgeShape=2;myChrome.Collision.Shapes.b2Shape.e_shapeTypeCount=3;myChrome.Collision.Shapes.b2Shape.e_hitCollide=1;myChrome.Collision.Shapes.b2Shape.e_missCollide=0;myChrome.Collision.Shapes.b2Shape.e_startsInsideCollide=-1})})();
(function(){var l=myChrome.Common.b2Color,d=myChrome.Common.b2Settings,b=myChrome.Common.Math.b2Math;l.b2Color=function(){this._b=this._g=this._r=0};l.prototype.b2Color=function(a,e,c){a===void 0&&(a=0);e===void 0&&(e=0);c===void 0&&(c=0);this._r=myChrome.parseUInt(255*b.Clamp(a,0,1));this._g=myChrome.parseUInt(255*b.Clamp(e,0,1));this._b=myChrome.parseUInt(255*b.Clamp(c,0,1))};l.prototype.Set=function(a,e,c){a===void 0&&(a=0);e===void 0&&(e=0);c===void 0&&(c=0);this._r=myChrome.parseUInt(255*b.Clamp(a,
0,1));this._g=myChrome.parseUInt(255*b.Clamp(e,0,1));this._b=myChrome.parseUInt(255*b.Clamp(c,0,1))};Object.defineProperty(l.prototype,"r",{enumerable:false,configurable:true,set:function(a){a===void 0&&(a=0);this._r=myChrome.parseUInt(255*b.Clamp(a,0,1))}});Object.defineProperty(l.prototype,"g",{enumerable:false,configurable:true,set:function(a){a===void 0&&(a=0);this._g=myChrome.parseUInt(255*b.Clamp(a,0,1))}});Object.defineProperty(l.prototype,"b",{enumerable:false,configurable:true,set:function(a){a===
void 0&&(a=0);this._b=myChrome.parseUInt(255*b.Clamp(a,0,1))}});Object.defineProperty(l.prototype,"color",{enumerable:false,configurable:true,get:function(){return this._r<<16|this._g<<8|this._b}});d.b2Settings=function(){};d.b2MixFriction=function(a,b){a===void 0&&(a=0);b===void 0&&(b=0);return Math.sqrt(a*b)};d.b2MixRestitution=function(a,b){a===void 0&&(a=0);b===void 0&&(b=0);return a>b?a:b};d.b2Assert=function(a){if(!a)throw"Assertion Failed";};myChrome.postDefs.push(function(){myChrome.Common.b2Settings.VERSION=
"2.1alpha";myChrome.Common.b2Settings.USHRT_MAX=65535;myChrome.Common.b2Settings.b2_pi=Math.PI;myChrome.Common.b2Settings.b2_maxManifoldPoints=2;myChrome.Common.b2Settings.b2_aabbExtension=0.1;myChrome.Common.b2Settings.b2_aabbMultiplier=2;myChrome.Common.b2Settings.b2_polygonRadius=2*d.b2_linearSlop;myChrome.Common.b2Settings.b2_linearSlop=0.005;myChrome.Common.b2Settings.b2_angularSlop=2/180*d.b2_pi;myChrome.Common.b2Settings.b2_toiSlop=8*d.b2_linearSlop;myChrome.Common.b2Settings.b2_maxTOIContactsPerIsland=
32;myChrome.Common.b2Settings.b2_maxTOIJointsPerIsland=32;myChrome.Common.b2Settings.b2_velocityThreshold=1;myChrome.Common.b2Settings.b2_maxLinearCorrection=0.2;myChrome.Common.b2Settings.b2_maxAngularCorrection=8/180*d.b2_pi;myChrome.Common.b2Settings.b2_maxTranslation=2;myChrome.Common.b2Settings.b2_maxTranslationSquared=d.b2_maxTranslation*d.b2_maxTranslation;myChrome.Common.b2Settings.b2_maxRotation=0.5*d.b2_pi;myChrome.Common.b2Settings.b2_maxRotationSquared=d.b2_maxRotation*d.b2_maxRotation;
myChrome.Common.b2Settings.b2_contactBaumgarte=0.2;myChrome.Common.b2Settings.b2_timeToSleep=0.5;myChrome.Common.b2Settings.b2_linearSleepTolerance=0.01;myChrome.Common.b2Settings.b2_angularSleepTolerance=2/180*d.b2_pi})})();
(function(){var l=myChrome.Common.Math.b2Mat22,d=myChrome.Common.Math.b2Mat33,b=myChrome.Common.Math.b2Math,a=myChrome.Common.Math.b2Sweep,e=myChrome.Common.Math.b2Transform,c=myChrome.Common.Math.b2Vec2,h=myChrome.Common.Math.b2Vec3;l.b2Mat22=function(){this.col1=new c;this.col2=new c};l.prototype.b2Mat22=function(){this.SetIdentity()};l.FromAngle=function(a){a===void 0&&(a=0);var b=new l;b.Set(a);return b};l.FromVV=function(a,b){var e=new l;e.SetVV(a,b);return e};l.prototype.Set=function(a){a===
void 0&&(a=0);var b=Math.cos(a),a=Math.sin(a);this.col1.x=b;this.col2.x=-a;this.col1.y=a;this.col2.y=b};l.prototype.SetVV=function(a,b){this.col1.SetV(a);this.col2.SetV(b)};l.prototype.Copy=function(){var a=new l;a.SetM(this);return a};l.prototype.SetM=function(a){this.col1.SetV(a.col1);this.col2.SetV(a.col2)};l.prototype.AddM=function(a){this.col1.x=this.col1.x+a.col1.x;this.col1.y=this.col1.y+a.col1.y;this.col2.x=this.col2.x+a.col2.x;this.col2.y=this.col2.y+a.col2.y};l.prototype.SetIdentity=function(){this.col1.x=
1;this.col2.x=0;this.col1.y=0;this.col2.y=1};l.prototype.SetZero=function(){this.col1.x=0;this.col2.x=0;this.col1.y=0;this.col2.y=0};l.prototype.GetAngle=function(){return Math.atan2(this.col1.y,this.col1.x)};l.prototype.GetInverse=function(a){var b=this.col1.x,e=this.col2.x,c=this.col1.y,d=this.col2.y,h=b*d-e*c;h!=0&&(h=1/h);a.col1.x=h*d;a.col2.x=-h*e;a.col1.y=-h*c;a.col2.y=h*b;return a};l.prototype.Solve=function(a,b,e){b===void 0&&(b=0);e===void 0&&(e=0);var c=this.col1.x,d=this.col2.x,h=this.col1.y,
l=this.col2.y,C=c*l-d*h;C!=0&&(C=1/C);a.x=C*(l*b-d*e);a.y=C*(c*e-h*b);return a};l.prototype.Abs=function(){this.col1.Abs();this.col2.Abs()};d.b2Mat33=function(){this.col1=new h;this.col2=new h;this.col3=new h};d.prototype.b2Mat33=function(a,b,e){a===void 0&&(a=null);b===void 0&&(b=null);e===void 0&&(e=null);if(!a&&!b&&!e){this.col1.SetZero();this.col2.SetZero();this.col3.SetZero()}else{this.col1.SetV(a);this.col2.SetV(b);this.col3.SetV(e)}};d.prototype.SetVVV=function(a,b,e){this.col1.SetV(a);this.col2.SetV(b);
this.col3.SetV(e)};d.prototype.Copy=function(){return new d(this.col1,this.col2,this.col3)};d.prototype.SetM=function(a){this.col1.SetV(a.col1);this.col2.SetV(a.col2);this.col3.SetV(a.col3)};d.prototype.AddM=function(a){this.col1.x=this.col1.x+a.col1.x;this.col1.y=this.col1.y+a.col1.y;this.col1.z=this.col1.z+a.col1.z;this.col2.x=this.col2.x+a.col2.x;this.col2.y=this.col2.y+a.col2.y;this.col2.z=this.col2.z+a.col2.z;this.col3.x=this.col3.x+a.col3.x;this.col3.y=this.col3.y+a.col3.y;this.col3.z=this.col3.z+
a.col3.z};d.prototype.SetIdentity=function(){this.col1.x=1;this.col2.x=0;this.col3.x=0;this.col1.y=0;this.col2.y=1;this.col3.y=0;this.col1.z=0;this.col2.z=0;this.col3.z=1};d.prototype.SetZero=function(){this.col1.x=0;this.col2.x=0;this.col3.x=0;this.col1.y=0;this.col2.y=0;this.col3.y=0;this.col1.z=0;this.col2.z=0;this.col3.z=0};d.prototype.Solve22=function(a,b,e){b===void 0&&(b=0);e===void 0&&(e=0);var c=this.col1.x,d=this.col2.x,h=this.col1.y,l=this.col2.y,C=c*l-d*h;C!=0&&(C=1/C);a.x=C*(l*b-d*e);
a.y=C*(c*e-h*b);return a};d.prototype.Solve33=function(a,b,e,c){b===void 0&&(b=0);e===void 0&&(e=0);c===void 0&&(c=0);var d=this.col1.x,h=this.col1.y,l=this.col1.z,C=this.col2.x,F=this.col2.y,o=this.col2.z,G=this.col3.x,z=this.col3.y,J=this.col3.z,H=d*(F*J-o*z)+h*(o*G-C*J)+l*(C*z-F*G);H!=0&&(H=1/H);a.x=H*(b*(F*J-o*z)+e*(o*G-C*J)+c*(C*z-F*G));a.y=H*(d*(e*J-c*z)+h*(c*G-b*J)+l*(b*z-e*G));a.z=H*(d*(F*c-o*e)+h*(o*b-C*c)+l*(C*e-F*b));return a};b.b2Math=function(){};b.IsValid=function(a){a===void 0&&(a=
0);return isFinite(a)};b.Dot=function(a,b){return a.x*b.x+a.y*b.y};b.CrossVV=function(a,b){return a.x*b.y-a.y*b.x};b.CrossVF=function(a,b){b===void 0&&(b=0);return new c(b*a.y,-b*a.x)};b.CrossFV=function(a,b){a===void 0&&(a=0);return new c(-a*b.y,a*b.x)};b.MulMV=function(a,b){return new c(a.col1.x*b.x+a.col2.x*b.y,a.col1.y*b.x+a.col2.y*b.y)};b.MulTMV=function(a,e){return new c(b.Dot(e,a.col1),b.Dot(e,a.col2))};b.MulX=function(a,e){var c=b.MulMV(a.R,e);c.x=c.x+a.position.x;c.y=c.y+a.position.y;return c};
b.MulXT=function(a,e){var c=b.SubtractVV(e,a.position),d=c.x*a.R.col1.x+c.y*a.R.col1.y;c.y=c.x*a.R.col2.x+c.y*a.R.col2.y;c.x=d;return c};b.AddVV=function(a,b){return new c(a.x+b.x,a.y+b.y)};b.SubtractVV=function(a,b){return new c(a.x-b.x,a.y-b.y)};b.Distance=function(a,b){var e=a.x-b.x,c=a.y-b.y;return Math.sqrt(e*e+c*c)};b.DistanceSquared=function(a,b){var e=a.x-b.x,c=a.y-b.y;return e*e+c*c};b.MulFV=function(a,b){a===void 0&&(a=0);return new c(a*b.x,a*b.y)};b.AddMM=function(a,e){return l.FromVV(b.AddVV(a.col1,
e.col1),b.AddVV(a.col2,e.col2))};b.MulMM=function(a,e){return l.FromVV(b.MulMV(a,e.col1),b.MulMV(a,e.col2))};b.MulTMM=function(a,e){var d=new c(b.Dot(a.col1,e.col1),b.Dot(a.col2,e.col1)),h=new c(b.Dot(a.col1,e.col2),b.Dot(a.col2,e.col2));return l.FromVV(d,h)};b.Abs=function(a){a===void 0&&(a=0);return a>0?a:-a};b.AbsV=function(a){return new c(b.Abs(a.x),b.Abs(a.y))};b.AbsM=function(a){return l.FromVV(b.AbsV(a.col1),b.AbsV(a.col2))};b.Min=function(a,b){a===void 0&&(a=0);b===void 0&&(b=0);return a<
b?a:b};b.MinV=function(a,e){return new c(b.Min(a.x,e.x),b.Min(a.y,e.y))};b.Max=function(a,b){a===void 0&&(a=0);b===void 0&&(b=0);return a>b?a:b};b.MaxV=function(a,e){return new c(b.Max(a.x,e.x),b.Max(a.y,e.y))};b.Clamp=function(a,b,e){a===void 0&&(a=0);b===void 0&&(b=0);e===void 0&&(e=0);return a<b?b:a>e?e:a};b.ClampV=function(a,e,c){return b.MaxV(e,b.MinV(a,c))};b.Swap=function(a,b){var e=a[0];a[0]=b[0];b[0]=e};b.Random=function(){return Math.random()*2-1};b.RandomRange=function(a,b){a===void 0&&
(a=0);b===void 0&&(b=0);var e=Math.random();return(b-a)*e+a};b.NextPowerOfTwo=function(a){a===void 0&&(a=0);a=a|a>>1&2147483647;a=a|a>>2&1073741823;a=a|a>>4&268435455;a=a|a>>8&16777215;return(a|a>>16&65535)+1};b.IsPowerOfTwo=function(a){a===void 0&&(a=0);return a>0&&(a&a-1)==0};myChrome.postDefs.push(function(){myChrome.Common.Math.b2Math.b2Vec2_zero=new c(0,0);myChrome.Common.Math.b2Math.b2Mat22_identity=l.FromVV(new c(1,0),new c(0,1));myChrome.Common.Math.b2Math.b2Transform_identity=new e(b.b2Vec2_zero,
b.b2Mat22_identity)});a.b2Sweep=function(){this.localCenter=new c;this.c0=new c;this.c=new c};a.prototype.Set=function(a){this.localCenter.SetV(a.localCenter);this.c0.SetV(a.c0);this.c.SetV(a.c);this.a0=a.a0;this.a=a.a;this.t0=a.t0};a.prototype.Copy=function(){var b=new a;b.localCenter.SetV(this.localCenter);b.c0.SetV(this.c0);b.c.SetV(this.c);b.a0=this.a0;b.a=this.a;b.t0=this.t0;return b};a.prototype.GetTransform=function(a,b){b===void 0&&(b=0);a.position.x=(1-b)*this.c0.x+b*this.c.x;a.position.y=
(1-b)*this.c0.y+b*this.c.y;a.R.Set((1-b)*this.a0+b*this.a);var e=a.R;a.position.x=a.position.x-(e.col1.x*this.localCenter.x+e.col2.x*this.localCenter.y);a.position.y=a.position.y-(e.col1.y*this.localCenter.x+e.col2.y*this.localCenter.y)};a.prototype.Advance=function(a){a===void 0&&(a=0);if(this.t0<a&&1-this.t0>Number.MIN_VALUE){var b=(a-this.t0)/(1-this.t0);this.c0.x=(1-b)*this.c0.x+b*this.c.x;this.c0.y=(1-b)*this.c0.y+b*this.c.y;this.a0=(1-b)*this.a0+b*this.a;this.t0=a}};e.b2Transform=function(){this.position=
new c;this.R=new l};e.prototype.b2Transform=function(a,b){a===void 0&&(a=null);b===void 0&&(b=null);if(a){this.position.SetV(a);this.R.SetM(b)}};e.prototype.Initialize=function(a,b){this.position.SetV(a);this.R.SetM(b)};e.prototype.SetIdentity=function(){this.position.SetZero();this.R.SetIdentity()};e.prototype.Set=function(a){this.position.SetV(a.position);this.R.SetM(a.R)};e.prototype.GetAngle=function(){return Math.atan2(this.R.col1.y,this.R.col1.x)};c.b2Vec2=function(){};c.prototype.b2Vec2=function(a,
b){a===void 0&&(a=0);b===void 0&&(b=0);this.x=a;this.y=b};c.prototype.SetZero=function(){this.y=this.x=0};c.prototype.Set=function(a,b){a===void 0&&(a=0);b===void 0&&(b=0);this.x=a;this.y=b};c.prototype.SetV=function(a){this.x=a.x;this.y=a.y};c.prototype.GetNegative=function(){return new c(-this.x,-this.y)};c.prototype.NegativeSelf=function(){this.x=-this.x;this.y=-this.y};c.Make=function(a,b){a===void 0&&(a=0);b===void 0&&(b=0);return new c(a,b)};c.prototype.Copy=function(){return new c(this.x,this.y)};
c.prototype.Add=function(a){this.x=this.x+a.x;this.y=this.y+a.y};c.prototype.Subtract=function(a){this.x=this.x-a.x;this.y=this.y-a.y};c.prototype.Multiply=function(a){a===void 0&&(a=0);this.x=this.x*a;this.y=this.y*a};c.prototype.MulM=function(a){var b=this.x;this.x=a.col1.x*b+a.col2.x*this.y;this.y=a.col1.y*b+a.col2.y*this.y};c.prototype.MulTM=function(a){var e=b.Dot(this,a.col1);this.y=b.Dot(this,a.col2);this.x=e};c.prototype.CrossVF=function(a){a===void 0&&(a=0);var b=this.x;this.x=a*this.y;this.y=
-a*b};c.prototype.CrossFV=function(a){a===void 0&&(a=0);var b=this.x;this.x=-a*this.y;this.y=a*b};c.prototype.MinV=function(a){this.x=this.x<a.x?this.x:a.x;this.y=this.y<a.y?this.y:a.y};c.prototype.MaxV=function(a){this.x=this.x>a.x?this.x:a.x;this.y=this.y>a.y?this.y:a.y};c.prototype.Abs=function(){if(this.x<0)this.x=-this.x;if(this.y<0)this.y=-this.y};c.prototype.Length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)};c.prototype.LengthSquared=function(){return this.x*this.x+this.y*this.y};
c.prototype.Normalize=function(){var a=Math.sqrt(this.x*this.x+this.y*this.y);if(a<Number.MIN_VALUE)return 0;var b=1/a;this.x=this.x*b;this.y=this.y*b;return a};c.prototype.IsValid=function(){return b.IsValid(this.x)&&b.IsValid(this.y)};h.b2Vec3=function(){};h.prototype.b2Vec3=function(a,b,e){a===void 0&&(a=0);b===void 0&&(b=0);e===void 0&&(e=0);this.x=a;this.y=b;this.z=e};h.prototype.SetZero=function(){this.x=this.y=this.z=0};h.prototype.Set=function(a,b,e){a===void 0&&(a=0);b===void 0&&(b=0);e===
void 0&&(e=0);this.x=a;this.y=b;this.z=e};h.prototype.SetV=function(a){this.x=a.x;this.y=a.y;this.z=a.z};h.prototype.GetNegative=function(){return new h(-this.x,-this.y,-this.z)};h.prototype.NegativeSelf=function(){this.x=-this.x;this.y=-this.y;this.z=-this.z};h.prototype.Copy=function(){return new h(this.x,this.y,this.z)};h.prototype.Add=function(a){this.x=this.x+a.x;this.y=this.y+a.y;this.z=this.z+a.z};h.prototype.Subtract=function(a){this.x=this.x-a.x;this.y=this.y-a.y;this.z=this.z-a.z};h.prototype.Multiply=
function(a){a===void 0&&(a=0);this.x=this.x*a;this.y=this.y*a;this.z=this.z*a}})();
(function(){var l=myChrome.Common.Math.b2Math,d=myChrome.Common.Math.b2Sweep,b=myChrome.Common.Math.b2Transform,a=myChrome.Common.Math.b2Vec2,e=myChrome.Common.b2Color,c=myChrome.Common.b2Settings,h=myChrome.Collision.b2AABB,f=myChrome.Collision.b2ContactPoint,k=myChrome.Collision.b2DynamicTreeBroadPhase,r=myChrome.Collision.b2RayCastInput,t=myChrome.Collision.b2RayCastOutput,q=myChrome.Collision.Shapes.b2CircleShape,s=myChrome.Collision.Shapes.b2EdgeShape,u=myChrome.Collision.Shapes.b2MassData,C=
myChrome.Collision.Shapes.b2PolygonShape,F=myChrome.Collision.Shapes.b2Shape,o=myChrome.Dynamics.b2Body,G=myChrome.Dynamics.b2BodyDef,z=myChrome.Dynamics.b2ContactFilter,J=myChrome.Dynamics.b2ContactImpulse,H=myChrome.Dynamics.b2ContactListener,A=myChrome.Dynamics.b2ContactManager,x=myChrome.Dynamics.b2DebugDraw,M=myChrome.Dynamics.b2DestructionListener,D=myChrome.Dynamics.b2FilterData,I=myChrome.Dynamics.b2Fixture,N=myChrome.Dynamics.b2FixtureDef,K=myChrome.Dynamics.b2Island,m=myChrome.Dynamics.b2TimeStep,
p=myChrome.Dynamics.b2World,w=myChrome.Dynamics.Contacts.b2Contact,v=myChrome.Dynamics.Contacts.b2ContactFactory,E=myChrome.Dynamics.Contacts.b2ContactSolver,L=myChrome.Dynamics.Joints.b2Joint,B=myChrome.Dynamics.Joints.b2PulleyJoint;o.b2Body=function(){this.m_xf=new b;this.m_sweep=new d;this.m_linearVelocity=new a;this.m_force=new a};o.prototype.connectEdges=function(a,b,e){e===void 0&&(e=0);var m=Math.atan2(b.GetDirectionVector().y,b.GetDirectionVector().x),e=l.MulFV(Math.tan((m-e)*0.5),b.GetDirectionVector()),
e=l.SubtractVV(e,b.GetNormalVector()),e=l.MulFV(c.b2_toiSlop,e),e=l.AddVV(e,b.GetVertex1()),d=l.AddVV(a.GetDirectionVector(),b.GetDirectionVector());d.Normalize();var p=l.Dot(a.GetDirectionVector(),b.GetNormalVector())>0;a.SetNextEdge(b,e,d,p);b.SetPrevEdge(a,e,d,p);return m};o.prototype.CreateFixture=function(a){if(this.m_world.IsLocked()==true)return null;var b=new I;b.Create(this,this.m_xf,a);this.m_flags&o.e_activeFlag&&b.CreateProxy(this.m_world.m_contactManager.m_broadPhase,this.m_xf);b.m_next=
this.m_fixtureList;this.m_fixtureList=b;++this.m_fixtureCount;b.m_body=this;b.m_density>0&&this.ResetMassData();this.m_world.m_flags=this.m_world.m_flags|p.e_newFixture;return b};o.prototype.CreateFixture2=function(a,b){b===void 0&&(b=0);var e=new N;e.shape=a;e.density=b;return this.CreateFixture(e)};o.prototype.DestroyFixture=function(a){if(this.m_world.IsLocked()!=true){for(var b=this.m_fixtureList,e=null;b!=null;){if(b==a){e?e.m_next=a.m_next:this.m_fixtureList=a.m_next;break}e=b;b=b.m_next}for(b=
this.m_contactList;b;){var e=b.contact,b=b.next,c=e.GetFixtureA(),m=e.GetFixtureB();(a==c||a==m)&&this.m_world.m_contactManager.Destroy(e)}this.m_flags&o.e_activeFlag&&a.DestroyProxy(this.m_world.m_contactManager.m_broadPhase);a.Destroy();a.m_body=null;a.m_next=null;--this.m_fixtureCount;this.ResetMassData()}};o.prototype.SetPositionAndAngle=function(a,b){b===void 0&&(b=0);var e;if(this.m_world.IsLocked()!=true){this.m_xf.R.Set(b);this.m_xf.position.SetV(a);e=this.m_xf.R;var c=this.m_sweep.localCenter;
this.m_sweep.c.x=e.col1.x*c.x+e.col2.x*c.y;this.m_sweep.c.y=e.col1.y*c.x+e.col2.y*c.y;this.m_sweep.c.x=this.m_sweep.c.x+this.m_xf.position.x;this.m_sweep.c.y=this.m_sweep.c.y+this.m_xf.position.y;this.m_sweep.c0.SetV(this.m_sweep.c);this.m_sweep.a0=this.m_sweep.a=b;c=this.m_world.m_contactManager.m_broadPhase;for(e=this.m_fixtureList;e;e=e.m_next)e.Synchronize(c,this.m_xf,this.m_xf);this.m_world.m_contactManager.FindNewContacts()}};o.prototype.SetTransform=function(a){this.SetPositionAndAngle(a.position,
a.GetAngle())};o.prototype.GetTransform=function(){return this.m_xf};o.prototype.GetPosition=function(){return this.m_xf.position};o.prototype.SetPosition=function(a){this.SetPositionAndAngle(a,this.GetAngle())};o.prototype.GetAngle=function(){return this.m_sweep.a};o.prototype.SetAngle=function(a){a===void 0&&(a=0);this.SetPositionAndAngle(this.GetPosition(),a)};o.prototype.GetWorldCenter=function(){return this.m_sweep.c};o.prototype.GetLocalCenter=function(){return this.m_sweep.localCenter};o.prototype.SetLinearVelocity=
function(a){this.m_type!=o.b2_staticBody&&this.m_linearVelocity.SetV(a)};o.prototype.GetLinearVelocity=function(){return this.m_linearVelocity};o.prototype.SetAngularVelocity=function(a){a===void 0&&(a=0);if(this.m_type!=o.b2_staticBody)this.m_angularVelocity=a};o.prototype.GetAngularVelocity=function(){return this.m_angularVelocity};o.prototype.GetDefinition=function(){var a=new G;a.type=this.GetType();a.allowSleep=(this.m_flags&o.e_allowSleepFlag)==o.e_allowSleepFlag;a.angle=this.GetAngle();a.angularDamping=
this.m_angularDamping;a.angularVelocity=this.m_angularVelocity;a.fixedRotation=(this.m_flags&o.e_fixedRotationFlag)==o.e_fixedRotationFlag;a.bullet=(this.m_flags&o.e_bulletFlag)==o.e_bulletFlag;a.awake=(this.m_flags&o.e_awakeFlag)==o.e_awakeFlag;a.linearDamping=this.m_linearDamping;a.linearVelocity.SetV(this.GetLinearVelocity());a.position=this.GetPosition();a.userData=this.GetUserData();return a};o.prototype.ApplyForce=function(a,b){if(this.m_type==o.b2_dynamicBody){this.IsAwake()==false&&this.SetAwake(true);
this.m_force.x=this.m_force.x+a.x;this.m_force.y=this.m_force.y+a.y;this.m_torque=this.m_torque+((b.x-this.m_sweep.c.x)*a.y-(b.y-this.m_sweep.c.y)*a.x)}};o.prototype.ApplyTorque=function(a){a===void 0&&(a=0);if(this.m_type==o.b2_dynamicBody){this.IsAwake()==false&&this.SetAwake(true);this.m_torque=this.m_torque+a}};o.prototype.ApplyImpulse=function(a,b){if(this.m_type==o.b2_dynamicBody){this.IsAwake()==false&&this.SetAwake(true);this.m_linearVelocity.x=this.m_linearVelocity.x+this.m_invMass*a.x;this.m_linearVelocity.y=
this.m_linearVelocity.y+this.m_invMass*a.y;this.m_angularVelocity=this.m_angularVelocity+this.m_invI*((b.x-this.m_sweep.c.x)*a.y-(b.y-this.m_sweep.c.y)*a.x)}};o.prototype.Split=function(a){for(var b=this.GetLinearVelocity().Copy(),e=this.GetAngularVelocity(),c=this.GetWorldCenter(),m=this.m_world.CreateBody(this.GetDefinition()),d,p=this.m_fixtureList;p;)if(a(p)){var v=p.m_next;d?d.m_next=v:this.m_fixtureList=v;this.m_fixtureCount--;p.m_next=m.m_fixtureList;m.m_fixtureList=p;m.m_fixtureCount++;p.m_body=
m;p=v}else{d=p;p=p.m_next}this.ResetMassData();m.ResetMassData();d=this.GetWorldCenter();a=m.GetWorldCenter();d=l.AddVV(b,l.CrossFV(e,l.SubtractVV(d,c)));b=l.AddVV(b,l.CrossFV(e,l.SubtractVV(a,c)));this.SetLinearVelocity(d);m.SetLinearVelocity(b);this.SetAngularVelocity(e);m.SetAngularVelocity(e);this.SynchronizeFixtures();m.SynchronizeFixtures();return m};o.prototype.Merge=function(a){var b;for(b=a.m_fixtureList;b;){var e=b.m_next;a.m_fixtureCount--;b.m_next=this.m_fixtureList;this.m_fixtureList=
b;this.m_fixtureCount++;b.m_body=m;b=e}c.m_fixtureCount=0;var c=this,m=a;c.GetWorldCenter();m.GetWorldCenter();c.GetLinearVelocity().Copy();m.GetLinearVelocity().Copy();c.GetAngularVelocity();m.GetAngularVelocity();c.ResetMassData();this.SynchronizeFixtures()};o.prototype.GetMass=function(){return this.m_mass};o.prototype.GetInertia=function(){return this.m_I};o.prototype.GetMassData=function(a){a.mass=this.m_mass;a.I=this.m_I;a.center.SetV(this.m_sweep.localCenter)};o.prototype.SetMassData=function(a){c.b2Assert(this.m_world.IsLocked()==
false);if(this.m_world.IsLocked()!=true&&this.m_type==o.b2_dynamicBody){this.m_invI=this.m_I=this.m_invMass=0;this.m_mass=a.mass;if(this.m_mass<=0)this.m_mass=1;this.m_invMass=1/this.m_mass;if(a.I>0&&(this.m_flags&o.e_fixedRotationFlag)==0){this.m_I=a.I-this.m_mass*(a.center.x*a.center.x+a.center.y*a.center.y);this.m_invI=1/this.m_I}var b=this.m_sweep.c.Copy();this.m_sweep.localCenter.SetV(a.center);this.m_sweep.c0.SetV(l.MulX(this.m_xf,this.m_sweep.localCenter));this.m_sweep.c.SetV(this.m_sweep.c0);
this.m_linearVelocity.x=this.m_linearVelocity.x+this.m_angularVelocity*-(this.m_sweep.c.y-b.y);this.m_linearVelocity.y=this.m_linearVelocity.y+this.m_angularVelocity*+(this.m_sweep.c.x-b.x)}};o.prototype.ResetMassData=function(){this.m_invI=this.m_I=this.m_invMass=this.m_mass=0;this.m_sweep.localCenter.SetZero();if(!(this.m_type==o.b2_staticBody||this.m_type==o.b2_kinematicBody)){for(var g=a.Make(0,0),b=this.m_fixtureList;b;b=b.m_next)if(b.m_density!=0){var e=b.GetMassData();this.m_mass=this.m_mass+
e.mass;g.x=g.x+e.center.x*e.mass;g.y=g.y+e.center.y*e.mass;this.m_I=this.m_I+e.I}if(this.m_mass>0){this.m_invMass=1/this.m_mass;g.x=g.x*this.m_invMass;g.y=g.y*this.m_invMass}else this.m_invMass=this.m_mass=1;if(this.m_I>0&&(this.m_flags&o.e_fixedRotationFlag)==0){this.m_I=this.m_I-this.m_mass*(g.x*g.x+g.y*g.y);this.m_I=this.m_I*this.m_inertiaScale;c.b2Assert(this.m_I>0);this.m_invI=1/this.m_I}else this.m_invI=this.m_I=0;b=this.m_sweep.c.Copy();this.m_sweep.localCenter.SetV(g);this.m_sweep.c0.SetV(l.MulX(this.m_xf,
this.m_sweep.localCenter));this.m_sweep.c.SetV(this.m_sweep.c0);this.m_linearVelocity.x=this.m_linearVelocity.x+this.m_angularVelocity*-(this.m_sweep.c.y-b.y);this.m_linearVelocity.y=this.m_linearVelocity.y+this.m_angularVelocity*+(this.m_sweep.c.x-b.x)}};o.prototype.GetWorldPoint=function(b){var e=this.m_xf.R,b=new a(e.col1.x*b.x+e.col2.x*b.y,e.col1.y*b.x+e.col2.y*b.y);b.x=b.x+this.m_xf.position.x;b.y=b.y+this.m_xf.position.y;return b};o.prototype.GetWorldVector=function(a){return l.MulMV(this.m_xf.R,
a)};o.prototype.GetLocalPoint=function(a){return l.MulXT(this.m_xf,a)};o.prototype.GetLocalVector=function(a){return l.MulTMV(this.m_xf.R,a)};o.prototype.GetLinearVelocityFromWorldPoint=function(b){return new a(this.m_linearVelocity.x-this.m_angularVelocity*(b.y-this.m_sweep.c.y),this.m_linearVelocity.y+this.m_angularVelocity*(b.x-this.m_sweep.c.x))};o.prototype.GetLinearVelocityFromLocalPoint=function(b){var e=this.m_xf.R,b=new a(e.col1.x*b.x+e.col2.x*b.y,e.col1.y*b.x+e.col2.y*b.y);b.x=b.x+this.m_xf.position.x;
b.y=b.y+this.m_xf.position.y;return new a(this.m_linearVelocity.x-this.m_angularVelocity*(b.y-this.m_sweep.c.y),this.m_linearVelocity.y+this.m_angularVelocity*(b.x-this.m_sweep.c.x))};o.prototype.GetLinearDamping=function(){return this.m_linearDamping};o.prototype.SetLinearDamping=function(a){a===void 0&&(a=0);this.m_linearDamping=a};o.prototype.GetAngularDamping=function(){return this.m_angularDamping};o.prototype.SetAngularDamping=function(a){a===void 0&&(a=0);this.m_angularDamping=a};o.prototype.SetType=
function(a){a===void 0&&(a=0);if(this.m_type!=a){this.m_type=a;this.ResetMassData();if(this.m_type==o.b2_staticBody){this.m_linearVelocity.SetZero();this.m_angularVelocity=0}this.SetAwake(true);this.m_force.SetZero();this.m_torque=0;for(a=this.m_contactList;a;a=a.next)a.contact.FlagForFiltering()}};o.prototype.GetType=function(){return this.m_type};o.prototype.SetBullet=function(a){this.m_flags=a?this.m_flags|o.e_bulletFlag:this.m_flags&~o.e_bulletFlag};o.prototype.IsBullet=function(){return(this.m_flags&
o.e_bulletFlag)==o.e_bulletFlag};o.prototype.SetSleepingAllowed=function(a){if(a)this.m_flags=this.m_flags|o.e_allowSleepFlag;else{this.m_flags=this.m_flags&~o.e_allowSleepFlag;this.SetAwake(true)}};o.prototype.SetAwake=function(a){if(a){this.m_flags=this.m_flags|o.e_awakeFlag;this.m_sleepTime=0}else{this.m_flags=this.m_flags&~o.e_awakeFlag;this.m_sleepTime=0;this.m_linearVelocity.SetZero();this.m_angularVelocity=0;this.m_force.SetZero();this.m_torque=0}};o.prototype.IsAwake=function(){return(this.m_flags&
o.e_awakeFlag)==o.e_awakeFlag};o.prototype.SetFixedRotation=function(a){this.m_flags=a?this.m_flags|o.e_fixedRotationFlag:this.m_flags&~o.e_fixedRotationFlag;this.ResetMassData()};o.prototype.IsFixedRotation=function(){return(this.m_flags&o.e_fixedRotationFlag)==o.e_fixedRotationFlag};o.prototype.SetActive=function(a){if(a!=this.IsActive()){var b;if(a){this.m_flags=this.m_flags|o.e_activeFlag;a=this.m_world.m_contactManager.m_broadPhase;for(b=this.m_fixtureList;b;b=b.m_next)b.CreateProxy(a,this.m_xf)}else{this.m_flags=
this.m_flags&~o.e_activeFlag;a=this.m_world.m_contactManager.m_broadPhase;for(b=this.m_fixtureList;b;b=b.m_next)b.DestroyProxy(a);for(a=this.m_contactList;a;){b=a;a=a.next;this.m_world.m_contactManager.Destroy(b.contact)}this.m_contactList=null}}};o.prototype.IsActive=function(){return(this.m_flags&o.e_activeFlag)==o.e_activeFlag};o.prototype.IsSleepingAllowed=function(){return(this.m_flags&o.e_allowSleepFlag)==o.e_allowSleepFlag};o.prototype.GetFixtureList=function(){return this.m_fixtureList};o.prototype.GetJointList=
function(){return this.m_jointList};o.prototype.GetControllerList=function(){return this.m_controllerList};o.prototype.GetContactList=function(){return this.m_contactList};o.prototype.GetNext=function(){return this.m_next};o.prototype.GetUserData=function(){return this.m_userData};o.prototype.SetUserData=function(a){this.m_userData=a};o.prototype.GetWorld=function(){return this.m_world};o.prototype.b2Body=function(a,b){this.m_flags=0;if(a.bullet)this.m_flags=this.m_flags|o.e_bulletFlag;if(a.fixedRotation)this.m_flags=
this.m_flags|o.e_fixedRotationFlag;if(a.allowSleep)this.m_flags=this.m_flags|o.e_allowSleepFlag;if(a.awake)this.m_flags=this.m_flags|o.e_awakeFlag;if(a.active)this.m_flags=this.m_flags|o.e_activeFlag;this.m_world=b;this.m_xf.position.SetV(a.position);this.m_xf.R.Set(a.angle);this.m_sweep.localCenter.SetZero();this.m_sweep.t0=1;this.m_sweep.a0=this.m_sweep.a=a.angle;var e=this.m_xf.R,c=this.m_sweep.localCenter;this.m_sweep.c.x=e.col1.x*c.x+e.col2.x*c.y;this.m_sweep.c.y=e.col1.y*c.x+e.col2.y*c.y;this.m_sweep.c.x=
this.m_sweep.c.x+this.m_xf.position.x;this.m_sweep.c.y=this.m_sweep.c.y+this.m_xf.position.y;this.m_sweep.c0.SetV(this.m_sweep.c);this.m_contactList=this.m_controllerList=this.m_jointList=null;this.m_controllerCount=0;this.m_next=this.m_prev=null;this.m_linearVelocity.SetV(a.linearVelocity);this.m_angularVelocity=a.angularVelocity;this.m_linearDamping=a.linearDamping;this.m_angularDamping=a.angularDamping;this.m_force.Set(0,0);this.m_sleepTime=this.m_torque=0;this.m_type=a.type;this.m_invMass=this.m_type==
o.b2_dynamicBody?this.m_mass=1:this.m_mass=0;this.m_invI=this.m_I=0;this.m_inertiaScale=a.inertiaScale;this.m_userData=a.userData;this.m_fixtureList=null;this.m_fixtureCount=0};o.prototype.SynchronizeFixtures=function(){var a=o.s_xf1;a.R.Set(this.m_sweep.a0);var b=a.R,e=this.m_sweep.localCenter;a.position.x=this.m_sweep.c0.x-(b.col1.x*e.x+b.col2.x*e.y);a.position.y=this.m_sweep.c0.y-(b.col1.y*e.x+b.col2.y*e.y);e=this.m_world.m_contactManager.m_broadPhase;for(b=this.m_fixtureList;b;b=b.m_next)b.Synchronize(e,
a,this.m_xf)};o.prototype.SynchronizeTransform=function(){this.m_xf.R.Set(this.m_sweep.a);var a=this.m_xf.R,b=this.m_sweep.localCenter;this.m_xf.position.x=this.m_sweep.c.x-(a.col1.x*b.x+a.col2.x*b.y);this.m_xf.position.y=this.m_sweep.c.y-(a.col1.y*b.x+a.col2.y*b.y)};o.prototype.ShouldCollide=function(a){if(this.m_type!=o.b2_dynamicBody&&a.m_type!=o.b2_dynamicBody)return false;for(var b=this.m_jointList;b;b=b.next)if(b.other==a&&b.joint.m_collideConnected==false)return false;return true};o.prototype.Advance=
function(a){a===void 0&&(a=0);this.m_sweep.Advance(a);this.m_sweep.c.SetV(this.m_sweep.c0);this.m_sweep.a=this.m_sweep.a0;this.SynchronizeTransform()};myChrome.postDefs.push(function(){myChrome.Dynamics.b2Body.s_xf1=new b;myChrome.Dynamics.b2Body.e_islandFlag=1;myChrome.Dynamics.b2Body.e_awakeFlag=2;myChrome.Dynamics.b2Body.e_allowSleepFlag=4;myChrome.Dynamics.b2Body.e_bulletFlag=8;myChrome.Dynamics.b2Body.e_fixedRotationFlag=16;myChrome.Dynamics.b2Body.e_activeFlag=32;myChrome.Dynamics.b2Body.b2_staticBody=
0;myChrome.Dynamics.b2Body.b2_kinematicBody=1;myChrome.Dynamics.b2Body.b2_dynamicBody=2});G.b2BodyDef=function(){this.position=new a;this.linearVelocity=new a};G.prototype.b2BodyDef=function(){this.userData=null;this.position.Set(0,0);this.angle=0;this.linearVelocity.Set(0,0);this.angularDamping=this.linearDamping=this.angularVelocity=0;this.awake=this.allowSleep=true;this.bullet=this.fixedRotation=false;this.type=o.b2_staticBody;this.active=true;this.inertiaScale=1};z.b2ContactFilter=function(){};
z.prototype.ShouldCollide=function(a,b){var e=a.GetFilterData(),c=b.GetFilterData();return e.groupIndex==c.groupIndex&&e.groupIndex!=0?e.groupIndex>0:(e.maskBits&c.categoryBits)!=0&&(e.categoryBits&c.maskBits)!=0};z.prototype.RayCollide=function(a,b){return!a?true:this.ShouldCollide(a instanceof I?a:null,b)};myChrome.postDefs.push(function(){myChrome.Dynamics.b2ContactFilter.b2_defaultFilter=new z});J.b2ContactImpulse=function(){this.normalImpulses=new Vector_a2j_Number(c.b2_maxManifoldPoints);this.tangentImpulses=
new Vector_a2j_Number(c.b2_maxManifoldPoints)};H.b2ContactListener=function(){};H.prototype.BeginContact=function(){};H.prototype.EndContact=function(){};H.prototype.PreSolve=function(){};H.prototype.PostSolve=function(){};myChrome.postDefs.push(function(){myChrome.Dynamics.b2ContactListener.b2_defaultListener=new H});A.b2ContactManager=function(){};A.prototype.b2ContactManager=function(){this.m_world=null;this.m_contactCount=0;this.m_contactFilter=z.b2_defaultFilter;this.m_contactListener=H.b2_defaultListener;
this.m_contactFactory=new v(this.m_allocator);this.m_broadPhase=new k};A.prototype.AddPair=function(a,b){var e=a instanceof I?a:null,c=b instanceof I?b:null,m=e.GetBody(),d=c.GetBody();if(m!=d){for(var p=d.GetContactList();p;){if(p.other==m){var v=p.contact.GetFixtureA(),f=p.contact.GetFixtureB();if(v==e&&f==c||v==c&&f==e)return}p=p.next}if(d.ShouldCollide(m)!=false&&this.m_contactFilter.ShouldCollide(e,c)!=false){p=this.m_contactFactory.Create(e,c);e=p.GetFixtureA();c=p.GetFixtureB();m=e.m_body;
d=c.m_body;p.m_prev=null;p.m_next=this.m_world.m_contactList;if(this.m_world.m_contactList!=null)this.m_world.m_contactList.m_prev=p;this.m_world.m_contactList=p;p.m_nodeA.contact=p;p.m_nodeA.other=d;p.m_nodeA.prev=null;p.m_nodeA.next=m.m_contactList;if(m.m_contactList!=null)m.m_contactList.prev=p.m_nodeA;m.m_contactList=p.m_nodeA;p.m_nodeB.contact=p;p.m_nodeB.other=m;p.m_nodeB.prev=null;p.m_nodeB.next=d.m_contactList;if(d.m_contactList!=null)d.m_contactList.prev=p.m_nodeB;d.m_contactList=p.m_nodeB;
++this.m_world.m_contactCount}}};A.prototype.FindNewContacts=function(){this.m_broadPhase.UpdatePairs(myChrome.generateCallback(this,this.AddPair))};A.prototype.Destroy=function(a){var b=a.GetFixtureA(),e=a.GetFixtureB(),b=b.GetBody(),e=e.GetBody();a.IsTouching()&&this.m_contactListener.EndContact(a);if(a.m_prev)a.m_prev.m_next=a.m_next;if(a.m_next)a.m_next.m_prev=a.m_prev;if(a==this.m_world.m_contactList)this.m_world.m_contactList=a.m_next;if(a.m_nodeA.prev)a.m_nodeA.prev.next=a.m_nodeA.next;if(a.m_nodeA.next)a.m_nodeA.next.prev=
a.m_nodeA.prev;if(a.m_nodeA==b.m_contactList)b.m_contactList=a.m_nodeA.next;if(a.m_nodeB.prev)a.m_nodeB.prev.next=a.m_nodeB.next;if(a.m_nodeB.next)a.m_nodeB.next.prev=a.m_nodeB.prev;if(a.m_nodeB==e.m_contactList)e.m_contactList=a.m_nodeB.next;this.m_contactFactory.Destroy(a);--this.m_contactCount};A.prototype.Collide=function(){for(var a=this.m_world.m_contactList;a;){var b=a.GetFixtureA(),e=a.GetFixtureB(),c=b.GetBody(),m=e.GetBody();if(c.IsAwake()==false&&m.IsAwake()==false)a=a.GetNext();else{if(a.m_flags&
w.e_filterFlag){if(m.ShouldCollide(c)==false){b=a;a=b.GetNext();this.Destroy(b);continue}if(this.m_contactFilter.ShouldCollide(b,e)==false){b=a;a=b.GetNext();this.Destroy(b);continue}a.m_flags=a.m_flags&~w.e_filterFlag}if(this.m_broadPhase.TestOverlap(b.m_proxy,e.m_proxy)==false){b=a;a=b.GetNext();this.Destroy(b)}else{a.Update(this.m_contactListener);a=a.GetNext()}}}};myChrome.postDefs.push(function(){myChrome.Dynamics.b2ContactManager.s_evalCP=new f});x.b2DebugDraw=function(){};x.prototype.b2DebugDraw=
function(){};x.prototype.SetFlags=function(){};x.prototype.GetFlags=function(){};x.prototype.AppendFlags=function(){};x.prototype.ClearFlags=function(){};x.prototype.SetSprite=function(){};x.prototype.GetSprite=function(){};x.prototype.SetDrawScale=function(){};x.prototype.GetDrawScale=function(){};x.prototype.SetLineThickness=function(){};x.prototype.GetLineThickness=function(){};x.prototype.SetAlpha=function(){};x.prototype.GetAlpha=function(){};x.prototype.SetFillAlpha=function(){};x.prototype.GetFillAlpha=
function(){};x.prototype.SetXFormScale=function(){};x.prototype.GetXFormScale=function(){};x.prototype.DrawPolygon=function(){};x.prototype.DrawSolidPolygon=function(){};x.prototype.DrawCircle=function(){};x.prototype.DrawSolidCircle=function(){};x.prototype.DrawSegment=function(){};x.prototype.DrawTransform=function(){};myChrome.postDefs.push(function(){myChrome.Dynamics.b2DebugDraw.e_shapeBit=1;myChrome.Dynamics.b2DebugDraw.e_jointBit=2;myChrome.Dynamics.b2DebugDraw.e_aabbBit=4;myChrome.Dynamics.b2DebugDraw.e_pairBit=
8;myChrome.Dynamics.b2DebugDraw.e_centerOfMassBit=16;myChrome.Dynamics.b2DebugDraw.e_controllerBit=32});M.b2DestructionListener=function(){};M.prototype.SayGoodbyeJoint=function(){};M.prototype.SayGoodbyeFixture=function(){};D.b2FilterData=function(){this.categoryBits=1;this.maskBits=65535;this.groupIndex=0};D.prototype.Copy=function(){var a=new D;a.categoryBits=this.categoryBits;a.maskBits=this.maskBits;a.groupIndex=this.groupIndex;return a};I.b2Fixture=function(){this.m_filter=new D};I.prototype.GetType=
function(){return this.m_shape.GetType()};I.prototype.GetShape=function(){return this.m_shape};I.prototype.SetSensor=function(a){if(this.m_isSensor!=a){this.m_isSensor=a;if(this.m_body!=null)for(a=this.m_body.GetContactList();a;){var b=a.contact,e=b.GetFixtureA(),c=b.GetFixtureB();if(e==this||c==this)b.SetSensor(e.IsSensor()||c.IsSensor());a=a.next}}};I.prototype.IsSensor=function(){return this.m_isSensor};I.prototype.SetFilterData=function(a){this.m_filter=a.Copy();if(!this.m_body)for(a=this.m_body.GetContactList();a;){var b=
a.contact,e=b.GetFixtureA(),c=b.GetFixtureB();(e==this||c==this)&&b.FlagForFiltering();a=a.next}};I.prototype.GetFilterData=function(){return this.m_filter.Copy()};I.prototype.GetBody=function(){return this.m_body};I.prototype.GetNext=function(){return this.m_next};I.prototype.GetUserData=function(){return this.m_userData};I.prototype.SetUserData=function(a){this.m_userData=a};I.prototype.TestPoint=function(a){return this.m_shape.TestPoint(this.m_body.GetTransform(),a)};I.prototype.RayCast=function(a,
b){return this.m_shape.RayCast(a,b,this.m_body.GetTransform())};I.prototype.GetMassData=function(a){a===void 0&&(a=null);a==null&&(a=new u);this.m_shape.ComputeMass(a,this.m_density);return a};I.prototype.SetDensity=function(a){a===void 0&&(a=0);this.m_density=a};I.prototype.GetDensity=function(){return this.m_density};I.prototype.GetFriction=function(){return this.m_friction};I.prototype.SetFriction=function(a){a===void 0&&(a=0);this.m_friction=a};I.prototype.GetRestitution=function(){return this.m_restitution};
I.prototype.SetRestitution=function(a){a===void 0&&(a=0);this.m_restitution=a};I.prototype.GetAABB=function(){return this.m_aabb};I.prototype.b2Fixture=function(){this.m_aabb=new h;this.m_shape=this.m_next=this.m_body=this.m_userData=null;this.m_restitution=this.m_friction=this.m_density=0};I.prototype.Create=function(a,b,e){this.m_userData=e.userData;this.m_friction=e.friction;this.m_restitution=e.restitution;this.m_body=a;this.m_next=null;this.m_filter=e.filter.Copy();this.m_isSensor=e.isSensor;
this.m_shape=e.shape.Copy();this.m_density=e.density};I.prototype.Destroy=function(){this.m_shape=null};I.prototype.CreateProxy=function(a,b){this.m_shape.ComputeAABB(this.m_aabb,b);this.m_proxy=a.CreateProxy(this.m_aabb,this)};I.prototype.DestroyProxy=function(a){if(this.m_proxy!=null){a.DestroyProxy(this.m_proxy);this.m_proxy=null}};I.prototype.Synchronize=function(a,b,e){if(this.m_proxy){var c=new h,m=new h;this.m_shape.ComputeAABB(c,b);this.m_shape.ComputeAABB(m,e);this.m_aabb.Combine(c,m);b=
l.SubtractVV(e.position,b.position);a.MoveProxy(this.m_proxy,this.m_aabb,b)}};N.b2FixtureDef=function(){this.filter=new D};N.prototype.b2FixtureDef=function(){this.userData=this.shape=null;this.friction=0.2;this.density=this.restitution=0;this.filter.categoryBits=1;this.filter.maskBits=65535;this.filter.groupIndex=0;this.isSensor=false};K.b2Island=function(){};K.prototype.b2Island=function(){this.m_bodies=new Vector;this.m_contacts=new Vector;this.m_joints=new Vector};K.prototype.Initialize=function(a,
b,e,c,m,d){a===void 0&&(a=0);b===void 0&&(b=0);e===void 0&&(e=0);var p=0;this.m_bodyCapacity=a;this.m_contactCapacity=b;this.m_jointCapacity=e;this.m_jointCount=this.m_contactCount=this.m_bodyCount=0;this.m_allocator=c;this.m_listener=m;this.m_contactSolver=d;for(p=this.m_bodies.length;p<a;p++)this.m_bodies[p]=null;for(p=this.m_contacts.length;p<b;p++)this.m_contacts[p]=null;for(p=this.m_joints.length;p<e;p++)this.m_joints[p]=null};K.prototype.Clear=function(){this.m_jointCount=this.m_contactCount=
this.m_bodyCount=0};K.prototype.Solve=function(a,b,e){for(var m=0,d=0,p,m=0;m<this.m_bodyCount;++m){d=this.m_bodies[m];if(d.GetType()==o.b2_dynamicBody){d.m_linearVelocity.x=d.m_linearVelocity.x+a.dt*(b.x+d.m_invMass*d.m_force.x);d.m_linearVelocity.y=d.m_linearVelocity.y+a.dt*(b.y+d.m_invMass*d.m_force.y);d.m_angularVelocity=d.m_angularVelocity+a.dt*d.m_invI*d.m_torque;d.m_linearVelocity.Multiply(l.Clamp(1-a.dt*d.m_linearDamping,0,1));d.m_angularVelocity=d.m_angularVelocity*l.Clamp(1-a.dt*d.m_angularDamping,
0,1)}}this.m_contactSolver.Initialize(a,this.m_contacts,this.m_contactCount,this.m_allocator);b=this.m_contactSolver;b.InitVelocityConstraints(a);for(m=0;m<this.m_jointCount;++m){p=this.m_joints[m];p.InitVelocityConstraints(a)}for(m=0;m<a.velocityIterations;++m){for(d=0;d<this.m_jointCount;++d){p=this.m_joints[d];p.SolveVelocityConstraints(a)}b.SolveVelocityConstraints()}for(m=0;m<this.m_jointCount;++m){p=this.m_joints[m];p.FinalizeVelocityConstraints()}b.FinalizeVelocityConstraints();for(m=0;m<this.m_bodyCount;++m){d=
this.m_bodies[m];if(d.GetType()!=o.b2_staticBody){var v=a.dt*d.m_linearVelocity.x,f=a.dt*d.m_linearVelocity.y;if(v*v+f*f>c.b2_maxTranslationSquared){d.m_linearVelocity.Normalize();d.m_linearVelocity.x=d.m_linearVelocity.x*c.b2_maxTranslation*a.inv_dt;d.m_linearVelocity.y=d.m_linearVelocity.y*c.b2_maxTranslation*a.inv_dt}v=a.dt*d.m_angularVelocity;if(v*v>c.b2_maxRotationSquared)d.m_angularVelocity=d.m_angularVelocity<0?-c.b2_maxRotation*a.inv_dt:c.b2_maxRotation*a.inv_dt;d.m_sweep.c0.SetV(d.m_sweep.c);
d.m_sweep.a0=d.m_sweep.a;d.m_sweep.c.x=d.m_sweep.c.x+a.dt*d.m_linearVelocity.x;d.m_sweep.c.y=d.m_sweep.c.y+a.dt*d.m_linearVelocity.y;d.m_sweep.a=d.m_sweep.a+a.dt*d.m_angularVelocity;d.SynchronizeTransform()}}for(m=0;m<a.positionIterations;++m){v=b.SolvePositionConstraints(c.b2_contactBaumgarte);f=true;for(d=0;d<this.m_jointCount;++d){p=this.m_joints[d];p=p.SolvePositionConstraints(c.b2_contactBaumgarte);f=f&&p}if(v&&f)break}this.Report(b.m_constraints);if(e){e=Number.MAX_VALUE;b=c.b2_linearSleepTolerance*
c.b2_linearSleepTolerance;v=c.b2_angularSleepTolerance*c.b2_angularSleepTolerance;for(m=0;m<this.m_bodyCount;++m){d=this.m_bodies[m];if(d.GetType()!=o.b2_staticBody){if((d.m_flags&o.e_allowSleepFlag)==0)e=d.m_sleepTime=0;if((d.m_flags&o.e_allowSleepFlag)==0||d.m_angularVelocity*d.m_angularVelocity>v||l.Dot(d.m_linearVelocity,d.m_linearVelocity)>b)e=d.m_sleepTime=0;else{d.m_sleepTime=d.m_sleepTime+a.dt;e=l.Min(e,d.m_sleepTime)}}}if(e>=c.b2_timeToSleep)for(m=0;m<this.m_bodyCount;++m){d=this.m_bodies[m];
d.SetAwake(false)}}};K.prototype.SolveTOI=function(a){var b=0,e=0;this.m_contactSolver.Initialize(a,this.m_contacts,this.m_contactCount,this.m_allocator);for(var m=this.m_contactSolver,b=0;b<this.m_jointCount;++b)this.m_joints[b].InitVelocityConstraints(a);for(b=0;b<a.velocityIterations;++b){m.SolveVelocityConstraints();for(e=0;e<this.m_jointCount;++e)this.m_joints[e].SolveVelocityConstraints(a)}for(b=0;b<this.m_bodyCount;++b){e=this.m_bodies[b];if(e.GetType()!=o.b2_staticBody){var d=a.dt*e.m_linearVelocity.x,
p=a.dt*e.m_linearVelocity.y;if(d*d+p*p>c.b2_maxTranslationSquared){e.m_linearVelocity.Normalize();e.m_linearVelocity.x=e.m_linearVelocity.x*c.b2_maxTranslation*a.inv_dt;e.m_linearVelocity.y=e.m_linearVelocity.y*c.b2_maxTranslation*a.inv_dt}d=a.dt*e.m_angularVelocity;if(d*d>c.b2_maxRotationSquared)e.m_angularVelocity=e.m_angularVelocity<0?-c.b2_maxRotation*a.inv_dt:c.b2_maxRotation*a.inv_dt;e.m_sweep.c0.SetV(e.m_sweep.c);e.m_sweep.a0=e.m_sweep.a;e.m_sweep.c.x=e.m_sweep.c.x+a.dt*e.m_linearVelocity.x;
e.m_sweep.c.y=e.m_sweep.c.y+a.dt*e.m_linearVelocity.y;e.m_sweep.a=e.m_sweep.a+a.dt*e.m_angularVelocity;e.SynchronizeTransform()}}for(b=0;b<a.positionIterations;++b){d=m.SolvePositionConstraints(0.75);p=true;for(e=0;e<this.m_jointCount;++e)var v=this.m_joints[e].SolvePositionConstraints(c.b2_contactBaumgarte),p=p&&v;if(d&&p)break}this.Report(m.m_constraints)};K.prototype.Report=function(a){if(this.m_listener!=null)for(var b=0;b<this.m_contactCount;++b){for(var e=this.m_contacts[b],c=a[b],m=0;m<c.pointCount;++m){K.s_impulse.normalImpulses[m]=
c.points[m].normalImpulse;K.s_impulse.tangentImpulses[m]=c.points[m].tangentImpulse}this.m_listener.PostSolve(e,K.s_impulse)}};K.prototype.AddBody=function(a){a.m_islandIndex=this.m_bodyCount;this.m_bodies[this.m_bodyCount++]=a};K.prototype.AddContact=function(a){this.m_contacts[this.m_contactCount++]=a};K.prototype.AddJoint=function(a){this.m_joints[this.m_jointCount++]=a};myChrome.postDefs.push(function(){myChrome.Dynamics.b2Island.s_impulse=new J});m.b2TimeStep=function(){};m.prototype.Set=function(a){this.dt=
a.dt;this.inv_dt=a.inv_dt;this.positionIterations=a.positionIterations;this.velocityIterations=a.velocityIterations;this.warmStarting=a.warmStarting};p.b2World=function(){this.s_stack=new Vector;this.m_contactManager=new A;this.m_contactSolver=new E;this.m_island=new K};p.prototype.b2World=function(a,b){this.m_controllerList=this.m_jointList=this.m_contactList=this.m_bodyList=this.m_debugDraw=this.m_destructionListener=null;this.m_controllerCount=this.m_jointCount=this.m_contactCount=this.m_bodyCount=
0;p.m_warmStarting=true;p.m_continuousPhysics=true;this.m_allowSleep=b;this.m_gravity=a;this.m_inv_dt0=0;this.m_contactManager.m_world=this;this.m_groundBody=this.CreateBody(new G)};p.prototype.SetDestructionListener=function(a){this.m_destructionListener=a};p.prototype.SetContactFilter=function(a){this.m_contactManager.m_contactFilter=a};p.prototype.SetContactListener=function(a){this.m_contactManager.m_contactListener=a};p.prototype.SetDebugDraw=function(a){this.m_debugDraw=a};p.prototype.SetBroadPhase=
function(a){var b=this.m_contactManager.m_broadPhase;this.m_contactManager.m_broadPhase=a;for(var e=this.m_bodyList;e;e=e.m_next)for(var c=e.m_fixtureList;c;c=c.m_next)c.m_proxy=a.CreateProxy(b.GetFatAABB(c.m_proxy),c)};p.prototype.Validate=function(){this.m_contactManager.m_broadPhase.Validate()};p.prototype.GetProxyCount=function(){return this.m_contactManager.m_broadPhase.GetProxyCount()};p.prototype.CreateBody=function(a){if(this.IsLocked()==true)return null;a=new o(a,this);a.m_prev=null;if(a.m_next=
this.m_bodyList)this.m_bodyList.m_prev=a;this.m_bodyList=a;++this.m_bodyCount;return a};p.prototype.DestroyBody=function(a){if(this.IsLocked()!=true){for(var b=a.m_jointList;b;){var e=b,b=b.next;this.m_destructionListener&&this.m_destructionListener.SayGoodbyeJoint(e.joint);this.DestroyJoint(e.joint)}for(b=a.m_controllerList;b;){e=b;b=b.nextController;e.controller.RemoveBody(a)}for(b=a.m_contactList;b;){e=b;b=b.next;this.m_contactManager.Destroy(e.contact)}a.m_contactList=null;for(b=a.m_fixtureList;b;){e=
b;b=b.m_next;this.m_destructionListener&&this.m_destructionListener.SayGoodbyeFixture(e);e.DestroyProxy(this.m_contactManager.m_broadPhase);e.Destroy()}a.m_fixtureList=null;a.m_fixtureCount=0;if(a.m_prev)a.m_prev.m_next=a.m_next;if(a.m_next)a.m_next.m_prev=a.m_prev;if(a==this.m_bodyList)this.m_bodyList=a.m_next;--this.m_bodyCount}};p.prototype.CreateJoint=function(a){var b=L.Create(a,null);b.m_prev=null;if(b.m_next=this.m_jointList)this.m_jointList.m_prev=b;this.m_jointList=b;++this.m_jointCount;
b.m_edgeA.joint=b;b.m_edgeA.other=b.m_bodyB;b.m_edgeA.prev=null;if(b.m_edgeA.next=b.m_bodyA.m_jointList)b.m_bodyA.m_jointList.prev=b.m_edgeA;b.m_bodyA.m_jointList=b.m_edgeA;b.m_edgeB.joint=b;b.m_edgeB.other=b.m_bodyA;b.m_edgeB.prev=null;if(b.m_edgeB.next=b.m_bodyB.m_jointList)b.m_bodyB.m_jointList.prev=b.m_edgeB;b.m_bodyB.m_jointList=b.m_edgeB;var e=a.bodyA,c=a.bodyB;if(a.collideConnected==false)for(a=c.GetContactList();a;){a.other==e&&a.contact.FlagForFiltering();a=a.next}return b};p.prototype.DestroyJoint=
function(a){var b=a.m_collideConnected;if(a.m_prev)a.m_prev.m_next=a.m_next;if(a.m_next)a.m_next.m_prev=a.m_prev;if(a==this.m_jointList)this.m_jointList=a.m_next;var e=a.m_bodyA,c=a.m_bodyB;e.SetAwake(true);c.SetAwake(true);if(a.m_edgeA.prev)a.m_edgeA.prev.next=a.m_edgeA.next;if(a.m_edgeA.next)a.m_edgeA.next.prev=a.m_edgeA.prev;if(a.m_edgeA==e.m_jointList)e.m_jointList=a.m_edgeA.next;a.m_edgeA.prev=null;a.m_edgeA.next=null;if(a.m_edgeB.prev)a.m_edgeB.prev.next=a.m_edgeB.next;if(a.m_edgeB.next)a.m_edgeB.next.prev=
a.m_edgeB.prev;if(a.m_edgeB==c.m_jointList)c.m_jointList=a.m_edgeB.next;a.m_edgeB.prev=null;a.m_edgeB.next=null;L.Destroy(a,null);--this.m_jointCount;if(b==false)for(a=c.GetContactList();a;){a.other==e&&a.contact.FlagForFiltering();a=a.next}};p.prototype.AddController=function(a){a.m_next=this.m_controllerList;a.m_prev=null;this.m_controllerList=a;a.m_world=this;this.m_controllerCount++;return a};p.prototype.RemoveController=function(a){if(a.m_prev)a.m_prev.m_next=a.m_next;if(a.m_next)a.m_next.m_prev=
a.m_prev;if(this.m_controllerList==a)this.m_controllerList=a.m_next;this.m_controllerCount--};p.prototype.CreateController=function(a){if(a.m_world!=this)throw Error("Controller can only be a member of one world");a.m_next=this.m_controllerList;a.m_prev=null;if(this.m_controllerList)this.m_controllerList.m_prev=a;this.m_controllerList=a;++this.m_controllerCount;a.m_world=this;return a};p.prototype.DestroyController=function(a){a.Clear();if(a.m_next)a.m_next.m_prev=a.m_prev;if(a.m_prev)a.m_prev.m_next=
a.m_next;if(a==this.m_controllerList)this.m_controllerList=a.m_next;--this.m_controllerCount};p.prototype.SetWarmStarting=function(a){p.m_warmStarting=a};p.prototype.SetContinuousPhysics=function(a){p.m_continuousPhysics=a};p.prototype.GetBodyCount=function(){return this.m_bodyCount};p.prototype.GetJointCount=function(){return this.m_jointCount};p.prototype.GetContactCount=function(){return this.m_contactCount};p.prototype.SetGravity=function(a){this.m_gravity=a};p.prototype.GetGravity=function(){return this.m_gravity};
p.prototype.GetGroundBody=function(){return this.m_groundBody};p.prototype.Step=function(a,b,e){a===void 0&&(a=0);b===void 0&&(b=0);e===void 0&&(e=0);if(this.m_flags&p.e_newFixture){this.m_contactManager.FindNewContacts();this.m_flags=this.m_flags&~p.e_newFixture}this.m_flags=this.m_flags|p.e_locked;var c=p.s_timestep2;c.dt=a;c.velocityIterations=b;c.positionIterations=e;c.inv_dt=a>0?1/a:0;c.dtRatio=this.m_inv_dt0*a;c.warmStarting=p.m_warmStarting;this.m_contactManager.Collide();c.dt>0&&this.Solve(c);
p.m_continuousPhysics&&c.dt>0&&this.SolveTOI(c);if(c.dt>0)this.m_inv_dt0=c.inv_dt;this.m_flags=this.m_flags&~p.e_locked};p.prototype.ClearForces=function(){for(var a=this.m_bodyList;a;a=a.m_next){a.m_force.SetZero();a.m_torque=0}};p.prototype.DrawDebugData=function(){if(this.m_debugDraw!=null){this.m_debugDraw.m_sprite.graphics.clear();var b=this.m_debugDraw.GetFlags(),c,m,d;new a;new a;new a;var v;new h;new h;new a;new a;new a;new a;var f=new e(0,0,0);if(b&x.e_shapeBit)for(c=this.m_bodyList;c;c=
c.m_next){v=c.m_xf;for(m=c.GetFixtureList();m;m=m.m_next){d=m.GetShape();c.IsActive()==false?f.Set(0.5,0.5,0.3):c.GetType()==o.b2_staticBody?f.Set(0.5,0.9,0.5):c.GetType()==o.b2_kinematicBody?f.Set(0.5,0.5,0.9):c.IsAwake()==false?f.Set(0.6,0.6,0.6):f.Set(0.9,0.7,0.7);this.DrawShape(d,v,f)}}if(b&x.e_jointBit)for(c=this.m_jointList;c;c=c.m_next)this.DrawJoint(c);if(b&x.e_controllerBit)for(c=this.m_controllerList;c;c=c.m_next)c.Draw(this.m_debugDraw);if(b&x.e_pairBit){f.Set(0.3,0.9,0.9);for(c=this.m_contactManager.m_contactList;c;c=
c.GetNext()){d=c.GetFixtureA();m=c.GetFixtureB();d=d.GetAABB().GetCenter();m=m.GetAABB().GetCenter();this.m_debugDraw.DrawSegment(d,m,f)}}if(b&x.e_aabbBit){d=this.m_contactManager.m_broadPhase;v=[new a,new a,new a,new a];for(c=this.m_bodyList;c;c=c.GetNext())if(c.IsActive()!=false)for(m=c.GetFixtureList();m;m=m.GetNext()){var w=d.GetFatAABB(m.m_proxy);v[0].Set(w.lowerBound.x,w.lowerBound.y);v[1].Set(w.upperBound.x,w.lowerBound.y);v[2].Set(w.upperBound.x,w.upperBound.y);v[3].Set(w.lowerBound.x,w.upperBound.y);
this.m_debugDraw.DrawPolygon(v,4,f)}}if(b&x.e_centerOfMassBit)for(c=this.m_bodyList;c;c=c.m_next){v=p.s_xf;v.R=c.m_xf.R;v.position=c.GetWorldCenter();this.m_debugDraw.DrawTransform(v)}}};p.prototype.QueryAABB=function(a,b){var e=this.m_contactManager.m_broadPhase;e.Query(function(b){return a(e.GetUserData(b))},b)};p.prototype.QueryShape=function(a,e,c){c===void 0&&(c=null);if(c==null){c=new b;c.SetIdentity()}var m=this.m_contactManager.m_broadPhase,d=new h;e.ComputeAABB(d,c);m.Query(function(b){b=
m.GetUserData(b)instanceof I?m.GetUserData(b):null;return F.TestOverlap(e,c,b.GetShape(),b.GetBody().GetTransform())?a(b):true},d)};p.prototype.QueryPoint=function(a,b){var e=this.m_contactManager.m_broadPhase,m=new h;m.lowerBound.Set(b.x-c.b2_linearSlop,b.y-c.b2_linearSlop);m.upperBound.Set(b.x+c.b2_linearSlop,b.y+c.b2_linearSlop);e.Query(function(c){c=e.GetUserData(c)instanceof I?e.GetUserData(c):null;return c.TestPoint(b)?a(c):true},m)};p.prototype.RayCast=function(b,e,c){var m=this.m_contactManager.m_broadPhase,
d=new t,p=new r(e,c);m.RayCast(function(p,v){var f=m.GetUserData(v),f=f instanceof I?f:null;if(f.RayCast(d,p)){var w=d.fraction,B=new a((1-w)*e.x+w*c.x,(1-w)*e.y+w*c.y);return b(f,B,d.normal,w)}return p.maxFraction},p)};p.prototype.RayCastOne=function(a,b){var e;this.RayCast(function(a,b,c,m){m===void 0&&(m=0);e=a;return m},a,b);return e};p.prototype.RayCastAll=function(a,b){var e=new Vector;this.RayCast(function(a){e[e.length]=a;return 1},a,b);return e};p.prototype.GetBodyList=function(){return this.m_bodyList};
p.prototype.GetJointList=function(){return this.m_jointList};p.prototype.GetContactList=function(){return this.m_contactList};p.prototype.IsLocked=function(){return(this.m_flags&p.e_locked)>0};p.prototype.Solve=function(a){for(var b,e=this.m_controllerList;e;e=e.m_next)e.Step(a);e=this.m_island;e.Initialize(this.m_bodyCount,this.m_contactCount,this.m_jointCount,null,this.m_contactManager.m_contactListener,this.m_contactSolver);for(b=this.m_bodyList;b;b=b.m_next)b.m_flags=b.m_flags&~o.e_islandFlag;
for(var c=this.m_contactList;c;c=c.m_next)c.m_flags=c.m_flags&~w.e_islandFlag;for(c=this.m_jointList;c;c=c.m_next)c.m_islandFlag=false;parseInt(this.m_bodyCount);for(var c=this.s_stack,m=this.m_bodyList;m;m=m.m_next)if(!(m.m_flags&o.e_islandFlag)&&!(m.IsAwake()==false||m.IsActive()==false)&&m.GetType()!=o.b2_staticBody){e.Clear();var d=0;c[d++]=m;for(m.m_flags=m.m_flags|o.e_islandFlag;d>0;){b=c[--d];e.AddBody(b);b.IsAwake()==false&&b.SetAwake(true);if(b.GetType()!=o.b2_staticBody){for(var p,v=b.m_contactList;v;v=
v.next)if(!(v.contact.m_flags&w.e_islandFlag)&&!(v.contact.IsSensor()==true||v.contact.IsEnabled()==false||v.contact.IsTouching()==false)){e.AddContact(v.contact);v.contact.m_flags=v.contact.m_flags|w.e_islandFlag;p=v.other;if(!(p.m_flags&o.e_islandFlag)){c[d++]=p;p.m_flags=p.m_flags|o.e_islandFlag}}for(b=b.m_jointList;b;b=b.next)if(b.joint.m_islandFlag!=true){p=b.other;if(p.IsActive()!=false){e.AddJoint(b.joint);b.joint.m_islandFlag=true;if(!(p.m_flags&o.e_islandFlag)){c[d++]=p;p.m_flags=p.m_flags|
o.e_islandFlag}}}}}e.Solve(a,this.m_gravity,this.m_allowSleep);for(d=0;d<e.m_bodyCount;++d){b=e.m_bodies[d];if(b.GetType()==o.b2_staticBody)b.m_flags=b.m_flags&~o.e_islandFlag}}for(d=0;d<c.length;++d){if(!c[d])break;c[d]=null}for(b=this.m_bodyList;b;b=b.m_next)b.IsAwake()==false||b.IsActive()==false||b.GetType()!=o.b2_staticBody&&b.SynchronizeFixtures();this.m_contactManager.FindNewContacts()};p.prototype.SolveTOI=function(a){var b,e,m,d=this.m_island;d.Initialize(this.m_bodyCount,c.b2_maxTOIContactsPerIsland,
c.b2_maxTOIJointsPerIsland,null,this.m_contactManager.m_contactListener,this.m_contactSolver);var v=p.s_queue;for(b=this.m_bodyList;b;b=b.m_next){b.m_flags=b.m_flags&~o.e_islandFlag;b.m_sweep.t0=0}for(m=this.m_contactList;m;m=m.m_next)m.m_flags=m.m_flags&~(w.e_toiFlag|w.e_islandFlag);for(m=this.m_jointList;m;m=m.m_next)m.m_islandFlag=false;for(;;){var f=null,B=1;for(m=this.m_contactList;m;m=m.m_next)if(!(m.IsSensor()==true||m.IsEnabled()==false||m.IsContinuous()==false)){if(m.m_flags&w.e_toiFlag)b=
m.m_toi;else{b=m.m_fixtureA;e=m.m_fixtureB;b=b.m_body;e=e.m_body;if((b.GetType()!=o.b2_dynamicBody||b.IsAwake()==false)&&(e.GetType()!=o.b2_dynamicBody||e.IsAwake()==false))continue;var h=b.m_sweep.t0;if(b.m_sweep.t0<e.m_sweep.t0){h=e.m_sweep.t0;b.m_sweep.Advance(h)}else if(e.m_sweep.t0<b.m_sweep.t0){h=b.m_sweep.t0;e.m_sweep.Advance(h)}b=m.ComputeTOI(b.m_sweep,e.m_sweep);c.b2Assert(0<=b&&b<=1);if(b>0&&b<1){b=(1-b)*h+b;b>1&&(b=1)}m.m_toi=b;m.m_flags=m.m_flags|w.e_toiFlag}if(Number.MIN_VALUE<b&&b<B){f=
m;B=b}}if(f==null||1-100*Number.MIN_VALUE<B)break;b=f.m_fixtureA;e=f.m_fixtureB;b=b.m_body;e=e.m_body;p.s_backupA.Set(b.m_sweep);p.s_backupB.Set(e.m_sweep);b.Advance(B);e.Advance(B);f.Update(this.m_contactManager.m_contactListener);f.m_flags=f.m_flags&~w.e_toiFlag;if(f.IsSensor()==true||f.IsEnabled()==false){b.m_sweep.Set(p.s_backupA);e.m_sweep.Set(p.s_backupB);b.SynchronizeTransform();e.SynchronizeTransform()}else if(f.IsTouching()!=false){b.GetType()!=o.b2_dynamicBody&&(b=e);d.Clear();f=m=0;v[m+
f++]=b;for(b.m_flags=b.m_flags|o.e_islandFlag;f>0;){b=v[m++];--f;d.AddBody(b);b.IsAwake()==false&&b.SetAwake(true);if(b.GetType()==o.b2_dynamicBody){for(e=b.m_contactList;e;e=e.next){if(d.m_contactCount==d.m_contactCapacity)break;if(!(e.contact.m_flags&w.e_islandFlag)&&!(e.contact.IsSensor()==true||e.contact.IsEnabled()==false||e.contact.IsTouching()==false)){d.AddContact(e.contact);e.contact.m_flags=e.contact.m_flags|w.e_islandFlag;h=e.other;if(!(h.m_flags&o.e_islandFlag)){if(h.GetType()!=o.b2_staticBody){h.Advance(B);
h.SetAwake(true)}v[m+f]=h;++f;h.m_flags=h.m_flags|o.e_islandFlag}}}for(b=b.m_jointList;b;b=b.next)if(d.m_jointCount!=d.m_jointCapacity&&b.joint.m_islandFlag!=true){h=b.other;if(h.IsActive()!=false){d.AddJoint(b.joint);b.joint.m_islandFlag=true;if(!(h.m_flags&o.e_islandFlag)){if(h.GetType()!=o.b2_staticBody){h.Advance(B);h.SetAwake(true)}v[m+f]=h;++f;h.m_flags=h.m_flags|o.e_islandFlag}}}}}m=p.s_timestep;m.warmStarting=false;m.dt=(1-B)*a.dt;m.inv_dt=1/m.dt;m.dtRatio=0;m.velocityIterations=a.velocityIterations;
m.positionIterations=a.positionIterations;d.SolveTOI(m);for(B=B=0;B<d.m_bodyCount;++B){b=d.m_bodies[B];b.m_flags=b.m_flags&~o.e_islandFlag;if(b.IsAwake()!=false&&b.GetType()==o.b2_dynamicBody){b.SynchronizeFixtures();for(e=b.m_contactList;e;e=e.next)e.contact.m_flags=e.contact.m_flags&~w.e_toiFlag}}for(B=0;B<d.m_contactCount;++B){m=d.m_contacts[B];m.m_flags=m.m_flags&~(w.e_toiFlag|w.e_islandFlag)}for(B=0;B<d.m_jointCount;++B){m=d.m_joints[B];m.m_islandFlag=false}this.m_contactManager.FindNewContacts()}}};
p.prototype.DrawJoint=function(a){var b=a.GetBodyA(),e=a.GetBodyB(),c=b.m_xf.position,m=e.m_xf.position,d=a.GetAnchorA(),v=a.GetAnchorB(),f=p.s_jointColor;switch(a.m_type){case L.e_distanceJoint:this.m_debugDraw.DrawSegment(d,v,f);break;case L.e_pulleyJoint:b=a instanceof B?a:null;a=b.GetGroundAnchorA();b=b.GetGroundAnchorB();this.m_debugDraw.DrawSegment(a,d,f);this.m_debugDraw.DrawSegment(b,v,f);this.m_debugDraw.DrawSegment(a,b,f);break;case L.e_mouseJoint:this.m_debugDraw.DrawSegment(d,v,f);break;
default:b!=this.m_groundBody&&this.m_debugDraw.DrawSegment(c,d,f);this.m_debugDraw.DrawSegment(d,v,f);e!=this.m_groundBody&&this.m_debugDraw.DrawSegment(m,v,f)}};p.prototype.DrawShape=function(a,b,e){switch(a.m_type){case F.e_circleShape:var c=a instanceof q?a:null;this.m_debugDraw.DrawSolidCircle(l.MulX(b,c.m_p),c.m_radius,b.R.col1,e);break;case F.e_polygonShape:for(var c=a instanceof C?a:null,a=parseInt(c.GetVertexCount()),m=c.GetVertices(),d=new Vector(a),c=0;c<a;++c)d[c]=l.MulX(b,m[c]);this.m_debugDraw.DrawSolidPolygon(d,
a,e);break;case F.e_edgeShape:c=a instanceof s?a:null;this.m_debugDraw.DrawSegment(l.MulX(b,c.GetVertex1()),l.MulX(b,c.GetVertex2()),e)}};myChrome.postDefs.push(function(){myChrome.Dynamics.b2World.s_timestep2=new m;myChrome.Dynamics.b2World.s_xf=new b;myChrome.Dynamics.b2World.s_backupA=new d;myChrome.Dynamics.b2World.s_backupB=new d;myChrome.Dynamics.b2World.s_timestep=new m;myChrome.Dynamics.b2World.s_queue=new Vector;myChrome.Dynamics.b2World.s_jointColor=new e(0.5,0.8,0.8);myChrome.Dynamics.b2World.e_newFixture=
1;myChrome.Dynamics.b2World.e_locked=2})})();
(function(){var l=myChrome.Collision.Shapes.b2CircleShape,d=myChrome.Collision.Shapes.b2EdgeShape,b=myChrome.Collision.Shapes.b2PolygonShape,a=myChrome.Collision.Shapes.b2Shape,e=myChrome.Dynamics.Contacts.b2CircleContact,c=myChrome.Dynamics.Contacts.b2Contact,h=myChrome.Dynamics.Contacts.b2ContactConstraint,f=myChrome.Dynamics.Contacts.b2ContactConstraintPoint,k=myChrome.Dynamics.Contacts.b2ContactEdge,r=myChrome.Dynamics.Contacts.b2ContactFactory,t=myChrome.Dynamics.Contacts.b2ContactRegister,q=
myChrome.Dynamics.Contacts.b2ContactResult,s=myChrome.Dynamics.Contacts.b2ContactSolver,u=myChrome.Dynamics.Contacts.b2EdgeAndCircleContact,C=myChrome.Dynamics.Contacts.b2NullContact,F=myChrome.Dynamics.Contacts.b2PolyAndCircleContact,o=myChrome.Dynamics.Contacts.b2PolyAndEdgeContact,G=myChrome.Dynamics.Contacts.b2PolygonContact,z=myChrome.Dynamics.Contacts.b2PositionSolverManifold,J=myChrome.Dynamics.b2Body,H=myChrome.Dynamics.b2TimeStep,A=myChrome.Common.b2Settings,x=myChrome.Common.Math.b2Mat22,
M=myChrome.Common.Math.b2Math,D=myChrome.Common.Math.b2Vec2,I=myChrome.Collision.b2Collision,N=myChrome.Collision.b2ContactID,K=myChrome.Collision.b2Manifold,m=myChrome.Collision.b2TimeOfImpact,p=myChrome.Collision.b2TOIInput,w=myChrome.Collision.b2WorldManifold;myChrome.inherit(e,myChrome.Dynamics.Contacts.b2Contact);e.prototype.__super=myChrome.Dynamics.Contacts.b2Contact.prototype;e.b2CircleContact=function(){myChrome.Dynamics.Contacts.b2Contact.b2Contact.apply(this,arguments)};e.Create=function(){return new e};
e.Destroy=function(){};e.prototype.Reset=function(a,b){this.__super.Reset.call(this,a,b)};e.prototype.Evaluate=function(){var a=this.m_fixtureA.GetBody(),b=this.m_fixtureB.GetBody();I.CollideCircles(this.m_manifold,this.m_fixtureA.GetShape()instanceof l?this.m_fixtureA.GetShape():null,a.m_xf,this.m_fixtureB.GetShape()instanceof l?this.m_fixtureB.GetShape():null,b.m_xf)};c.b2Contact=function(){this.m_nodeA=new k;this.m_nodeB=new k;this.m_manifold=new K;this.m_oldManifold=new K};c.prototype.GetManifold=
function(){return this.m_manifold};c.prototype.GetWorldManifold=function(a){var b=this.m_fixtureA.GetBody(),e=this.m_fixtureB.GetBody(),c=this.m_fixtureA.GetShape(),m=this.m_fixtureB.GetShape();a.Initialize(this.m_manifold,b.GetTransform(),c.m_radius,e.GetTransform(),m.m_radius)};c.prototype.IsTouching=function(){return(this.m_flags&c.e_touchingFlag)==c.e_touchingFlag};c.prototype.IsContinuous=function(){return(this.m_flags&c.e_continuousFlag)==c.e_continuousFlag};c.prototype.SetSensor=function(a){this.m_flags=
a?this.m_flags|c.e_sensorFlag:this.m_flags&~c.e_sensorFlag};c.prototype.IsSensor=function(){return(this.m_flags&c.e_sensorFlag)==c.e_sensorFlag};c.prototype.SetEnabled=function(a){this.m_flags=a?this.m_flags|c.e_enabledFlag:this.m_flags&~c.e_enabledFlag};c.prototype.IsEnabled=function(){return(this.m_flags&c.e_enabledFlag)==c.e_enabledFlag};c.prototype.GetNext=function(){return this.m_next};c.prototype.GetFixtureA=function(){return this.m_fixtureA};c.prototype.GetFixtureB=function(){return this.m_fixtureB};
c.prototype.FlagForFiltering=function(){this.m_flags=this.m_flags|c.e_filterFlag};c.prototype.b2Contact=function(){};c.prototype.Reset=function(a,b){a===void 0&&(a=null);b===void 0&&(b=null);this.m_flags=c.e_enabledFlag;if(!a||!b)this.m_fixtureB=this.m_fixtureA=null;else{if(a.IsSensor()||b.IsSensor())this.m_flags=this.m_flags|c.e_sensorFlag;var e=a.GetBody(),m=b.GetBody();if(e.GetType()!=J.b2_dynamicBody||e.IsBullet()||m.GetType()!=J.b2_dynamicBody||m.IsBullet())this.m_flags=this.m_flags|c.e_continuousFlag;
this.m_fixtureA=a;this.m_fixtureB=b;this.m_manifold.m_pointCount=0;this.m_next=this.m_prev=null;this.m_nodeA.contact=null;this.m_nodeA.prev=null;this.m_nodeA.next=null;this.m_nodeA.other=null;this.m_nodeB.contact=null;this.m_nodeB.prev=null;this.m_nodeB.next=null;this.m_nodeB.other=null}};c.prototype.Update=function(b){var e=this.m_oldManifold;this.m_oldManifold=this.m_manifold;this.m_manifold=e;this.m_flags=this.m_flags|c.e_enabledFlag;var m=false,e=(this.m_flags&c.e_touchingFlag)==c.e_touchingFlag,
d=this.m_fixtureA.m_body,p=this.m_fixtureB.m_body,j=this.m_fixtureA.m_aabb.TestOverlap(this.m_fixtureB.m_aabb);if(this.m_flags&c.e_sensorFlag){if(j){m=this.m_fixtureA.GetShape();j=this.m_fixtureB.GetShape();d=d.GetTransform();p=p.GetTransform();m=a.TestOverlap(m,d,j,p)}this.m_manifold.m_pointCount=0}else{this.m_flags=d.GetType()!=J.b2_dynamicBody||d.IsBullet()||p.GetType()!=J.b2_dynamicBody||p.IsBullet()?this.m_flags|c.e_continuousFlag:this.m_flags&~c.e_continuousFlag;if(j){this.Evaluate();m=this.m_manifold.m_pointCount>
0;for(j=0;j<this.m_manifold.m_pointCount;++j){var f=this.m_manifold.m_points[j];f.m_normalImpulse=0;f.m_tangentImpulse=0;for(var w=f.m_id,h=0;h<this.m_oldManifold.m_pointCount;++h){var k=this.m_oldManifold.m_points[h];if(k.m_id.key==w.key){f.m_normalImpulse=k.m_normalImpulse;f.m_tangentImpulse=k.m_tangentImpulse;break}}}}else this.m_manifold.m_pointCount=0;if(m!=e){d.SetAwake(true);p.SetAwake(true)}}this.m_flags=m?this.m_flags|c.e_touchingFlag:this.m_flags&~c.e_touchingFlag;e==false&&m==true&&b.BeginContact(this);
e==true&&m==false&&b.EndContact(this);(this.m_flags&c.e_sensorFlag)==0&&b.PreSolve(this,this.m_oldManifold)};c.prototype.Evaluate=function(){};c.prototype.ComputeTOI=function(a,b){c.s_input.proxyA.Set(this.m_fixtureA.GetShape());c.s_input.proxyB.Set(this.m_fixtureB.GetShape());c.s_input.sweepA=a;c.s_input.sweepB=b;c.s_input.tolerance=A.b2_linearSlop;return m.TimeOfImpact(c.s_input)};myChrome.postDefs.push(function(){myChrome.Dynamics.Contacts.b2Contact.e_sensorFlag=1;myChrome.Dynamics.Contacts.b2Contact.e_continuousFlag=
2;myChrome.Dynamics.Contacts.b2Contact.e_islandFlag=4;myChrome.Dynamics.Contacts.b2Contact.e_toiFlag=8;myChrome.Dynamics.Contacts.b2Contact.e_touchingFlag=16;myChrome.Dynamics.Contacts.b2Contact.e_enabledFlag=32;myChrome.Dynamics.Contacts.b2Contact.e_filterFlag=64;myChrome.Dynamics.Contacts.b2Contact.s_input=new p});h.b2ContactConstraint=function(){this.localPlaneNormal=new D;this.localPoint=new D;this.normal=new D;this.normalMass=new x;this.K=new x};h.prototype.b2ContactConstraint=function(){this.points=
new Vector(A.b2_maxManifoldPoints);for(var a=0;a<A.b2_maxManifoldPoints;a++)this.points[a]=new f};f.b2ContactConstraintPoint=function(){this.localPoint=new D;this.rA=new D;this.rB=new D};k.b2ContactEdge=function(){};r.b2ContactFactory=function(){};r.prototype.b2ContactFactory=function(a){this.m_allocator=a;this.InitializeRegisters()};r.prototype.AddType=function(a,b,e,c){e===void 0&&(e=0);c===void 0&&(c=0);this.m_registers[e][c].createFcn=a;this.m_registers[e][c].destroyFcn=b;this.m_registers[e][c].primary=
true;if(e!=c){this.m_registers[c][e].createFcn=a;this.m_registers[c][e].destroyFcn=b;this.m_registers[c][e].primary=false}};r.prototype.InitializeRegisters=function(){this.m_registers=new Vector(a.e_shapeTypeCount);for(var b=0;b<a.e_shapeTypeCount;b++){this.m_registers[b]=new Vector(a.e_shapeTypeCount);for(var c=0;c<a.e_shapeTypeCount;c++)this.m_registers[b][c]=new t}this.AddType(e.Create,e.Destroy,a.e_circleShape,a.e_circleShape);this.AddType(F.Create,F.Destroy,a.e_polygonShape,a.e_circleShape);
this.AddType(G.Create,G.Destroy,a.e_polygonShape,a.e_polygonShape);this.AddType(u.Create,u.Destroy,a.e_edgeShape,a.e_circleShape);this.AddType(o.Create,o.Destroy,a.e_polygonShape,a.e_edgeShape)};r.prototype.Create=function(a,b){var e=parseInt(a.GetType()),c=parseInt(b.GetType()),e=this.m_registers[e][c];if(e.pool){c=e.pool;e.pool=c.m_next;e.poolCount--;c.Reset(a,b);return c}c=e.createFcn;if(c!=null){if(e.primary){c=c(this.m_allocator);c.Reset(a,b)}else{c=c(this.m_allocator);c.Reset(b,a)}return c}return null};
r.prototype.Destroy=function(a){if(a.m_manifold.m_pointCount>0){a.m_fixtureA.m_body.SetAwake(true);a.m_fixtureB.m_body.SetAwake(true)}var b=parseInt(a.m_fixtureA.GetType()),e=parseInt(a.m_fixtureB.GetType()),b=this.m_registers[b][e];b.poolCount++;a.m_next=b.pool;b.pool=a;b=b.destroyFcn;b(a,this.m_allocator)};t.b2ContactRegister=function(){};q.b2ContactResult=function(){this.position=new D;this.normal=new D;this.id=new N};s.b2ContactSolver=function(){this.m_step=new H;this.m_constraints=new Vector};
s.prototype.b2ContactSolver=function(){};s.prototype.Initialize=function(a,b,e,c){e===void 0&&(e=0);var m;this.m_step.Set(a);this.m_allocator=c;for(this.m_constraintCount=e;this.m_constraints.length<this.m_constraintCount;)this.m_constraints[this.m_constraints.length]=new h;for(a=0;a<e;++a){m=b[a];var c=m.m_fixtureA,d=m.m_fixtureB,p=c.m_shape.m_radius,f=d.m_shape.m_radius,w=c.m_body,k=d.m_body,o=m.GetManifold(),l=A.b2MixFriction(c.GetFriction(),d.GetFriction()),q=A.b2MixRestitution(c.GetRestitution(),
d.GetRestitution()),r=w.m_linearVelocity.x,u=w.m_linearVelocity.y,t=k.m_linearVelocity.x,x=k.m_linearVelocity.y,z=w.m_angularVelocity,C=k.m_angularVelocity;A.b2Assert(o.m_pointCount>0);s.s_worldManifold.Initialize(o,w.m_xf,p,k.m_xf,f);d=s.s_worldManifold.m_normal.x;m=s.s_worldManifold.m_normal.y;c=this.m_constraints[a];c.bodyA=w;c.bodyB=k;c.manifold=o;c.normal.x=d;c.normal.y=m;c.pointCount=o.m_pointCount;c.friction=l;c.restitution=q;c.localPlaneNormal.x=o.m_localPlaneNormal.x;c.localPlaneNormal.y=
o.m_localPlaneNormal.y;c.localPoint.x=o.m_localPoint.x;c.localPoint.y=o.m_localPoint.y;c.radius=p+f;c.type=o.m_type;for(p=0;p<c.pointCount;++p){l=o.m_points[p];f=c.points[p];f.normalImpulse=l.m_normalImpulse;f.tangentImpulse=l.m_tangentImpulse;f.localPoint.SetV(l.m_localPoint);var l=f.rA.x=s.s_worldManifold.m_points[p].x-w.m_sweep.c.x,q=f.rA.y=s.s_worldManifold.m_points[p].y-w.m_sweep.c.y,G=f.rB.x=s.s_worldManifold.m_points[p].x-k.m_sweep.c.x,H=f.rB.y=s.s_worldManifold.m_points[p].y-k.m_sweep.c.y,
D=l*m-q*d,F=G*m-H*d,D=D*D,F=F*F;f.normalMass=1/(w.m_invMass+k.m_invMass+w.m_invI*D+k.m_invI*F);var J=w.m_mass*w.m_invMass+k.m_mass*k.m_invMass,J=J+(w.m_mass*w.m_invI*D+k.m_mass*k.m_invI*F);f.equalizedMass=1/J;F=m;J=-d;D=l*J-q*F;F=G*J-H*F;D=D*D;F=F*F;f.tangentMass=1/(w.m_invMass+k.m_invMass+w.m_invI*D+k.m_invI*F);f.velocityBias=0;l=c.normal.x*(t+-C*H-r- -z*q)+c.normal.y*(x+C*G-u-z*l);if(l<-A.b2_velocityThreshold)f.velocityBias=f.velocityBias+-c.restitution*l}if(c.pointCount==2){x=c.points[0];t=c.points[1];
o=w.m_invMass;w=w.m_invI;r=k.m_invMass;k=k.m_invI;u=x.rA.x*m-x.rA.y*d;x=x.rB.x*m-x.rB.y*d;z=t.rA.x*m-t.rA.y*d;t=t.rB.x*m-t.rB.y*d;d=o+r+w*u*u+k*x*x;m=o+r+w*z*z+k*t*t;k=o+r+w*u*z+k*x*t;if(d*d<100*(d*m-k*k)){c.K.col1.Set(d,k);c.K.col2.Set(k,m);c.K.GetInverse(c.normalMass)}else c.pointCount=1}}};s.prototype.InitVelocityConstraints=function(a){for(var b=0;b<this.m_constraintCount;++b){var e=this.m_constraints[b],c=e.bodyA,m=e.bodyB,d=c.m_invMass,p=c.m_invI,f=m.m_invMass,w=m.m_invI,h=e.normal.x,k=e.normal.y,
o=k,l=-h,q=0,r=0;if(a.warmStarting){r=e.pointCount;for(q=0;q<r;++q){var s=e.points[q];s.normalImpulse=s.normalImpulse*a.dtRatio;s.tangentImpulse=s.tangentImpulse*a.dtRatio;var u=s.normalImpulse*h+s.tangentImpulse*o,t=s.normalImpulse*k+s.tangentImpulse*l;c.m_angularVelocity=c.m_angularVelocity-p*(s.rA.x*t-s.rA.y*u);c.m_linearVelocity.x=c.m_linearVelocity.x-d*u;c.m_linearVelocity.y=c.m_linearVelocity.y-d*t;m.m_angularVelocity=m.m_angularVelocity+w*(s.rB.x*t-s.rB.y*u);m.m_linearVelocity.x=m.m_linearVelocity.x+
f*u;m.m_linearVelocity.y=m.m_linearVelocity.y+f*t}}else{r=e.pointCount;for(q=0;q<r;++q){c=e.points[q];c.normalImpulse=0;c.tangentImpulse=0}}}};s.prototype.SolveVelocityConstraints=function(){for(var a=0,b,e=0,c=0,m=0,d=0,p=0,f=0,w=0,h,k=0;k<this.m_constraintCount;++k){var m=this.m_constraints[k],o=m.bodyA,l=m.bodyB,q=o.m_angularVelocity,r=l.m_angularVelocity,s=o.m_linearVelocity,u=l.m_linearVelocity,t=o.m_invMass,x=o.m_invI,A=l.m_invMass,z=l.m_invI,f=m.normal.x,C=w=m.normal.y;h=-f;p=m.friction;for(a=
0;a<m.pointCount;a++){b=m.points[a];e=u.x-r*b.rB.y-s.x+q*b.rA.y;c=u.y+r*b.rB.x-s.y-q*b.rA.x;e=e*C+c*h;e=b.tangentMass*-e;c=p*b.normalImpulse;c=M.Clamp(b.tangentImpulse+e,-c,c);e=c-b.tangentImpulse;d=e*C;e=e*h;s.x=s.x-t*d;s.y=s.y-t*e;q=q-x*(b.rA.x*e-b.rA.y*d);u.x=u.x+A*d;u.y=u.y+A*e;r=r+z*(b.rB.x*e-b.rB.y*d);b.tangentImpulse=c}parseInt(m.pointCount);if(m.pointCount==1){b=m.points[0];e=u.x+-r*b.rB.y-s.x- -q*b.rA.y;c=u.y+r*b.rB.x-s.y-q*b.rA.x;m=e*f+c*w;e=-b.normalMass*(m-b.velocityBias);c=b.normalImpulse+
e;c=c>0?c:0;e=c-b.normalImpulse;d=e*f;e=e*w;s.x=s.x-t*d;s.y=s.y-t*e;q=q-x*(b.rA.x*e-b.rA.y*d);u.x=u.x+A*d;u.y=u.y+A*e;r=r+z*(b.rB.x*e-b.rB.y*d);b.normalImpulse=c}else{b=m.points[0];var a=m.points[1],e=b.normalImpulse,p=a.normalImpulse,D=(u.x-r*b.rB.y-s.x+q*b.rA.y)*f+(u.y+r*b.rB.x-s.y-q*b.rA.x)*w,F=(u.x-r*a.rB.y-s.x+q*a.rA.y)*f+(u.y+r*a.rB.x-s.y-q*a.rA.x)*w,c=D-b.velocityBias,d=F-a.velocityBias;h=m.K;c=c-(h.col1.x*e+h.col2.x*p);for(d=d-(h.col1.y*e+h.col2.y*p);;){h=m.normalMass;C=-(h.col1.x*c+h.col2.x*
d);h=-(h.col1.y*c+h.col2.y*d);if(C>=0&&h>=0){e=C-e;p=h-p;m=e*f;e=e*w;f=p*f;w=p*w;s.x=s.x-t*(m+f);s.y=s.y-t*(e+w);q=q-x*(b.rA.x*e-b.rA.y*m+a.rA.x*w-a.rA.y*f);u.x=u.x+A*(m+f);u.y=u.y+A*(e+w);r=r+z*(b.rB.x*e-b.rB.y*m+a.rB.x*w-a.rB.y*f);b.normalImpulse=C;a.normalImpulse=h;break}C=-b.normalMass*c;h=0;F=m.K.col1.y*C+d;if(C>=0&&F>=0){e=C-e;p=h-p;m=e*f;e=e*w;f=p*f;w=p*w;s.x=s.x-t*(m+f);s.y=s.y-t*(e+w);q=q-x*(b.rA.x*e-b.rA.y*m+a.rA.x*w-a.rA.y*f);u.x=u.x+A*(m+f);u.y=u.y+A*(e+w);r=r+z*(b.rB.x*e-b.rB.y*m+a.rB.x*
w-a.rB.y*f);b.normalImpulse=C;a.normalImpulse=h;break}C=0;h=-a.normalMass*d;D=m.K.col2.x*h+c;if(h>=0&&D>=0){e=C-e;p=h-p;m=e*f;e=e*w;f=p*f;w=p*w;s.x=s.x-t*(m+f);s.y=s.y-t*(e+w);q=q-x*(b.rA.x*e-b.rA.y*m+a.rA.x*w-a.rA.y*f);u.x=u.x+A*(m+f);u.y=u.y+A*(e+w);r=r+z*(b.rB.x*e-b.rB.y*m+a.rB.x*w-a.rB.y*f);b.normalImpulse=C;a.normalImpulse=h;break}h=C=0;D=c;F=d;if(D>=0&&F>=0){e=C-e;p=h-p;m=e*f;e=e*w;f=p*f;w=p*w;s.x=s.x-t*(m+f);s.y=s.y-t*(e+w);q=q-x*(b.rA.x*e-b.rA.y*m+a.rA.x*w-a.rA.y*f);u.x=u.x+A*(m+f);u.y=u.y+
A*(e+w);r=r+z*(b.rB.x*e-b.rB.y*m+a.rB.x*w-a.rB.y*f);b.normalImpulse=C;a.normalImpulse=h;break}break}}o.m_angularVelocity=q;l.m_angularVelocity=r}};s.prototype.FinalizeVelocityConstraints=function(){for(var a=0;a<this.m_constraintCount;++a)for(var b=this.m_constraints[a],e=b.manifold,c=0;c<b.pointCount;++c){var m=e.m_points[c],d=b.points[c];m.m_normalImpulse=d.normalImpulse;m.m_tangentImpulse=d.tangentImpulse}};s.prototype.SolvePositionConstraints=function(a){a===void 0&&(a=0);for(var b=0,e=0;e<this.m_constraintCount;e++){var c=
this.m_constraints[e],m=c.bodyA,d=c.bodyB,p=m.m_mass*m.m_invMass,f=m.m_mass*m.m_invI,w=d.m_mass*d.m_invMass,h=d.m_mass*d.m_invI;s.s_psm.Initialize(c);for(var k=s.s_psm.m_normal,o=0;o<c.pointCount;o++){var q=c.points[o],r=s.s_psm.m_points[o],l=s.s_psm.m_separations[o],u=r.x-m.m_sweep.c.x,t=r.y-m.m_sweep.c.y,x=r.x-d.m_sweep.c.x,r=r.y-d.m_sweep.c.y,b=b<l?b:l,l=M.Clamp(a*(l+A.b2_linearSlop),-A.b2_maxLinearCorrection,0),l=-q.equalizedMass*l,q=l*k.x,l=l*k.y;m.m_sweep.c.x=m.m_sweep.c.x-p*q;m.m_sweep.c.y=
m.m_sweep.c.y-p*l;m.m_sweep.a=m.m_sweep.a-f*(u*l-t*q);m.SynchronizeTransform();d.m_sweep.c.x=d.m_sweep.c.x+w*q;d.m_sweep.c.y=d.m_sweep.c.y+w*l;d.m_sweep.a=d.m_sweep.a+h*(x*l-r*q);d.SynchronizeTransform()}}return b>-1.5*A.b2_linearSlop};myChrome.postDefs.push(function(){myChrome.Dynamics.Contacts.b2ContactSolver.s_worldManifold=new w;myChrome.Dynamics.Contacts.b2ContactSolver.s_psm=new z});myChrome.inherit(u,myChrome.Dynamics.Contacts.b2Contact);u.prototype.__super=myChrome.Dynamics.Contacts.b2Contact.prototype;
u.b2EdgeAndCircleContact=function(){myChrome.Dynamics.Contacts.b2Contact.b2Contact.apply(this,arguments)};u.Create=function(){return new u};u.Destroy=function(){};u.prototype.Reset=function(a,b){this.__super.Reset.call(this,a,b)};u.prototype.Evaluate=function(){var a=this.m_fixtureA.GetBody(),b=this.m_fixtureB.GetBody();this.b2CollideEdgeAndCircle(this.m_manifold,this.m_fixtureA.GetShape()instanceof d?this.m_fixtureA.GetShape():null,a.m_xf,this.m_fixtureB.GetShape()instanceof l?this.m_fixtureB.GetShape():
null,b.m_xf)};u.prototype.b2CollideEdgeAndCircle=function(){};myChrome.inherit(C,myChrome.Dynamics.Contacts.b2Contact);C.prototype.__super=myChrome.Dynamics.Contacts.b2Contact.prototype;C.b2NullContact=function(){myChrome.Dynamics.Contacts.b2Contact.b2Contact.apply(this,arguments)};C.prototype.b2NullContact=function(){this.__super.b2Contact.call(this)};C.prototype.Evaluate=function(){};myChrome.inherit(F,myChrome.Dynamics.Contacts.b2Contact);F.prototype.__super=myChrome.Dynamics.Contacts.b2Contact.prototype;
F.b2PolyAndCircleContact=function(){myChrome.Dynamics.Contacts.b2Contact.b2Contact.apply(this,arguments)};F.Create=function(){return new F};F.Destroy=function(){};F.prototype.Reset=function(b,e){this.__super.Reset.call(this,b,e);A.b2Assert(b.GetType()==a.e_polygonShape);A.b2Assert(e.GetType()==a.e_circleShape)};F.prototype.Evaluate=function(){var a=this.m_fixtureA.m_body,e=this.m_fixtureB.m_body;I.CollidePolygonAndCircle(this.m_manifold,this.m_fixtureA.GetShape()instanceof b?this.m_fixtureA.GetShape():
null,a.m_xf,this.m_fixtureB.GetShape()instanceof l?this.m_fixtureB.GetShape():null,e.m_xf)};myChrome.inherit(o,myChrome.Dynamics.Contacts.b2Contact);o.prototype.__super=myChrome.Dynamics.Contacts.b2Contact.prototype;o.b2PolyAndEdgeContact=function(){myChrome.Dynamics.Contacts.b2Contact.b2Contact.apply(this,arguments)};o.Create=function(){return new o};o.Destroy=function(){};o.prototype.Reset=function(b,e){this.__super.Reset.call(this,b,e);A.b2Assert(b.GetType()==a.e_polygonShape);A.b2Assert(e.GetType()==
a.e_edgeShape)};o.prototype.Evaluate=function(){var a=this.m_fixtureA.GetBody(),e=this.m_fixtureB.GetBody();this.b2CollidePolyAndEdge(this.m_manifold,this.m_fixtureA.GetShape()instanceof b?this.m_fixtureA.GetShape():null,a.m_xf,this.m_fixtureB.GetShape()instanceof d?this.m_fixtureB.GetShape():null,e.m_xf)};o.prototype.b2CollidePolyAndEdge=function(){};myChrome.inherit(G,myChrome.Dynamics.Contacts.b2Contact);G.prototype.__super=myChrome.Dynamics.Contacts.b2Contact.prototype;G.b2PolygonContact=function(){myChrome.Dynamics.Contacts.b2Contact.b2Contact.apply(this,
arguments)};G.Create=function(){return new G};G.Destroy=function(){};G.prototype.Reset=function(a,b){this.__super.Reset.call(this,a,b)};G.prototype.Evaluate=function(){var a=this.m_fixtureA.GetBody(),e=this.m_fixtureB.GetBody();I.CollidePolygons(this.m_manifold,this.m_fixtureA.GetShape()instanceof b?this.m_fixtureA.GetShape():null,a.m_xf,this.m_fixtureB.GetShape()instanceof b?this.m_fixtureB.GetShape():null,e.m_xf)};z.b2PositionSolverManifold=function(){};z.prototype.b2PositionSolverManifold=function(){this.m_normal=
new D;this.m_separations=new Vector_a2j_Number(A.b2_maxManifoldPoints);this.m_points=new Vector(A.b2_maxManifoldPoints);for(var a=0;a<A.b2_maxManifoldPoints;a++)this.m_points[a]=new D};z.prototype.Initialize=function(a){A.b2Assert(a.pointCount>0);var b=0,e=0,c=0,m,d=0,p=0;switch(a.type){case K.e_circles:m=a.bodyA.m_xf.R;c=a.localPoint;b=a.bodyA.m_xf.position.x+(m.col1.x*c.x+m.col2.x*c.y);e=a.bodyA.m_xf.position.y+(m.col1.y*c.x+m.col2.y*c.y);m=a.bodyB.m_xf.R;c=a.points[0].localPoint;d=a.bodyB.m_xf.position.x+
(m.col1.x*c.x+m.col2.x*c.y);m=a.bodyB.m_xf.position.y+(m.col1.y*c.x+m.col2.y*c.y);var c=d-b,p=m-e,f=c*c+p*p;if(f>Number.MIN_VALUE*Number.MIN_VALUE){f=Math.sqrt(f);this.m_normal.x=c/f;this.m_normal.y=p/f}else{this.m_normal.x=1;this.m_normal.y=0}this.m_points[0].x=0.5*(b+d);this.m_points[0].y=0.5*(e+m);this.m_separations[0]=c*this.m_normal.x+p*this.m_normal.y-a.radius;break;case K.e_faceA:m=a.bodyA.m_xf.R;c=a.localPlaneNormal;this.m_normal.x=m.col1.x*c.x+m.col2.x*c.y;this.m_normal.y=m.col1.y*c.x+m.col2.y*
c.y;m=a.bodyA.m_xf.R;c=a.localPoint;d=a.bodyA.m_xf.position.x+(m.col1.x*c.x+m.col2.x*c.y);p=a.bodyA.m_xf.position.y+(m.col1.y*c.x+m.col2.y*c.y);m=a.bodyB.m_xf.R;for(b=0;b<a.pointCount;++b){c=a.points[b].localPoint;e=a.bodyB.m_xf.position.x+(m.col1.x*c.x+m.col2.x*c.y);c=a.bodyB.m_xf.position.y+(m.col1.y*c.x+m.col2.y*c.y);this.m_separations[b]=(e-d)*this.m_normal.x+(c-p)*this.m_normal.y-a.radius;this.m_points[b].x=e;this.m_points[b].y=c}break;case K.e_faceB:m=a.bodyB.m_xf.R;c=a.localPlaneNormal;this.m_normal.x=
m.col1.x*c.x+m.col2.x*c.y;this.m_normal.y=m.col1.y*c.x+m.col2.y*c.y;m=a.bodyB.m_xf.R;c=a.localPoint;d=a.bodyB.m_xf.position.x+(m.col1.x*c.x+m.col2.x*c.y);p=a.bodyB.m_xf.position.y+(m.col1.y*c.x+m.col2.y*c.y);m=a.bodyA.m_xf.R;for(b=0;b<a.pointCount;++b){c=a.points[b].localPoint;e=a.bodyA.m_xf.position.x+(m.col1.x*c.x+m.col2.x*c.y);c=a.bodyA.m_xf.position.y+(m.col1.y*c.x+m.col2.y*c.y);this.m_separations[b]=(e-d)*this.m_normal.x+(c-p)*this.m_normal.y-a.radius;this.m_points[b].Set(e,c)}this.m_normal.x=
this.m_normal.x*-1;this.m_normal.y=this.m_normal.y*-1}};myChrome.postDefs.push(function(){myChrome.Dynamics.Contacts.b2PositionSolverManifold.circlePointA=new D;myChrome.Dynamics.Contacts.b2PositionSolverManifold.circlePointB=new D})})();
(function(){var l=myChrome.Common.Math.b2Mat22,d=myChrome.Common.Math.b2Math,b=myChrome.Common.Math.b2Vec2,a=myChrome.Common.b2Color,e=myChrome.Dynamics.Controllers.b2BuoyancyController,c=myChrome.Dynamics.Controllers.b2ConstantAccelController,h=myChrome.Dynamics.Controllers.b2ConstantForceController,f=myChrome.Dynamics.Controllers.b2Controller,k=myChrome.Dynamics.Controllers.b2ControllerEdge,r=myChrome.Dynamics.Controllers.b2GravityController,t=myChrome.Dynamics.Controllers.b2TensorDampingController;
myChrome.inherit(e,myChrome.Dynamics.Controllers.b2Controller);e.prototype.__super=myChrome.Dynamics.Controllers.b2Controller.prototype;e.b2BuoyancyController=function(){myChrome.Dynamics.Controllers.b2Controller.b2Controller.apply(this,arguments);this.normal=new b(0,-1);this.density=this.offset=0;this.velocity=new b(0,0);this.linearDrag=2;this.angularDrag=1;this.useDensity=false;this.useWorldGravity=true;this.gravity=null};e.prototype.Step=function(){if(this.m_bodyList){if(this.useWorldGravity)this.gravity=
this.GetWorld().GetGravity().Copy();for(var a=this.m_bodyList;a;a=a.nextBody){var e=a.body;if(e.IsAwake()!=false){for(var c=new b,d=new b,f=0,h=0,k=e.GetFixtureList();k;k=k.GetNext()){var l=new b,r=k.GetShape().ComputeSubmergedArea(this.normal,this.offset,e.GetTransform(),l),f=f+r;c.x=c.x+r*l.x;c.y=c.y+r*l.y;var t=0,t=1,h=h+r*t;d.x=d.x+r*l.x*t;d.y=d.y+r*l.y*t}c.x=c.x/f;c.y=c.y/f;d.x=d.x/h;d.y=d.y/h;if(!(f<Number.MIN_VALUE)){h=this.gravity.GetNegative();h.Multiply(this.density*f);e.ApplyForce(h,d);
d=e.GetLinearVelocityFromWorldPoint(c);d.Subtract(this.velocity);d.Multiply(-this.linearDrag*f);e.ApplyForce(d,c);e.ApplyTorque(-e.GetInertia()/e.GetMass()*f*e.GetAngularVelocity()*this.angularDrag)}}}}};e.prototype.Draw=function(e){var c=new b,d=new b;c.x=this.normal.x*this.offset+this.normal.y*1E3;c.y=this.normal.y*this.offset-this.normal.x*1E3;d.x=this.normal.x*this.offset-this.normal.y*1E3;d.y=this.normal.y*this.offset+this.normal.x*1E3;var f=new a(0,0,1);e.DrawSegment(c,d,f)};myChrome.inherit(c,
myChrome.Dynamics.Controllers.b2Controller);c.prototype.__super=myChrome.Dynamics.Controllers.b2Controller.prototype;c.b2ConstantAccelController=function(){myChrome.Dynamics.Controllers.b2Controller.b2Controller.apply(this,arguments);this.A=new b(0,0)};c.prototype.Step=function(a){for(var a=new b(this.A.x*a.dt,this.A.y*a.dt),e=this.m_bodyList;e;e=e.nextBody){var c=e.body;c.IsAwake()&&c.SetLinearVelocity(new b(c.GetLinearVelocity().x+a.x,c.GetLinearVelocity().y+a.y))}};myChrome.inherit(h,myChrome.Dynamics.Controllers.b2Controller);
h.prototype.__super=myChrome.Dynamics.Controllers.b2Controller.prototype;h.b2ConstantForceController=function(){myChrome.Dynamics.Controllers.b2Controller.b2Controller.apply(this,arguments);this.F=new b(0,0)};h.prototype.Step=function(){for(var a=this.m_bodyList;a;a=a.nextBody){var b=a.body;b.IsAwake()&&b.ApplyForce(this.F,b.GetWorldCenter())}};f.b2Controller=function(){};f.prototype.Step=function(){};f.prototype.Draw=function(){};f.prototype.AddBody=function(a){var b=new k;b.controller=this;b.body=
a;b.nextBody=this.m_bodyList;b.prevBody=null;this.m_bodyList=b;if(b.nextBody)b.nextBody.prevBody=b;this.m_bodyCount++;b.nextController=a.m_controllerList;b.prevController=null;a.m_controllerList=b;if(b.nextController)b.nextController.prevController=b;a.m_controllerCount++};f.prototype.RemoveBody=function(a){for(var b=a.m_controllerList;b&&b.controller!=this;)b=b.nextController;if(b.prevBody)b.prevBody.nextBody=b.nextBody;if(b.nextBody)b.nextBody.prevBody=b.prevBody;if(b.nextController)b.nextController.prevController=
b.prevController;if(b.prevController)b.prevController.nextController=b.nextController;if(this.m_bodyList==b)this.m_bodyList=b.nextBody;if(a.m_controllerList==b)a.m_controllerList=b.nextController;a.m_controllerCount--;this.m_bodyCount--};f.prototype.Clear=function(){for(;this.m_bodyList;)this.RemoveBody(this.m_bodyList.body)};f.prototype.GetNext=function(){return this.m_next};f.prototype.GetWorld=function(){return this.m_world};f.prototype.GetBodyList=function(){return this.m_bodyList};k.b2ControllerEdge=
function(){};myChrome.inherit(r,myChrome.Dynamics.Controllers.b2Controller);r.prototype.__super=myChrome.Dynamics.Controllers.b2Controller.prototype;r.b2GravityController=function(){myChrome.Dynamics.Controllers.b2Controller.b2Controller.apply(this,arguments);this.G=1;this.invSqr=true};r.prototype.Step=function(){var a=null,e=null,c=null,d=0,f=null,h=null,k=null,l=0,r=0,t=0;if(this.invSqr)for(a=this.m_bodyList;a;a=a.nextBody){e=a.body;c=e.GetWorldCenter();d=e.GetMass();for(f=this.m_bodyList;f!=a;f=
f.nextBody){h=f.body;k=h.GetWorldCenter();l=k.x-c.x;r=k.y-c.y;t=l*l+r*r;if(!(t<Number.MIN_VALUE)){l=new b(l,r);l.Multiply(this.G/t/Math.sqrt(t)*d*h.GetMass());e.IsAwake()&&e.ApplyForce(l,c);l.Multiply(-1);h.IsAwake()&&h.ApplyForce(l,k)}}}else for(a=this.m_bodyList;a;a=a.nextBody){e=a.body;c=e.GetWorldCenter();d=e.GetMass();for(f=this.m_bodyList;f!=a;f=f.nextBody){h=f.body;k=h.GetWorldCenter();l=k.x-c.x;r=k.y-c.y;t=l*l+r*r;if(!(t<Number.MIN_VALUE)){l=new b(l,r);l.Multiply(this.G/t*d*h.GetMass());e.IsAwake()&&
e.ApplyForce(l,c);l.Multiply(-1);h.IsAwake()&&h.ApplyForce(l,k)}}}};myChrome.inherit(t,myChrome.Dynamics.Controllers.b2Controller);t.prototype.__super=myChrome.Dynamics.Controllers.b2Controller.prototype;t.b2TensorDampingController=function(){myChrome.Dynamics.Controllers.b2Controller.b2Controller.apply(this,arguments);this.T=new l;this.maxTimestep=0};t.prototype.SetAxisAligned=function(a,b){a===void 0&&(a=0);b===void 0&&(b=0);this.T.col1.x=-a;this.T.col1.y=0;this.T.col2.x=0;this.T.col2.y=-b;this.maxTimestep=
a>0||b>0?1/Math.max(a,b):0};t.prototype.Step=function(a){a=a.dt;if(!(a<=Number.MIN_VALUE)){if(a>this.maxTimestep&&this.maxTimestep>0)a=this.maxTimestep;for(var e=this.m_bodyList;e;e=e.nextBody){var c=e.body;if(c.IsAwake()){var f=c.GetWorldVector(d.MulMV(this.T,c.GetLocalVector(c.GetLinearVelocity())));c.SetLinearVelocity(new b(c.GetLinearVelocity().x+f.x*a,c.GetLinearVelocity().y+f.y*a))}}}}})();
(function(){var l=myChrome.Common.b2Settings,d=myChrome.Common.Math.b2Mat22,b=myChrome.Common.Math.b2Mat33,a=myChrome.Common.Math.b2Math,e=myChrome.Common.Math.b2Vec2,c=myChrome.Common.Math.b2Vec3,h=myChrome.Dynamics.Joints.b2DistanceJoint,f=myChrome.Dynamics.Joints.b2DistanceJointDef,k=myChrome.Dynamics.Joints.b2FrictionJoint,r=myChrome.Dynamics.Joints.b2FrictionJointDef,t=myChrome.Dynamics.Joints.b2GearJoint,q=myChrome.Dynamics.Joints.b2GearJointDef,s=myChrome.Dynamics.Joints.b2Jacobian,u=myChrome.Dynamics.Joints.b2Joint,
C=myChrome.Dynamics.Joints.b2JointDef,F=myChrome.Dynamics.Joints.b2JointEdge,o=myChrome.Dynamics.Joints.b2LineJoint,G=myChrome.Dynamics.Joints.b2LineJointDef,z=myChrome.Dynamics.Joints.b2MouseJoint,J=myChrome.Dynamics.Joints.b2MouseJointDef,H=myChrome.Dynamics.Joints.b2PrismaticJoint,A=myChrome.Dynamics.Joints.b2PrismaticJointDef,x=myChrome.Dynamics.Joints.b2PulleyJoint,M=myChrome.Dynamics.Joints.b2PulleyJointDef,D=myChrome.Dynamics.Joints.b2RevoluteJoint,I=myChrome.Dynamics.Joints.b2RevoluteJointDef,
N=myChrome.Dynamics.Joints.b2WeldJoint,K=myChrome.Dynamics.Joints.b2WeldJointDef;myChrome.inherit(h,myChrome.Dynamics.Joints.b2Joint);h.prototype.__super=myChrome.Dynamics.Joints.b2Joint.prototype;h.b2DistanceJoint=function(){myChrome.Dynamics.Joints.b2Joint.b2Joint.apply(this,arguments);this.m_localAnchor1=new e;this.m_localAnchor2=new e;this.m_u=new e};h.prototype.GetAnchorA=function(){return this.m_bodyA.GetWorldPoint(this.m_localAnchor1)};h.prototype.GetAnchorB=function(){return this.m_bodyB.GetWorldPoint(this.m_localAnchor2)};
h.prototype.GetReactionForce=function(a){a===void 0&&(a=0);return new e(a*this.m_impulse*this.m_u.x,a*this.m_impulse*this.m_u.y)};h.prototype.GetReactionTorque=function(){return 0};h.prototype.GetLength=function(){return this.m_length};h.prototype.SetLength=function(a){a===void 0&&(a=0);this.m_length=a};h.prototype.GetFrequency=function(){return this.m_frequencyHz};h.prototype.SetFrequency=function(a){a===void 0&&(a=0);this.m_frequencyHz=a};h.prototype.GetDampingRatio=function(){return this.m_dampingRatio};
h.prototype.SetDampingRatio=function(a){a===void 0&&(a=0);this.m_dampingRatio=a};h.prototype.b2DistanceJoint=function(a){this.__super.b2Joint.call(this,a);this.m_localAnchor1.SetV(a.localAnchorA);this.m_localAnchor2.SetV(a.localAnchorB);this.m_length=a.length;this.m_frequencyHz=a.frequencyHz;this.m_dampingRatio=a.dampingRatio;this.m_bias=this.m_gamma=this.m_impulse=0};h.prototype.InitVelocityConstraints=function(a){var b,e=0,c=this.m_bodyA,d=this.m_bodyB;b=c.m_xf.R;var f=this.m_localAnchor1.x-c.m_sweep.localCenter.x,
h=this.m_localAnchor1.y-c.m_sweep.localCenter.y,e=b.col1.x*f+b.col2.x*h,h=b.col1.y*f+b.col2.y*h,f=e;b=d.m_xf.R;var g=this.m_localAnchor2.x-d.m_sweep.localCenter.x,j=this.m_localAnchor2.y-d.m_sweep.localCenter.y,e=b.col1.x*g+b.col2.x*j,j=b.col1.y*g+b.col2.y*j,g=e;this.m_u.x=d.m_sweep.c.x+g-c.m_sweep.c.x-f;this.m_u.y=d.m_sweep.c.y+j-c.m_sweep.c.y-h;e=Math.sqrt(this.m_u.x*this.m_u.x+this.m_u.y*this.m_u.y);e>l.b2_linearSlop?this.m_u.Multiply(1/e):this.m_u.SetZero();b=f*this.m_u.y-h*this.m_u.x;var k=g*
this.m_u.y-j*this.m_u.x;b=c.m_invMass+c.m_invI*b*b+d.m_invMass+d.m_invI*k*k;this.m_mass=b!=0?1/b:0;if(this.m_frequencyHz>0){var e=e-this.m_length,k=2*Math.PI*this.m_frequencyHz,r=this.m_mass*k*k;this.m_gamma=a.dt*(2*this.m_mass*this.m_dampingRatio*k+a.dt*r);this.m_gamma=this.m_gamma!=0?1/this.m_gamma:0;this.m_bias=e*a.dt*r*this.m_gamma;this.m_mass=b+this.m_gamma;this.m_mass=this.m_mass!=0?1/this.m_mass:0}if(a.warmStarting){this.m_impulse=this.m_impulse*a.dtRatio;a=this.m_impulse*this.m_u.x;b=this.m_impulse*
this.m_u.y;c.m_linearVelocity.x=c.m_linearVelocity.x-c.m_invMass*a;c.m_linearVelocity.y=c.m_linearVelocity.y-c.m_invMass*b;c.m_angularVelocity=c.m_angularVelocity-c.m_invI*(f*b-h*a);d.m_linearVelocity.x=d.m_linearVelocity.x+d.m_invMass*a;d.m_linearVelocity.y=d.m_linearVelocity.y+d.m_invMass*b;d.m_angularVelocity=d.m_angularVelocity+d.m_invI*(g*b-j*a)}else this.m_impulse=0};h.prototype.SolveVelocityConstraints=function(){var a,b=this.m_bodyA,e=this.m_bodyB;a=b.m_xf.R;var c=this.m_localAnchor1.x-b.m_sweep.localCenter.x,
d=this.m_localAnchor1.y-b.m_sweep.localCenter.y,f=a.col1.x*c+a.col2.x*d,d=a.col1.y*c+a.col2.y*d,c=f;a=e.m_xf.R;var h=this.m_localAnchor2.x-e.m_sweep.localCenter.x,g=this.m_localAnchor2.y-e.m_sweep.localCenter.y,f=a.col1.x*h+a.col2.x*g,g=a.col1.y*h+a.col2.y*g,h=f,f=-this.m_mass*(this.m_u.x*(e.m_linearVelocity.x+-e.m_angularVelocity*g-(b.m_linearVelocity.x+-b.m_angularVelocity*d))+this.m_u.y*(e.m_linearVelocity.y+e.m_angularVelocity*h-(b.m_linearVelocity.y+b.m_angularVelocity*c))+this.m_bias+this.m_gamma*
this.m_impulse);this.m_impulse=this.m_impulse+f;a=f*this.m_u.x;f=f*this.m_u.y;b.m_linearVelocity.x=b.m_linearVelocity.x-b.m_invMass*a;b.m_linearVelocity.y=b.m_linearVelocity.y-b.m_invMass*f;b.m_angularVelocity=b.m_angularVelocity-b.m_invI*(c*f-d*a);e.m_linearVelocity.x=e.m_linearVelocity.x+e.m_invMass*a;e.m_linearVelocity.y=e.m_linearVelocity.y+e.m_invMass*f;e.m_angularVelocity=e.m_angularVelocity+e.m_invI*(h*f-g*a)};h.prototype.SolvePositionConstraints=function(){var b;if(this.m_frequencyHz>0)return true;
var e=this.m_bodyA,c=this.m_bodyB;b=e.m_xf.R;var d=this.m_localAnchor1.x-e.m_sweep.localCenter.x,f=this.m_localAnchor1.y-e.m_sweep.localCenter.y,h=b.col1.x*d+b.col2.x*f,f=b.col1.y*d+b.col2.y*f,d=h;b=c.m_xf.R;var k=this.m_localAnchor2.x-c.m_sweep.localCenter.x,g=this.m_localAnchor2.y-c.m_sweep.localCenter.y,h=b.col1.x*k+b.col2.x*g,g=b.col1.y*k+b.col2.y*g,k=h,h=c.m_sweep.c.x+k-e.m_sweep.c.x-d,j=c.m_sweep.c.y+g-e.m_sweep.c.y-f;b=Math.sqrt(h*h+j*j);h=h/b;j=j/b;b=b-this.m_length;b=a.Clamp(b,-l.b2_maxLinearCorrection,
l.b2_maxLinearCorrection);var y=-this.m_mass*b;this.m_u.Set(h,j);h=y*this.m_u.x;j=y*this.m_u.y;e.m_sweep.c.x=e.m_sweep.c.x-e.m_invMass*h;e.m_sweep.c.y=e.m_sweep.c.y-e.m_invMass*j;e.m_sweep.a=e.m_sweep.a-e.m_invI*(d*j-f*h);c.m_sweep.c.x=c.m_sweep.c.x+c.m_invMass*h;c.m_sweep.c.y=c.m_sweep.c.y+c.m_invMass*j;c.m_sweep.a=c.m_sweep.a+c.m_invI*(k*j-g*h);e.SynchronizeTransform();c.SynchronizeTransform();return a.Abs(b)<l.b2_linearSlop};myChrome.inherit(f,myChrome.Dynamics.Joints.b2JointDef);f.prototype.__super=
myChrome.Dynamics.Joints.b2JointDef.prototype;f.b2DistanceJointDef=function(){myChrome.Dynamics.Joints.b2JointDef.b2JointDef.apply(this,arguments);this.localAnchorA=new e;this.localAnchorB=new e};f.prototype.b2DistanceJointDef=function(){this.__super.b2JointDef.call(this);this.type=u.e_distanceJoint;this.length=1;this.dampingRatio=this.frequencyHz=0};f.prototype.Initialize=function(a,b,e,c){this.bodyA=a;this.bodyB=b;this.localAnchorA.SetV(this.bodyA.GetLocalPoint(e));this.localAnchorB.SetV(this.bodyB.GetLocalPoint(c));
a=c.x-e.x;e=c.y-e.y;this.length=Math.sqrt(a*a+e*e);this.dampingRatio=this.frequencyHz=0};myChrome.inherit(k,myChrome.Dynamics.Joints.b2Joint);k.prototype.__super=myChrome.Dynamics.Joints.b2Joint.prototype;k.b2FrictionJoint=function(){myChrome.Dynamics.Joints.b2Joint.b2Joint.apply(this,arguments);this.m_localAnchorA=new e;this.m_localAnchorB=new e;this.m_linearMass=new d;this.m_linearImpulse=new e};k.prototype.GetAnchorA=function(){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA)};k.prototype.GetAnchorB=
function(){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB)};k.prototype.GetReactionForce=function(a){a===void 0&&(a=0);return new e(a*this.m_linearImpulse.x,a*this.m_linearImpulse.y)};k.prototype.GetReactionTorque=function(a){a===void 0&&(a=0);return a*this.m_angularImpulse};k.prototype.SetMaxForce=function(a){a===void 0&&(a=0);this.m_maxForce=a};k.prototype.GetMaxForce=function(){return this.m_maxForce};k.prototype.SetMaxTorque=function(a){a===void 0&&(a=0);this.m_maxTorque=a};k.prototype.GetMaxTorque=
function(){return this.m_maxTorque};k.prototype.b2FrictionJoint=function(a){this.__super.b2Joint.call(this,a);this.m_localAnchorA.SetV(a.localAnchorA);this.m_localAnchorB.SetV(a.localAnchorB);this.m_linearMass.SetZero();this.m_angularMass=0;this.m_linearImpulse.SetZero();this.m_angularImpulse=0;this.m_maxForce=a.maxForce;this.m_maxTorque=a.maxTorque};k.prototype.InitVelocityConstraints=function(a){var b,e=0,c=this.m_bodyA,f=this.m_bodyB;b=c.m_xf.R;var h=this.m_localAnchorA.x-c.m_sweep.localCenter.x,
k=this.m_localAnchorA.y-c.m_sweep.localCenter.y,e=b.col1.x*h+b.col2.x*k,k=b.col1.y*h+b.col2.y*k,h=e;b=f.m_xf.R;var g=this.m_localAnchorB.x-f.m_sweep.localCenter.x,j=this.m_localAnchorB.y-f.m_sweep.localCenter.y,e=b.col1.x*g+b.col2.x*j,j=b.col1.y*g+b.col2.y*j,g=e;b=c.m_invMass;var e=f.m_invMass,l=c.m_invI,r=f.m_invI,o=new d;o.col1.x=b+e;o.col2.x=0;o.col1.y=0;o.col2.y=b+e;o.col1.x=o.col1.x+l*k*k;o.col2.x=o.col2.x+-l*h*k;o.col1.y=o.col1.y+-l*h*k;o.col2.y=o.col2.y+l*h*h;o.col1.x=o.col1.x+r*j*j;o.col2.x=
o.col2.x+-r*g*j;o.col1.y=o.col1.y+-r*g*j;o.col2.y=o.col2.y+r*g*g;o.GetInverse(this.m_linearMass);this.m_angularMass=l+r;if(this.m_angularMass>0)this.m_angularMass=1/this.m_angularMass;if(a.warmStarting){this.m_linearImpulse.x=this.m_linearImpulse.x*a.dtRatio;this.m_linearImpulse.y=this.m_linearImpulse.y*a.dtRatio;this.m_angularImpulse=this.m_angularImpulse*a.dtRatio;a=this.m_linearImpulse;c.m_linearVelocity.x=c.m_linearVelocity.x-b*a.x;c.m_linearVelocity.y=c.m_linearVelocity.y-b*a.y;c.m_angularVelocity=
c.m_angularVelocity-l*(h*a.y-k*a.x+this.m_angularImpulse);f.m_linearVelocity.x=f.m_linearVelocity.x+e*a.x;f.m_linearVelocity.y=f.m_linearVelocity.y+e*a.y;f.m_angularVelocity=f.m_angularVelocity+r*(g*a.y-j*a.x+this.m_angularImpulse)}else{this.m_linearImpulse.SetZero();this.m_angularImpulse=0}};k.prototype.SolveVelocityConstraints=function(b){var c,d=0,f=this.m_bodyA,h=this.m_bodyB,k=f.m_linearVelocity,l=f.m_angularVelocity,g=h.m_linearVelocity,j=h.m_angularVelocity,r=f.m_invMass,o=h.m_invMass,q=f.m_invI,
u=h.m_invI;c=f.m_xf.R;var t=this.m_localAnchorA.x-f.m_sweep.localCenter.x,s=this.m_localAnchorA.y-f.m_sweep.localCenter.y,d=c.col1.x*t+c.col2.x*s,s=c.col1.y*t+c.col2.y*s,t=d;c=h.m_xf.R;var x=this.m_localAnchorB.x-h.m_sweep.localCenter.x,A=this.m_localAnchorB.y-h.m_sweep.localCenter.y,d=c.col1.x*x+c.col2.x*A,A=c.col1.y*x+c.col2.y*A,x=d,d=-this.m_angularMass*(j-l),z=this.m_angularImpulse;c=b.dt*this.m_maxTorque;this.m_angularImpulse=a.Clamp(this.m_angularImpulse+d,-c,c);d=this.m_angularImpulse-z;l=
l-q*d;j=j+u*d;c=a.MulMV(this.m_linearMass,new e(-(g.x-j*A-k.x+l*s),-(g.y+j*x-k.y-l*t)));d=this.m_linearImpulse.Copy();this.m_linearImpulse.Add(c);c=b.dt*this.m_maxForce;if(this.m_linearImpulse.LengthSquared()>c*c){this.m_linearImpulse.Normalize();this.m_linearImpulse.Multiply(c)}c=a.SubtractVV(this.m_linearImpulse,d);k.x=k.x-r*c.x;k.y=k.y-r*c.y;l=l-q*(t*c.y-s*c.x);g.x=g.x+o*c.x;g.y=g.y+o*c.y;j=j+u*(x*c.y-A*c.x);f.m_angularVelocity=l;h.m_angularVelocity=j};k.prototype.SolvePositionConstraints=function(){return true};
myChrome.inherit(r,myChrome.Dynamics.Joints.b2JointDef);r.prototype.__super=myChrome.Dynamics.Joints.b2JointDef.prototype;r.b2FrictionJointDef=function(){myChrome.Dynamics.Joints.b2JointDef.b2JointDef.apply(this,arguments);this.localAnchorA=new e;this.localAnchorB=new e};r.prototype.b2FrictionJointDef=function(){this.__super.b2JointDef.call(this);this.type=u.e_frictionJoint;this.maxTorque=this.maxForce=0};r.prototype.Initialize=function(a,b,e){this.bodyA=a;this.bodyB=b;this.localAnchorA.SetV(this.bodyA.GetLocalPoint(e));
this.localAnchorB.SetV(this.bodyB.GetLocalPoint(e))};myChrome.inherit(t,myChrome.Dynamics.Joints.b2Joint);t.prototype.__super=myChrome.Dynamics.Joints.b2Joint.prototype;t.b2GearJoint=function(){myChrome.Dynamics.Joints.b2Joint.b2Joint.apply(this,arguments);this.m_groundAnchor1=new e;this.m_groundAnchor2=new e;this.m_localAnchor1=new e;this.m_localAnchor2=new e;this.m_J=new s};t.prototype.GetAnchorA=function(){return this.m_bodyA.GetWorldPoint(this.m_localAnchor1)};t.prototype.GetAnchorB=function(){return this.m_bodyB.GetWorldPoint(this.m_localAnchor2)};
t.prototype.GetReactionForce=function(a){a===void 0&&(a=0);return new e(a*this.m_impulse*this.m_J.linearB.x,a*this.m_impulse*this.m_J.linearB.y)};t.prototype.GetReactionTorque=function(a){a===void 0&&(a=0);var b=this.m_bodyB.m_xf.R,e=this.m_localAnchor1.x-this.m_bodyB.m_sweep.localCenter.x,c=this.m_localAnchor1.y-this.m_bodyB.m_sweep.localCenter.y,d=b.col1.x*e+b.col2.x*c,c=b.col1.y*e+b.col2.y*c;return a*(this.m_impulse*this.m_J.angularB-d*this.m_impulse*this.m_J.linearB.y+c*this.m_impulse*this.m_J.linearB.x)};
t.prototype.GetRatio=function(){return this.m_ratio};t.prototype.SetRatio=function(a){a===void 0&&(a=0);this.m_ratio=a};t.prototype.b2GearJoint=function(a){this.__super.b2Joint.call(this,a);var b=parseInt(a.joint1.m_type),e=parseInt(a.joint2.m_type);this.m_prismatic2=this.m_revolute2=this.m_prismatic1=this.m_revolute1=null;var c=0,d=0;this.m_ground1=a.joint1.GetBodyA();this.m_bodyA=a.joint1.GetBodyB();if(b==u.e_revoluteJoint){this.m_revolute1=a.joint1 instanceof D?a.joint1:null;this.m_groundAnchor1.SetV(this.m_revolute1.m_localAnchor1);
this.m_localAnchor1.SetV(this.m_revolute1.m_localAnchor2);c=this.m_revolute1.GetJointAngle()}else{this.m_prismatic1=a.joint1 instanceof H?a.joint1:null;this.m_groundAnchor1.SetV(this.m_prismatic1.m_localAnchor1);this.m_localAnchor1.SetV(this.m_prismatic1.m_localAnchor2);c=this.m_prismatic1.GetJointTranslation()}this.m_ground2=a.joint2.GetBodyA();this.m_bodyB=a.joint2.GetBodyB();if(e==u.e_revoluteJoint){this.m_revolute2=a.joint2 instanceof D?a.joint2:null;this.m_groundAnchor2.SetV(this.m_revolute2.m_localAnchor1);
this.m_localAnchor2.SetV(this.m_revolute2.m_localAnchor2);d=this.m_revolute2.GetJointAngle()}else{this.m_prismatic2=a.joint2 instanceof H?a.joint2:null;this.m_groundAnchor2.SetV(this.m_prismatic2.m_localAnchor1);this.m_localAnchor2.SetV(this.m_prismatic2.m_localAnchor2);d=this.m_prismatic2.GetJointTranslation()}this.m_ratio=a.ratio;this.m_constant=c+this.m_ratio*d;this.m_impulse=0};t.prototype.InitVelocityConstraints=function(a){var b=this.m_ground1,e=this.m_ground2,c=this.m_bodyA,d=this.m_bodyB,
f=0,h=0,g=0,j=0,k=0,l=0;this.m_J.SetZero();if(this.m_revolute1){this.m_J.angularA=-1;l=l+c.m_invI}else{b=b.m_xf.R;h=this.m_prismatic1.m_localXAxis1;f=b.col1.x*h.x+b.col2.x*h.y;h=b.col1.y*h.x+b.col2.y*h.y;b=c.m_xf.R;g=this.m_localAnchor1.x-c.m_sweep.localCenter.x;j=this.m_localAnchor1.y-c.m_sweep.localCenter.y;k=b.col1.x*g+b.col2.x*j;j=b.col1.y*g+b.col2.y*j;g=k*h-j*f;this.m_J.linearA.Set(-f,-h);this.m_J.angularA=-g;l=l+(c.m_invMass+c.m_invI*g*g)}if(this.m_revolute2){this.m_J.angularB=-this.m_ratio;
l=l+this.m_ratio*this.m_ratio*d.m_invI}else{b=e.m_xf.R;h=this.m_prismatic2.m_localXAxis1;f=b.col1.x*h.x+b.col2.x*h.y;h=b.col1.y*h.x+b.col2.y*h.y;b=d.m_xf.R;g=this.m_localAnchor2.x-d.m_sweep.localCenter.x;j=this.m_localAnchor2.y-d.m_sweep.localCenter.y;k=b.col1.x*g+b.col2.x*j;j=b.col1.y*g+b.col2.y*j;g=k*h-j*f;this.m_J.linearB.Set(-this.m_ratio*f,-this.m_ratio*h);this.m_J.angularB=-this.m_ratio*g;l=l+this.m_ratio*this.m_ratio*(d.m_invMass+d.m_invI*g*g)}this.m_mass=l>0?1/l:0;if(a.warmStarting){c.m_linearVelocity.x=
c.m_linearVelocity.x+c.m_invMass*this.m_impulse*this.m_J.linearA.x;c.m_linearVelocity.y=c.m_linearVelocity.y+c.m_invMass*this.m_impulse*this.m_J.linearA.y;c.m_angularVelocity=c.m_angularVelocity+c.m_invI*this.m_impulse*this.m_J.angularA;d.m_linearVelocity.x=d.m_linearVelocity.x+d.m_invMass*this.m_impulse*this.m_J.linearB.x;d.m_linearVelocity.y=d.m_linearVelocity.y+d.m_invMass*this.m_impulse*this.m_J.linearB.y;d.m_angularVelocity=d.m_angularVelocity+d.m_invI*this.m_impulse*this.m_J.angularB}else this.m_impulse=
0};t.prototype.SolveVelocityConstraints=function(){var a=this.m_bodyA,b=this.m_bodyB,e=-this.m_mass*this.m_J.Compute(a.m_linearVelocity,a.m_angularVelocity,b.m_linearVelocity,b.m_angularVelocity);this.m_impulse=this.m_impulse+e;a.m_linearVelocity.x=a.m_linearVelocity.x+a.m_invMass*e*this.m_J.linearA.x;a.m_linearVelocity.y=a.m_linearVelocity.y+a.m_invMass*e*this.m_J.linearA.y;a.m_angularVelocity=a.m_angularVelocity+a.m_invI*e*this.m_J.angularA;b.m_linearVelocity.x=b.m_linearVelocity.x+b.m_invMass*
e*this.m_J.linearB.x;b.m_linearVelocity.y=b.m_linearVelocity.y+b.m_invMass*e*this.m_J.linearB.y;b.m_angularVelocity=b.m_angularVelocity+b.m_invI*e*this.m_J.angularB};t.prototype.SolvePositionConstraints=function(){var a=this.m_bodyA,b=this.m_bodyB,e=0,c=0,e=this.m_revolute1?this.m_revolute1.GetJointAngle():this.m_prismatic1.GetJointTranslation(),c=this.m_revolute2?this.m_revolute2.GetJointAngle():this.m_prismatic2.GetJointTranslation(),e=-this.m_mass*(this.m_constant-(e+this.m_ratio*c));a.m_sweep.c.x=
a.m_sweep.c.x+a.m_invMass*e*this.m_J.linearA.x;a.m_sweep.c.y=a.m_sweep.c.y+a.m_invMass*e*this.m_J.linearA.y;a.m_sweep.a=a.m_sweep.a+a.m_invI*e*this.m_J.angularA;b.m_sweep.c.x=b.m_sweep.c.x+b.m_invMass*e*this.m_J.linearB.x;b.m_sweep.c.y=b.m_sweep.c.y+b.m_invMass*e*this.m_J.linearB.y;b.m_sweep.a=b.m_sweep.a+b.m_invI*e*this.m_J.angularB;a.SynchronizeTransform();b.SynchronizeTransform();return 0<l.b2_linearSlop};myChrome.inherit(q,myChrome.Dynamics.Joints.b2JointDef);q.prototype.__super=myChrome.Dynamics.Joints.b2JointDef.prototype;
q.b2GearJointDef=function(){myChrome.Dynamics.Joints.b2JointDef.b2JointDef.apply(this,arguments)};q.prototype.b2GearJointDef=function(){this.__super.b2JointDef.call(this);this.type=u.e_gearJoint;this.joint2=this.joint1=null;this.ratio=1};s.b2Jacobian=function(){this.linearA=new e;this.linearB=new e};s.prototype.SetZero=function(){this.linearA.SetZero();this.angularA=0;this.linearB.SetZero();this.angularB=0};s.prototype.Set=function(a,b,e,c){b===void 0&&(b=0);c===void 0&&(c=0);this.linearA.SetV(a);
this.angularA=b;this.linearB.SetV(e);this.angularB=c};s.prototype.Compute=function(a,b,e,c){b===void 0&&(b=0);c===void 0&&(c=0);return this.linearA.x*a.x+this.linearA.y*a.y+this.angularA*b+(this.linearB.x*e.x+this.linearB.y*e.y)+this.angularB*c};u.b2Joint=function(){this.m_edgeA=new F;this.m_edgeB=new F;this.m_localCenterA=new e;this.m_localCenterB=new e};u.prototype.GetType=function(){return this.m_type};u.prototype.GetAnchorA=function(){return null};u.prototype.GetAnchorB=function(){return null};
u.prototype.GetReactionForce=function(){return null};u.prototype.GetReactionTorque=function(){return 0};u.prototype.GetBodyA=function(){return this.m_bodyA};u.prototype.GetBodyB=function(){return this.m_bodyB};u.prototype.GetNext=function(){return this.m_next};u.prototype.GetUserData=function(){return this.m_userData};u.prototype.SetUserData=function(a){this.m_userData=a};u.prototype.IsActive=function(){return this.m_bodyA.IsActive()&&this.m_bodyB.IsActive()};u.Create=function(a){var b=null;switch(a.type){case u.e_distanceJoint:b=
new h(a instanceof f?a:null);break;case u.e_mouseJoint:b=new z(a instanceof J?a:null);break;case u.e_prismaticJoint:b=new H(a instanceof A?a:null);break;case u.e_revoluteJoint:b=new D(a instanceof I?a:null);break;case u.e_pulleyJoint:b=new x(a instanceof M?a:null);break;case u.e_gearJoint:b=new t(a instanceof q?a:null);break;case u.e_lineJoint:b=new o(a instanceof G?a:null);break;case u.e_weldJoint:b=new N(a instanceof K?a:null);break;case u.e_frictionJoint:b=new k(a instanceof r?a:null)}return b};
u.Destroy=function(){};u.prototype.b2Joint=function(a){l.b2Assert(a.bodyA!=a.bodyB);this.m_type=a.type;this.m_next=this.m_prev=null;this.m_bodyA=a.bodyA;this.m_bodyB=a.bodyB;this.m_collideConnected=a.collideConnected;this.m_islandFlag=false;this.m_userData=a.userData};u.prototype.InitVelocityConstraints=function(){};u.prototype.SolveVelocityConstraints=function(){};u.prototype.FinalizeVelocityConstraints=function(){};u.prototype.SolvePositionConstraints=function(){return false};myChrome.postDefs.push(function(){myChrome.Dynamics.Joints.b2Joint.e_unknownJoint=
0;myChrome.Dynamics.Joints.b2Joint.e_revoluteJoint=1;myChrome.Dynamics.Joints.b2Joint.e_prismaticJoint=2;myChrome.Dynamics.Joints.b2Joint.e_distanceJoint=3;myChrome.Dynamics.Joints.b2Joint.e_pulleyJoint=4;myChrome.Dynamics.Joints.b2Joint.e_mouseJoint=5;myChrome.Dynamics.Joints.b2Joint.e_gearJoint=6;myChrome.Dynamics.Joints.b2Joint.e_lineJoint=7;myChrome.Dynamics.Joints.b2Joint.e_weldJoint=8;myChrome.Dynamics.Joints.b2Joint.e_frictionJoint=9;myChrome.Dynamics.Joints.b2Joint.e_inactiveLimit=0;myChrome.Dynamics.Joints.b2Joint.e_atLowerLimit=
1;myChrome.Dynamics.Joints.b2Joint.e_atUpperLimit=2;myChrome.Dynamics.Joints.b2Joint.e_equalLimits=3});C.b2JointDef=function(){};C.prototype.b2JointDef=function(){this.type=u.e_unknownJoint;this.bodyB=this.bodyA=this.userData=null;this.collideConnected=false};F.b2JointEdge=function(){};myChrome.inherit(o,myChrome.Dynamics.Joints.b2Joint);o.prototype.__super=myChrome.Dynamics.Joints.b2Joint.prototype;o.b2LineJoint=function(){myChrome.Dynamics.Joints.b2Joint.b2Joint.apply(this,arguments);this.m_localAnchor1=
new e;this.m_localAnchor2=new e;this.m_localXAxis1=new e;this.m_localYAxis1=new e;this.m_axis=new e;this.m_perp=new e;this.m_K=new d;this.m_impulse=new e};o.prototype.GetAnchorA=function(){return this.m_bodyA.GetWorldPoint(this.m_localAnchor1)};o.prototype.GetAnchorB=function(){return this.m_bodyB.GetWorldPoint(this.m_localAnchor2)};o.prototype.GetReactionForce=function(a){a===void 0&&(a=0);return new e(a*(this.m_impulse.x*this.m_perp.x+(this.m_motorImpulse+this.m_impulse.y)*this.m_axis.x),a*(this.m_impulse.x*
this.m_perp.y+(this.m_motorImpulse+this.m_impulse.y)*this.m_axis.y))};o.prototype.GetReactionTorque=function(a){a===void 0&&(a=0);return a*this.m_impulse.y};o.prototype.GetJointTranslation=function(){var a=this.m_bodyA,b=this.m_bodyB,e=a.GetWorldPoint(this.m_localAnchor1),c=b.GetWorldPoint(this.m_localAnchor2),b=c.x-e.x,e=c.y-e.y,a=a.GetWorldVector(this.m_localXAxis1);return a.x*b+a.y*e};o.prototype.GetJointSpeed=function(){var a=this.m_bodyA,b=this.m_bodyB,e;e=a.m_xf.R;var c=this.m_localAnchor1.x-
a.m_sweep.localCenter.x,d=this.m_localAnchor1.y-a.m_sweep.localCenter.y,f=e.col1.x*c+e.col2.x*d,d=e.col1.y*c+e.col2.y*d,c=f;e=b.m_xf.R;var h=this.m_localAnchor2.x-b.m_sweep.localCenter.x,g=this.m_localAnchor2.y-b.m_sweep.localCenter.y,f=e.col1.x*h+e.col2.x*g,g=e.col1.y*h+e.col2.y*g,h=f;e=b.m_sweep.c.x+h-(a.m_sweep.c.x+c);var f=b.m_sweep.c.y+g-(a.m_sweep.c.y+d),j=a.GetWorldVector(this.m_localXAxis1),k=a.m_linearVelocity,l=b.m_linearVelocity,a=a.m_angularVelocity,b=b.m_angularVelocity;return e*-a*j.y+
f*a*j.x+(j.x*(l.x+-b*g-k.x- -a*d)+j.y*(l.y+b*h-k.y-a*c))};o.prototype.IsLimitEnabled=function(){return this.m_enableLimit};o.prototype.EnableLimit=function(a){this.m_bodyA.SetAwake(true);this.m_bodyB.SetAwake(true);this.m_enableLimit=a};o.prototype.GetLowerLimit=function(){return this.m_lowerTranslation};o.prototype.GetUpperLimit=function(){return this.m_upperTranslation};o.prototype.SetLimits=function(a,b){a===void 0&&(a=0);b===void 0&&(b=0);this.m_bodyA.SetAwake(true);this.m_bodyB.SetAwake(true);
this.m_lowerTranslation=a;this.m_upperTranslation=b};o.prototype.IsMotorEnabled=function(){return this.m_enableMotor};o.prototype.EnableMotor=function(a){this.m_bodyA.SetAwake(true);this.m_bodyB.SetAwake(true);this.m_enableMotor=a};o.prototype.SetMotorSpeed=function(a){a===void 0&&(a=0);this.m_bodyA.SetAwake(true);this.m_bodyB.SetAwake(true);this.m_motorSpeed=a};o.prototype.GetMotorSpeed=function(){return this.m_motorSpeed};o.prototype.SetMaxMotorForce=function(a){a===void 0&&(a=0);this.m_bodyA.SetAwake(true);
this.m_bodyB.SetAwake(true);this.m_maxMotorForce=a};o.prototype.GetMaxMotorForce=function(){return this.m_maxMotorForce};o.prototype.GetMotorForce=function(){return this.m_motorImpulse};o.prototype.b2LineJoint=function(a){this.__super.b2Joint.call(this,a);this.m_localAnchor1.SetV(a.localAnchorA);this.m_localAnchor2.SetV(a.localAnchorB);this.m_localXAxis1.SetV(a.localAxisA);this.m_localYAxis1.x=-this.m_localXAxis1.y;this.m_localYAxis1.y=this.m_localXAxis1.x;this.m_impulse.SetZero();this.m_motorImpulse=
this.m_motorMass=0;this.m_lowerTranslation=a.lowerTranslation;this.m_upperTranslation=a.upperTranslation;this.m_maxMotorForce=a.maxMotorForce;this.m_motorSpeed=a.motorSpeed;this.m_enableLimit=a.enableLimit;this.m_enableMotor=a.enableMotor;this.m_limitState=u.e_inactiveLimit;this.m_axis.SetZero();this.m_perp.SetZero()};o.prototype.InitVelocityConstraints=function(b){var e=this.m_bodyA,c=this.m_bodyB,d,f=0;this.m_localCenterA.SetV(e.GetLocalCenter());this.m_localCenterB.SetV(c.GetLocalCenter());var h=
e.GetTransform();c.GetTransform();d=e.m_xf.R;var k=this.m_localAnchor1.x-this.m_localCenterA.x,g=this.m_localAnchor1.y-this.m_localCenterA.y,f=d.col1.x*k+d.col2.x*g,g=d.col1.y*k+d.col2.y*g,k=f;d=c.m_xf.R;var j=this.m_localAnchor2.x-this.m_localCenterB.x,r=this.m_localAnchor2.y-this.m_localCenterB.y,f=d.col1.x*j+d.col2.x*r,r=d.col1.y*j+d.col2.y*r,j=f;d=c.m_sweep.c.x+j-e.m_sweep.c.x-k;f=c.m_sweep.c.y+r-e.m_sweep.c.y-g;this.m_invMassA=e.m_invMass;this.m_invMassB=c.m_invMass;this.m_invIA=e.m_invI;this.m_invIB=
c.m_invI;this.m_axis.SetV(a.MulMV(h.R,this.m_localXAxis1));this.m_a1=(d+k)*this.m_axis.y-(f+g)*this.m_axis.x;this.m_a2=j*this.m_axis.y-r*this.m_axis.x;this.m_motorMass=this.m_invMassA+this.m_invMassB+this.m_invIA*this.m_a1*this.m_a1+this.m_invIB*this.m_a2*this.m_a2;this.m_motorMass=this.m_motorMass>Number.MIN_VALUE?1/this.m_motorMass:0;this.m_perp.SetV(a.MulMV(h.R,this.m_localYAxis1));this.m_s1=(d+k)*this.m_perp.y-(f+g)*this.m_perp.x;this.m_s2=j*this.m_perp.y-r*this.m_perp.x;h=this.m_invMassA;k=this.m_invMassB;
g=this.m_invIA;j=this.m_invIB;this.m_K.col1.x=h+k+g*this.m_s1*this.m_s1+j*this.m_s2*this.m_s2;this.m_K.col1.y=g*this.m_s1*this.m_a1+j*this.m_s2*this.m_a2;this.m_K.col2.x=this.m_K.col1.y;this.m_K.col2.y=h+k+g*this.m_a1*this.m_a1+j*this.m_a2*this.m_a2;if(this.m_enableLimit){d=this.m_axis.x*d+this.m_axis.y*f;if(a.Abs(this.m_upperTranslation-this.m_lowerTranslation)<2*l.b2_linearSlop)this.m_limitState=u.e_equalLimits;else if(d<=this.m_lowerTranslation){if(this.m_limitState!=u.e_atLowerLimit){this.m_limitState=
u.e_atLowerLimit;this.m_impulse.y=0}}else if(d>=this.m_upperTranslation){if(this.m_limitState!=u.e_atUpperLimit){this.m_limitState=u.e_atUpperLimit;this.m_impulse.y=0}}else{this.m_limitState=u.e_inactiveLimit;this.m_impulse.y=0}}else this.m_limitState=u.e_inactiveLimit;if(this.m_enableMotor==false)this.m_motorImpulse=0;if(b.warmStarting){this.m_impulse.x=this.m_impulse.x*b.dtRatio;this.m_impulse.y=this.m_impulse.y*b.dtRatio;this.m_motorImpulse=this.m_motorImpulse*b.dtRatio;b=this.m_impulse.x*this.m_perp.x+
(this.m_motorImpulse+this.m_impulse.y)*this.m_axis.x;d=this.m_impulse.x*this.m_perp.y+(this.m_motorImpulse+this.m_impulse.y)*this.m_axis.y;f=this.m_impulse.x*this.m_s1+(this.m_motorImpulse+this.m_impulse.y)*this.m_a1;h=this.m_impulse.x*this.m_s2+(this.m_motorImpulse+this.m_impulse.y)*this.m_a2;e.m_linearVelocity.x=e.m_linearVelocity.x-this.m_invMassA*b;e.m_linearVelocity.y=e.m_linearVelocity.y-this.m_invMassA*d;e.m_angularVelocity=e.m_angularVelocity-this.m_invIA*f;c.m_linearVelocity.x=c.m_linearVelocity.x+
this.m_invMassB*b;c.m_linearVelocity.y=c.m_linearVelocity.y+this.m_invMassB*d;c.m_angularVelocity=c.m_angularVelocity+this.m_invIB*h}else{this.m_impulse.SetZero();this.m_motorImpulse=0}};o.prototype.SolveVelocityConstraints=function(b){var c=this.m_bodyA,d=this.m_bodyB,f=c.m_linearVelocity,h=c.m_angularVelocity,k=d.m_linearVelocity,l=d.m_angularVelocity,g=0,j=0,r=0,o=0;if(this.m_enableMotor&&this.m_limitState!=u.e_equalLimits){o=this.m_motorMass*(this.m_motorSpeed-(this.m_axis.x*(k.x-f.x)+this.m_axis.y*
(k.y-f.y)+this.m_a2*l-this.m_a1*h));g=this.m_motorImpulse;j=b.dt*this.m_maxMotorForce;this.m_motorImpulse=a.Clamp(this.m_motorImpulse+o,-j,j);o=this.m_motorImpulse-g;g=o*this.m_axis.x;j=o*this.m_axis.y;r=o*this.m_a1;o=o*this.m_a2;f.x=f.x-this.m_invMassA*g;f.y=f.y-this.m_invMassA*j;h=h-this.m_invIA*r;k.x=k.x+this.m_invMassB*g;k.y=k.y+this.m_invMassB*j;l=l+this.m_invIB*o}j=this.m_perp.x*(k.x-f.x)+this.m_perp.y*(k.y-f.y)+this.m_s2*l-this.m_s1*h;if(this.m_enableLimit&&this.m_limitState!=u.e_inactiveLimit){r=
this.m_axis.x*(k.x-f.x)+this.m_axis.y*(k.y-f.y)+this.m_a2*l-this.m_a1*h;g=this.m_impulse.Copy();b=this.m_K.Solve(new e,-j,-r);this.m_impulse.Add(b);if(this.m_limitState==u.e_atLowerLimit)this.m_impulse.y=a.Max(this.m_impulse.y,0);else if(this.m_limitState==u.e_atUpperLimit)this.m_impulse.y=a.Min(this.m_impulse.y,0);j=-j-(this.m_impulse.y-g.y)*this.m_K.col2.x;r=this.m_K.col1.x!=0?j/this.m_K.col1.x+g.x:g.x;this.m_impulse.x=r;b.x=this.m_impulse.x-g.x;b.y=this.m_impulse.y-g.y;g=b.x*this.m_perp.x+b.y*
this.m_axis.x;j=b.x*this.m_perp.y+b.y*this.m_axis.y;r=b.x*this.m_s1+b.y*this.m_a1;o=b.x*this.m_s2+b.y*this.m_a2}else{b=this.m_K.col1.x!=0?-j/this.m_K.col1.x:0;this.m_impulse.x=this.m_impulse.x+b;g=b*this.m_perp.x;j=b*this.m_perp.y;r=b*this.m_s1;o=b*this.m_s2}f.x=f.x-this.m_invMassA*g;f.y=f.y-this.m_invMassA*j;h=h-this.m_invIA*r;k.x=k.x+this.m_invMassB*g;k.y=k.y+this.m_invMassB*j;l=l+this.m_invIB*o;c.m_linearVelocity.SetV(f);c.m_angularVelocity=h;d.m_linearVelocity.SetV(k);d.m_angularVelocity=l};o.prototype.SolvePositionConstraints=
function(){var b=this.m_bodyA,c=this.m_bodyB,f=b.m_sweep.c,h=b.m_sweep.a,k=c.m_sweep.c,r=c.m_sweep.a,o,g=0,j=0,y=0,q=0,t=0,u=0,j=false,s=0,x=d.FromAngle(h),y=d.FromAngle(r);o=x;var u=this.m_localAnchor1.x-this.m_localCenterA.x,A=this.m_localAnchor1.y-this.m_localCenterA.y,g=o.col1.x*u+o.col2.x*A,A=o.col1.y*u+o.col2.y*A,u=g;o=y;y=this.m_localAnchor2.x-this.m_localCenterB.x;q=this.m_localAnchor2.y-this.m_localCenterB.y;g=o.col1.x*y+o.col2.x*q;q=o.col1.y*y+o.col2.y*q;y=g;o=k.x+y-f.x-u;g=k.y+q-f.y-A;
if(this.m_enableLimit){this.m_axis=a.MulMV(x,this.m_localXAxis1);this.m_a1=(o+u)*this.m_axis.y-(g+A)*this.m_axis.x;this.m_a2=y*this.m_axis.y-q*this.m_axis.x;var z=this.m_axis.x*o+this.m_axis.y*g;if(a.Abs(this.m_upperTranslation-this.m_lowerTranslation)<2*l.b2_linearSlop){s=a.Clamp(z,-l.b2_maxLinearCorrection,l.b2_maxLinearCorrection);t=a.Abs(z);j=true}else if(z<=this.m_lowerTranslation){s=a.Clamp(z-this.m_lowerTranslation+l.b2_linearSlop,-l.b2_maxLinearCorrection,0);t=this.m_lowerTranslation-z;j=
true}else if(z>=this.m_upperTranslation){s=a.Clamp(z-this.m_upperTranslation+l.b2_linearSlop,0,l.b2_maxLinearCorrection);t=z-this.m_upperTranslation;j=true}}this.m_perp=a.MulMV(x,this.m_localYAxis1);this.m_s1=(o+u)*this.m_perp.y-(g+A)*this.m_perp.x;this.m_s2=y*this.m_perp.y-q*this.m_perp.x;x=new e;A=this.m_perp.x*o+this.m_perp.y*g;t=a.Max(t,a.Abs(A));u=0;if(j){j=this.m_invMassA;y=this.m_invMassB;q=this.m_invIA;o=this.m_invIB;this.m_K.col1.x=j+y+q*this.m_s1*this.m_s1+o*this.m_s2*this.m_s2;this.m_K.col1.y=
q*this.m_s1*this.m_a1+o*this.m_s2*this.m_a2;this.m_K.col2.x=this.m_K.col1.y;this.m_K.col2.y=j+y+q*this.m_a1*this.m_a1+o*this.m_a2*this.m_a2;this.m_K.Solve(x,-A,-s)}else{j=this.m_invMassA;y=this.m_invMassB;q=this.m_invIA;o=this.m_invIB;s=j+y+q*this.m_s1*this.m_s1+o*this.m_s2*this.m_s2;x.x=s!=0?-A/s:0;x.y=0}s=x.x*this.m_perp.x+x.y*this.m_axis.x;j=x.x*this.m_perp.y+x.y*this.m_axis.y;A=x.x*this.m_s1+x.y*this.m_a1;x=x.x*this.m_s2+x.y*this.m_a2;f.x=f.x-this.m_invMassA*s;f.y=f.y-this.m_invMassA*j;h=h-this.m_invIA*
A;k.x=k.x+this.m_invMassB*s;k.y=k.y+this.m_invMassB*j;r=r+this.m_invIB*x;b.m_sweep.a=h;c.m_sweep.a=r;b.SynchronizeTransform();c.SynchronizeTransform();return t<=l.b2_linearSlop&&u<=l.b2_angularSlop};myChrome.inherit(G,myChrome.Dynamics.Joints.b2JointDef);G.prototype.__super=myChrome.Dynamics.Joints.b2JointDef.prototype;G.b2LineJointDef=function(){myChrome.Dynamics.Joints.b2JointDef.b2JointDef.apply(this,arguments);this.localAnchorA=new e;this.localAnchorB=new e;this.localAxisA=new e};G.prototype.b2LineJointDef=
function(){this.__super.b2JointDef.call(this);this.type=u.e_lineJoint;this.localAxisA.Set(1,0);this.enableLimit=false;this.upperTranslation=this.lowerTranslation=0;this.enableMotor=false;this.motorSpeed=this.maxMotorForce=0};G.prototype.Initialize=function(a,b,e,c){this.bodyA=a;this.bodyB=b;this.localAnchorA=this.bodyA.GetLocalPoint(e);this.localAnchorB=this.bodyB.GetLocalPoint(e);this.localAxisA=this.bodyA.GetLocalVector(c)};myChrome.inherit(z,myChrome.Dynamics.Joints.b2Joint);z.prototype.__super=
myChrome.Dynamics.Joints.b2Joint.prototype;z.b2MouseJoint=function(){myChrome.Dynamics.Joints.b2Joint.b2Joint.apply(this,arguments);this.K=new d;this.K1=new d;this.K2=new d;this.m_localAnchor=new e;this.m_target=new e;this.m_impulse=new e;this.m_mass=new d;this.m_C=new e};z.prototype.GetAnchorA=function(){return this.m_target};z.prototype.GetAnchorB=function(){return this.m_bodyB.GetWorldPoint(this.m_localAnchor)};z.prototype.GetReactionForce=function(a){a===void 0&&(a=0);return new e(a*this.m_impulse.x,
a*this.m_impulse.y)};z.prototype.GetReactionTorque=function(){return 0};z.prototype.GetTarget=function(){return this.m_target};z.prototype.SetTarget=function(a){this.m_bodyB.IsAwake()==false&&this.m_bodyB.SetAwake(true);this.m_target=a};z.prototype.GetMaxForce=function(){return this.m_maxForce};z.prototype.SetMaxForce=function(a){a===void 0&&(a=0);this.m_maxForce=a};z.prototype.GetFrequency=function(){return this.m_frequencyHz};z.prototype.SetFrequency=function(a){a===void 0&&(a=0);this.m_frequencyHz=
a};z.prototype.GetDampingRatio=function(){return this.m_dampingRatio};z.prototype.SetDampingRatio=function(a){a===void 0&&(a=0);this.m_dampingRatio=a};z.prototype.b2MouseJoint=function(a){this.__super.b2Joint.call(this,a);this.m_target.SetV(a.target);var b=this.m_target.x-this.m_bodyB.m_xf.position.x,e=this.m_target.y-this.m_bodyB.m_xf.position.y,c=this.m_bodyB.m_xf.R;this.m_localAnchor.x=b*c.col1.x+e*c.col1.y;this.m_localAnchor.y=b*c.col2.x+e*c.col2.y;this.m_maxForce=a.maxForce;this.m_impulse.SetZero();
this.m_frequencyHz=a.frequencyHz;this.m_dampingRatio=a.dampingRatio;this.m_gamma=this.m_beta=0};z.prototype.InitVelocityConstraints=function(a){var b=this.m_bodyB,e=b.GetMass(),c=2*Math.PI*this.m_frequencyHz,d=e*c*c;this.m_gamma=a.dt*(2*e*this.m_dampingRatio*c+a.dt*d);this.m_gamma=this.m_gamma!=0?1/this.m_gamma:0;this.m_beta=a.dt*d*this.m_gamma;var d=b.m_xf.R,e=this.m_localAnchor.x-b.m_sweep.localCenter.x,c=this.m_localAnchor.y-b.m_sweep.localCenter.y,f=d.col1.x*e+d.col2.x*c,c=d.col1.y*e+d.col2.y*
c,e=f,d=b.m_invMass,f=b.m_invI;this.K1.col1.x=d;this.K1.col2.x=0;this.K1.col1.y=0;this.K1.col2.y=d;this.K2.col1.x=f*c*c;this.K2.col2.x=-f*e*c;this.K2.col1.y=-f*e*c;this.K2.col2.y=f*e*e;this.K.SetM(this.K1);this.K.AddM(this.K2);this.K.col1.x=this.K.col1.x+this.m_gamma;this.K.col2.y=this.K.col2.y+this.m_gamma;this.K.GetInverse(this.m_mass);this.m_C.x=b.m_sweep.c.x+e-this.m_target.x;this.m_C.y=b.m_sweep.c.y+c-this.m_target.y;b.m_angularVelocity=b.m_angularVelocity*0.98;this.m_impulse.x=this.m_impulse.x*
a.dtRatio;this.m_impulse.y=this.m_impulse.y*a.dtRatio;b.m_linearVelocity.x=b.m_linearVelocity.x+d*this.m_impulse.x;b.m_linearVelocity.y=b.m_linearVelocity.y+d*this.m_impulse.y;b.m_angularVelocity=b.m_angularVelocity+f*(e*this.m_impulse.y-c*this.m_impulse.x)};z.prototype.SolveVelocityConstraints=function(a){var b=this.m_bodyB,e,c=0,d=0;e=b.m_xf.R;var f=this.m_localAnchor.x-b.m_sweep.localCenter.x,h=this.m_localAnchor.y-b.m_sweep.localCenter.y,c=e.col1.x*f+e.col2.x*h,h=e.col1.y*f+e.col2.y*h,f=c,c=b.m_linearVelocity.x+
-b.m_angularVelocity*h,g=b.m_linearVelocity.y+b.m_angularVelocity*f;e=this.m_mass;c=c+this.m_beta*this.m_C.x+this.m_gamma*this.m_impulse.x;d=g+this.m_beta*this.m_C.y+this.m_gamma*this.m_impulse.y;g=-(e.col1.x*c+e.col2.x*d);d=-(e.col1.y*c+e.col2.y*d);e=this.m_impulse.x;c=this.m_impulse.y;this.m_impulse.x=this.m_impulse.x+g;this.m_impulse.y=this.m_impulse.y+d;a=a.dt*this.m_maxForce;this.m_impulse.LengthSquared()>a*a&&this.m_impulse.Multiply(a/this.m_impulse.Length());g=this.m_impulse.x-e;d=this.m_impulse.y-
c;b.m_linearVelocity.x=b.m_linearVelocity.x+b.m_invMass*g;b.m_linearVelocity.y=b.m_linearVelocity.y+b.m_invMass*d;b.m_angularVelocity=b.m_angularVelocity+b.m_invI*(f*d-h*g)};z.prototype.SolvePositionConstraints=function(){return true};myChrome.inherit(J,myChrome.Dynamics.Joints.b2JointDef);J.prototype.__super=myChrome.Dynamics.Joints.b2JointDef.prototype;J.b2MouseJointDef=function(){myChrome.Dynamics.Joints.b2JointDef.b2JointDef.apply(this,arguments);this.target=new e};J.prototype.b2MouseJointDef=
function(){this.__super.b2JointDef.call(this);this.type=u.e_mouseJoint;this.maxForce=0;this.frequencyHz=5;this.dampingRatio=0.7};myChrome.inherit(H,myChrome.Dynamics.Joints.b2Joint);H.prototype.__super=myChrome.Dynamics.Joints.b2Joint.prototype;H.b2PrismaticJoint=function(){myChrome.Dynamics.Joints.b2Joint.b2Joint.apply(this,arguments);this.m_localAnchor1=new e;this.m_localAnchor2=new e;this.m_localXAxis1=new e;this.m_localYAxis1=new e;this.m_axis=new e;this.m_perp=new e;this.m_K=new b;this.m_impulse=
new c};H.prototype.GetAnchorA=function(){return this.m_bodyA.GetWorldPoint(this.m_localAnchor1)};H.prototype.GetAnchorB=function(){return this.m_bodyB.GetWorldPoint(this.m_localAnchor2)};H.prototype.GetReactionForce=function(a){a===void 0&&(a=0);return new e(a*(this.m_impulse.x*this.m_perp.x+(this.m_motorImpulse+this.m_impulse.z)*this.m_axis.x),a*(this.m_impulse.x*this.m_perp.y+(this.m_motorImpulse+this.m_impulse.z)*this.m_axis.y))};H.prototype.GetReactionTorque=function(a){a===void 0&&(a=0);return a*
this.m_impulse.y};H.prototype.GetJointTranslation=function(){var a=this.m_bodyA,b=this.m_bodyB,e=a.GetWorldPoint(this.m_localAnchor1),c=b.GetWorldPoint(this.m_localAnchor2),b=c.x-e.x,e=c.y-e.y,a=a.GetWorldVector(this.m_localXAxis1);return a.x*b+a.y*e};H.prototype.GetJointSpeed=function(){var a=this.m_bodyA,b=this.m_bodyB,e;e=a.m_xf.R;var c=this.m_localAnchor1.x-a.m_sweep.localCenter.x,d=this.m_localAnchor1.y-a.m_sweep.localCenter.y,f=e.col1.x*c+e.col2.x*d,d=e.col1.y*c+e.col2.y*d,c=f;e=b.m_xf.R;var h=
this.m_localAnchor2.x-b.m_sweep.localCenter.x,g=this.m_localAnchor2.y-b.m_sweep.localCenter.y,f=e.col1.x*h+e.col2.x*g,g=e.col1.y*h+e.col2.y*g,h=f;e=b.m_sweep.c.x+h-(a.m_sweep.c.x+c);var f=b.m_sweep.c.y+g-(a.m_sweep.c.y+d),j=a.GetWorldVector(this.m_localXAxis1),k=a.m_linearVelocity,l=b.m_linearVelocity,a=a.m_angularVelocity,b=b.m_angularVelocity;return e*-a*j.y+f*a*j.x+(j.x*(l.x+-b*g-k.x- -a*d)+j.y*(l.y+b*h-k.y-a*c))};H.prototype.IsLimitEnabled=function(){return this.m_enableLimit};H.prototype.EnableLimit=
function(a){this.m_bodyA.SetAwake(true);this.m_bodyB.SetAwake(true);this.m_enableLimit=a};H.prototype.GetLowerLimit=function(){return this.m_lowerTranslation};H.prototype.GetUpperLimit=function(){return this.m_upperTranslation};H.prototype.SetLimits=function(a,b){a===void 0&&(a=0);b===void 0&&(b=0);this.m_bodyA.SetAwake(true);this.m_bodyB.SetAwake(true);this.m_lowerTranslation=a;this.m_upperTranslation=b};H.prototype.IsMotorEnabled=function(){return this.m_enableMotor};H.prototype.EnableMotor=function(a){this.m_bodyA.SetAwake(true);
this.m_bodyB.SetAwake(true);this.m_enableMotor=a};H.prototype.SetMotorSpeed=function(a){a===void 0&&(a=0);this.m_bodyA.SetAwake(true);this.m_bodyB.SetAwake(true);this.m_motorSpeed=a};H.prototype.GetMotorSpeed=function(){return this.m_motorSpeed};H.prototype.SetMaxMotorForce=function(a){a===void 0&&(a=0);this.m_bodyA.SetAwake(true);this.m_bodyB.SetAwake(true);this.m_maxMotorForce=a};H.prototype.GetMotorForce=function(){return this.m_motorImpulse};H.prototype.b2PrismaticJoint=function(a){this.__super.b2Joint.call(this,
a);this.m_localAnchor1.SetV(a.localAnchorA);this.m_localAnchor2.SetV(a.localAnchorB);this.m_localXAxis1.SetV(a.localAxisA);this.m_localYAxis1.x=-this.m_localXAxis1.y;this.m_localYAxis1.y=this.m_localXAxis1.x;this.m_refAngle=a.referenceAngle;this.m_impulse.SetZero();this.m_motorImpulse=this.m_motorMass=0;this.m_lowerTranslation=a.lowerTranslation;this.m_upperTranslation=a.upperTranslation;this.m_maxMotorForce=a.maxMotorForce;this.m_motorSpeed=a.motorSpeed;this.m_enableLimit=a.enableLimit;this.m_enableMotor=
a.enableMotor;this.m_limitState=u.e_inactiveLimit;this.m_axis.SetZero();this.m_perp.SetZero()};H.prototype.InitVelocityConstraints=function(b){var e=this.m_bodyA,c=this.m_bodyB,d,f=0;this.m_localCenterA.SetV(e.GetLocalCenter());this.m_localCenterB.SetV(c.GetLocalCenter());var h=e.GetTransform();c.GetTransform();d=e.m_xf.R;var k=this.m_localAnchor1.x-this.m_localCenterA.x,g=this.m_localAnchor1.y-this.m_localCenterA.y,f=d.col1.x*k+d.col2.x*g,g=d.col1.y*k+d.col2.y*g,k=f;d=c.m_xf.R;var j=this.m_localAnchor2.x-
this.m_localCenterB.x,o=this.m_localAnchor2.y-this.m_localCenterB.y,f=d.col1.x*j+d.col2.x*o,o=d.col1.y*j+d.col2.y*o,j=f;d=c.m_sweep.c.x+j-e.m_sweep.c.x-k;f=c.m_sweep.c.y+o-e.m_sweep.c.y-g;this.m_invMassA=e.m_invMass;this.m_invMassB=c.m_invMass;this.m_invIA=e.m_invI;this.m_invIB=c.m_invI;this.m_axis.SetV(a.MulMV(h.R,this.m_localXAxis1));this.m_a1=(d+k)*this.m_axis.y-(f+g)*this.m_axis.x;this.m_a2=j*this.m_axis.y-o*this.m_axis.x;this.m_motorMass=this.m_invMassA+this.m_invMassB+this.m_invIA*this.m_a1*
this.m_a1+this.m_invIB*this.m_a2*this.m_a2;if(this.m_motorMass>Number.MIN_VALUE)this.m_motorMass=1/this.m_motorMass;this.m_perp.SetV(a.MulMV(h.R,this.m_localYAxis1));this.m_s1=(d+k)*this.m_perp.y-(f+g)*this.m_perp.x;this.m_s2=j*this.m_perp.y-o*this.m_perp.x;h=this.m_invMassA;k=this.m_invMassB;g=this.m_invIA;j=this.m_invIB;this.m_K.col1.x=h+k+g*this.m_s1*this.m_s1+j*this.m_s2*this.m_s2;this.m_K.col1.y=g*this.m_s1+j*this.m_s2;this.m_K.col1.z=g*this.m_s1*this.m_a1+j*this.m_s2*this.m_a2;this.m_K.col2.x=
this.m_K.col1.y;this.m_K.col2.y=g+j;this.m_K.col2.z=g*this.m_a1+j*this.m_a2;this.m_K.col3.x=this.m_K.col1.z;this.m_K.col3.y=this.m_K.col2.z;this.m_K.col3.z=h+k+g*this.m_a1*this.m_a1+j*this.m_a2*this.m_a2;if(this.m_enableLimit){d=this.m_axis.x*d+this.m_axis.y*f;if(a.Abs(this.m_upperTranslation-this.m_lowerTranslation)<2*l.b2_linearSlop)this.m_limitState=u.e_equalLimits;else if(d<=this.m_lowerTranslation){if(this.m_limitState!=u.e_atLowerLimit){this.m_limitState=u.e_atLowerLimit;this.m_impulse.z=0}}else if(d>=
this.m_upperTranslation){if(this.m_limitState!=u.e_atUpperLimit){this.m_limitState=u.e_atUpperLimit;this.m_impulse.z=0}}else{this.m_limitState=u.e_inactiveLimit;this.m_impulse.z=0}}else this.m_limitState=u.e_inactiveLimit;if(this.m_enableMotor==false)this.m_motorImpulse=0;if(b.warmStarting){this.m_impulse.x=this.m_impulse.x*b.dtRatio;this.m_impulse.y=this.m_impulse.y*b.dtRatio;this.m_motorImpulse=this.m_motorImpulse*b.dtRatio;b=this.m_impulse.x*this.m_perp.x+(this.m_motorImpulse+this.m_impulse.z)*
this.m_axis.x;d=this.m_impulse.x*this.m_perp.y+(this.m_motorImpulse+this.m_impulse.z)*this.m_axis.y;f=this.m_impulse.x*this.m_s1+this.m_impulse.y+(this.m_motorImpulse+this.m_impulse.z)*this.m_a1;h=this.m_impulse.x*this.m_s2+this.m_impulse.y+(this.m_motorImpulse+this.m_impulse.z)*this.m_a2;e.m_linearVelocity.x=e.m_linearVelocity.x-this.m_invMassA*b;e.m_linearVelocity.y=e.m_linearVelocity.y-this.m_invMassA*d;e.m_angularVelocity=e.m_angularVelocity-this.m_invIA*f;c.m_linearVelocity.x=c.m_linearVelocity.x+
this.m_invMassB*b;c.m_linearVelocity.y=c.m_linearVelocity.y+this.m_invMassB*d;c.m_angularVelocity=c.m_angularVelocity+this.m_invIB*h}else{this.m_impulse.SetZero();this.m_motorImpulse=0}};H.prototype.SolveVelocityConstraints=function(b){var d=this.m_bodyA,f=this.m_bodyB,h=d.m_linearVelocity,k=d.m_angularVelocity,l=f.m_linearVelocity,o=f.m_angularVelocity,g=0,j=0,r=0,q=0;if(this.m_enableMotor&&this.m_limitState!=u.e_equalLimits){q=this.m_motorMass*(this.m_motorSpeed-(this.m_axis.x*(l.x-h.x)+this.m_axis.y*
(l.y-h.y)+this.m_a2*o-this.m_a1*k));g=this.m_motorImpulse;b=b.dt*this.m_maxMotorForce;this.m_motorImpulse=a.Clamp(this.m_motorImpulse+q,-b,b);q=this.m_motorImpulse-g;g=q*this.m_axis.x;j=q*this.m_axis.y;r=q*this.m_a1;q=q*this.m_a2;h.x=h.x-this.m_invMassA*g;h.y=h.y-this.m_invMassA*j;k=k-this.m_invIA*r;l.x=l.x+this.m_invMassB*g;l.y=l.y+this.m_invMassB*j;o=o+this.m_invIB*q}r=this.m_perp.x*(l.x-h.x)+this.m_perp.y*(l.y-h.y)+this.m_s2*o-this.m_s1*k;j=o-k;if(this.m_enableLimit&&this.m_limitState!=u.e_inactiveLimit){b=
this.m_axis.x*(l.x-h.x)+this.m_axis.y*(l.y-h.y)+this.m_a2*o-this.m_a1*k;g=this.m_impulse.Copy();b=this.m_K.Solve33(new c,-r,-j,-b);this.m_impulse.Add(b);if(this.m_limitState==u.e_atLowerLimit)this.m_impulse.z=a.Max(this.m_impulse.z,0);else if(this.m_limitState==u.e_atUpperLimit)this.m_impulse.z=a.Min(this.m_impulse.z,0);r=-r-(this.m_impulse.z-g.z)*this.m_K.col3.x;j=-j-(this.m_impulse.z-g.z)*this.m_K.col3.y;j=this.m_K.Solve22(new e,r,j);j.x=j.x+g.x;j.y=j.y+g.y;this.m_impulse.x=j.x;this.m_impulse.y=
j.y;b.x=this.m_impulse.x-g.x;b.y=this.m_impulse.y-g.y;b.z=this.m_impulse.z-g.z;g=b.x*this.m_perp.x+b.z*this.m_axis.x;j=b.x*this.m_perp.y+b.z*this.m_axis.y;r=b.x*this.m_s1+b.y+b.z*this.m_a1;q=b.x*this.m_s2+b.y+b.z*this.m_a2}else{b=this.m_K.Solve22(new e,-r,-j);this.m_impulse.x=this.m_impulse.x+b.x;this.m_impulse.y=this.m_impulse.y+b.y;g=b.x*this.m_perp.x;j=b.x*this.m_perp.y;r=b.x*this.m_s1+b.y;q=b.x*this.m_s2+b.y}h.x=h.x-this.m_invMassA*g;h.y=h.y-this.m_invMassA*j;k=k-this.m_invIA*r;l.x=l.x+this.m_invMassB*
g;l.y=l.y+this.m_invMassB*j;o=o+this.m_invIB*q;d.m_linearVelocity.SetV(h);d.m_angularVelocity=k;f.m_linearVelocity.SetV(l);f.m_angularVelocity=o};H.prototype.SolvePositionConstraints=function(){var b=this.m_bodyA,f=this.m_bodyB,h=b.m_sweep.c,k=b.m_sweep.a,o=f.m_sweep.c,r=f.m_sweep.a,q,g=0,j=0,y=0,u=0,t=0,j=false,s=0,x=d.FromAngle(k),A=d.FromAngle(r);q=x;var t=this.m_localAnchor1.x-this.m_localCenterA.x,z=this.m_localAnchor1.y-this.m_localCenterA.y,g=q.col1.x*t+q.col2.x*z,z=q.col1.y*t+q.col2.y*z,t=
g;q=A;A=this.m_localAnchor2.x-this.m_localCenterB.x;y=this.m_localAnchor2.y-this.m_localCenterB.y;g=q.col1.x*A+q.col2.x*y;y=q.col1.y*A+q.col2.y*y;A=g;q=o.x+A-h.x-t;g=o.y+y-h.y-z;if(this.m_enableLimit){this.m_axis=a.MulMV(x,this.m_localXAxis1);this.m_a1=(q+t)*this.m_axis.y-(g+z)*this.m_axis.x;this.m_a2=A*this.m_axis.y-y*this.m_axis.x;var C=this.m_axis.x*q+this.m_axis.y*g;if(a.Abs(this.m_upperTranslation-this.m_lowerTranslation)<2*l.b2_linearSlop){s=a.Clamp(C,-l.b2_maxLinearCorrection,l.b2_maxLinearCorrection);
u=a.Abs(C);j=true}else if(C<=this.m_lowerTranslation){s=a.Clamp(C-this.m_lowerTranslation+l.b2_linearSlop,-l.b2_maxLinearCorrection,0);u=this.m_lowerTranslation-C;j=true}else if(C>=this.m_upperTranslation){s=a.Clamp(C-this.m_upperTranslation+l.b2_linearSlop,0,l.b2_maxLinearCorrection);u=C-this.m_upperTranslation;j=true}}this.m_perp=a.MulMV(x,this.m_localYAxis1);this.m_s1=(q+t)*this.m_perp.y-(g+z)*this.m_perp.x;this.m_s2=A*this.m_perp.y-y*this.m_perp.x;x=new c;z=this.m_perp.x*q+this.m_perp.y*g;A=r-
k-this.m_refAngle;u=a.Max(u,a.Abs(z));t=a.Abs(A);if(j){j=this.m_invMassA;y=this.m_invMassB;q=this.m_invIA;g=this.m_invIB;this.m_K.col1.x=j+y+q*this.m_s1*this.m_s1+g*this.m_s2*this.m_s2;this.m_K.col1.y=q*this.m_s1+g*this.m_s2;this.m_K.col1.z=q*this.m_s1*this.m_a1+g*this.m_s2*this.m_a2;this.m_K.col2.x=this.m_K.col1.y;this.m_K.col2.y=q+g;this.m_K.col2.z=q*this.m_a1+g*this.m_a2;this.m_K.col3.x=this.m_K.col1.z;this.m_K.col3.y=this.m_K.col2.z;this.m_K.col3.z=j+y+q*this.m_a1*this.m_a1+g*this.m_a2*this.m_a2;
this.m_K.Solve33(x,-z,-A,-s)}else{j=this.m_invMassA;y=this.m_invMassB;q=this.m_invIA;g=this.m_invIB;s=q*this.m_s1+g*this.m_s2;C=q+g;this.m_K.col1.Set(j+y+q*this.m_s1*this.m_s1+g*this.m_s2*this.m_s2,s,0);this.m_K.col2.Set(s,C,0);s=this.m_K.Solve22(new e,-z,-A);x.x=s.x;x.y=s.y;x.z=0}s=x.x*this.m_perp.x+x.z*this.m_axis.x;j=x.x*this.m_perp.y+x.z*this.m_axis.y;z=x.x*this.m_s1+x.y+x.z*this.m_a1;x=x.x*this.m_s2+x.y+x.z*this.m_a2;h.x=h.x-this.m_invMassA*s;h.y=h.y-this.m_invMassA*j;k=k-this.m_invIA*z;o.x=
o.x+this.m_invMassB*s;o.y=o.y+this.m_invMassB*j;r=r+this.m_invIB*x;b.m_sweep.a=k;f.m_sweep.a=r;b.SynchronizeTransform();f.SynchronizeTransform();return u<=l.b2_linearSlop&&t<=l.b2_angularSlop};myChrome.inherit(A,myChrome.Dynamics.Joints.b2JointDef);A.prototype.__super=myChrome.Dynamics.Joints.b2JointDef.prototype;A.b2PrismaticJointDef=function(){myChrome.Dynamics.Joints.b2JointDef.b2JointDef.apply(this,arguments);this.localAnchorA=new e;this.localAnchorB=new e;this.localAxisA=new e};A.prototype.b2PrismaticJointDef=
function(){this.__super.b2JointDef.call(this);this.type=u.e_prismaticJoint;this.localAxisA.Set(1,0);this.referenceAngle=0;this.enableLimit=false;this.upperTranslation=this.lowerTranslation=0;this.enableMotor=false;this.motorSpeed=this.maxMotorForce=0};A.prototype.Initialize=function(a,b,e,c){this.bodyA=a;this.bodyB=b;this.localAnchorA=this.bodyA.GetLocalPoint(e);this.localAnchorB=this.bodyB.GetLocalPoint(e);this.localAxisA=this.bodyA.GetLocalVector(c);this.referenceAngle=this.bodyB.GetAngle()-this.bodyA.GetAngle()};
myChrome.inherit(x,myChrome.Dynamics.Joints.b2Joint);x.prototype.__super=myChrome.Dynamics.Joints.b2Joint.prototype;x.b2PulleyJoint=function(){myChrome.Dynamics.Joints.b2Joint.b2Joint.apply(this,arguments);this.m_groundAnchor1=new e;this.m_groundAnchor2=new e;this.m_localAnchor1=new e;this.m_localAnchor2=new e;this.m_u1=new e;this.m_u2=new e};x.prototype.GetAnchorA=function(){return this.m_bodyA.GetWorldPoint(this.m_localAnchor1)};x.prototype.GetAnchorB=function(){return this.m_bodyB.GetWorldPoint(this.m_localAnchor2)};
x.prototype.GetReactionForce=function(a){a===void 0&&(a=0);return new e(a*this.m_impulse*this.m_u2.x,a*this.m_impulse*this.m_u2.y)};x.prototype.GetReactionTorque=function(){return 0};x.prototype.GetGroundAnchorA=function(){var a=this.m_ground.m_xf.position.Copy();a.Add(this.m_groundAnchor1);return a};x.prototype.GetGroundAnchorB=function(){var a=this.m_ground.m_xf.position.Copy();a.Add(this.m_groundAnchor2);return a};x.prototype.GetLength1=function(){var a=this.m_bodyA.GetWorldPoint(this.m_localAnchor1),
b=a.x-(this.m_ground.m_xf.position.x+this.m_groundAnchor1.x),a=a.y-(this.m_ground.m_xf.position.y+this.m_groundAnchor1.y);return Math.sqrt(b*b+a*a)};x.prototype.GetLength2=function(){var a=this.m_bodyB.GetWorldPoint(this.m_localAnchor2),b=a.x-(this.m_ground.m_xf.position.x+this.m_groundAnchor2.x),a=a.y-(this.m_ground.m_xf.position.y+this.m_groundAnchor2.y);return Math.sqrt(b*b+a*a)};x.prototype.GetRatio=function(){return this.m_ratio};x.prototype.b2PulleyJoint=function(b){this.__super.b2Joint.call(this,
b);this.m_ground=this.m_bodyA.m_world.m_groundBody;this.m_groundAnchor1.x=b.groundAnchorA.x-this.m_ground.m_xf.position.x;this.m_groundAnchor1.y=b.groundAnchorA.y-this.m_ground.m_xf.position.y;this.m_groundAnchor2.x=b.groundAnchorB.x-this.m_ground.m_xf.position.x;this.m_groundAnchor2.y=b.groundAnchorB.y-this.m_ground.m_xf.position.y;this.m_localAnchor1.SetV(b.localAnchorA);this.m_localAnchor2.SetV(b.localAnchorB);this.m_ratio=b.ratio;this.m_constant=b.lengthA+this.m_ratio*b.lengthB;this.m_maxLength1=
a.Min(b.maxLengthA,this.m_constant-this.m_ratio*x.b2_minPulleyLength);this.m_maxLength2=a.Min(b.maxLengthB,(this.m_constant-x.b2_minPulleyLength)/this.m_ratio);this.m_limitImpulse2=this.m_limitImpulse1=this.m_impulse=0};x.prototype.InitVelocityConstraints=function(a){var b=this.m_bodyA,e=this.m_bodyB,c;c=b.m_xf.R;var d=this.m_localAnchor1.x-b.m_sweep.localCenter.x,f=this.m_localAnchor1.y-b.m_sweep.localCenter.y,h=c.col1.x*d+c.col2.x*f,f=c.col1.y*d+c.col2.y*f,d=h;c=e.m_xf.R;var g=this.m_localAnchor2.x-
e.m_sweep.localCenter.x,j=this.m_localAnchor2.y-e.m_sweep.localCenter.y,h=c.col1.x*g+c.col2.x*j,j=c.col1.y*g+c.col2.y*j,g=h;c=e.m_sweep.c.x+g;var h=e.m_sweep.c.y+j,k=this.m_ground.m_xf.position.x+this.m_groundAnchor2.x,o=this.m_ground.m_xf.position.y+this.m_groundAnchor2.y;this.m_u1.Set(b.m_sweep.c.x+d-(this.m_ground.m_xf.position.x+this.m_groundAnchor1.x),b.m_sweep.c.y+f-(this.m_ground.m_xf.position.y+this.m_groundAnchor1.y));this.m_u2.Set(c-k,h-o);c=this.m_u1.Length();h=this.m_u2.Length();c>l.b2_linearSlop?
this.m_u1.Multiply(1/c):this.m_u1.SetZero();h>l.b2_linearSlop?this.m_u2.Multiply(1/h):this.m_u2.SetZero();if(this.m_constant-c-this.m_ratio*h>0){this.m_state=u.e_inactiveLimit;this.m_impulse=0}else this.m_state=u.e_atUpperLimit;if(c<this.m_maxLength1){this.m_limitState1=u.e_inactiveLimit;this.m_limitImpulse1=0}else this.m_limitState1=u.e_atUpperLimit;if(h<this.m_maxLength2){this.m_limitState2=u.e_inactiveLimit;this.m_limitImpulse2=0}else this.m_limitState2=u.e_atUpperLimit;c=d*this.m_u1.y-f*this.m_u1.x;
h=g*this.m_u2.y-j*this.m_u2.x;this.m_limitMass1=b.m_invMass+b.m_invI*c*c;this.m_limitMass2=e.m_invMass+e.m_invI*h*h;this.m_pulleyMass=this.m_limitMass1+this.m_ratio*this.m_ratio*this.m_limitMass2;this.m_limitMass1=1/this.m_limitMass1;this.m_limitMass2=1/this.m_limitMass2;this.m_pulleyMass=1/this.m_pulleyMass;if(a.warmStarting){this.m_impulse=this.m_impulse*a.dtRatio;this.m_limitImpulse1=this.m_limitImpulse1*a.dtRatio;this.m_limitImpulse2=this.m_limitImpulse2*a.dtRatio;a=(-this.m_impulse-this.m_limitImpulse1)*
this.m_u1.x;c=(-this.m_impulse-this.m_limitImpulse1)*this.m_u1.y;h=(-this.m_ratio*this.m_impulse-this.m_limitImpulse2)*this.m_u2.x;k=(-this.m_ratio*this.m_impulse-this.m_limitImpulse2)*this.m_u2.y;b.m_linearVelocity.x=b.m_linearVelocity.x+b.m_invMass*a;b.m_linearVelocity.y=b.m_linearVelocity.y+b.m_invMass*c;b.m_angularVelocity=b.m_angularVelocity+b.m_invI*(d*c-f*a);e.m_linearVelocity.x=e.m_linearVelocity.x+e.m_invMass*h;e.m_linearVelocity.y=e.m_linearVelocity.y+e.m_invMass*k;e.m_angularVelocity=e.m_angularVelocity+
e.m_invI*(g*k-j*h)}else this.m_limitImpulse2=this.m_limitImpulse1=this.m_impulse=0};x.prototype.SolveVelocityConstraints=function(){var b=this.m_bodyA,e=this.m_bodyB,c;c=b.m_xf.R;var d=this.m_localAnchor1.x-b.m_sweep.localCenter.x,f=this.m_localAnchor1.y-b.m_sweep.localCenter.y,h=c.col1.x*d+c.col2.x*f,f=c.col1.y*d+c.col2.y*f,d=h;c=e.m_xf.R;var k=this.m_localAnchor2.x-e.m_sweep.localCenter.x,g=this.m_localAnchor2.y-e.m_sweep.localCenter.y,h=c.col1.x*k+c.col2.x*g,g=c.col1.y*k+c.col2.y*g,k=h,j=0,l=0;
if(this.m_state==u.e_atUpperLimit){c=b.m_linearVelocity.x+-b.m_angularVelocity*f;h=b.m_linearVelocity.y+b.m_angularVelocity*d;j=e.m_linearVelocity.x+-e.m_angularVelocity*g;l=e.m_linearVelocity.y+e.m_angularVelocity*k;c=-(this.m_u1.x*c+this.m_u1.y*h)-this.m_ratio*(this.m_u2.x*j+this.m_u2.y*l);l=this.m_pulleyMass*-c;c=this.m_impulse;this.m_impulse=a.Max(0,this.m_impulse+l);l=this.m_impulse-c;c=-l*this.m_u1.x;h=-l*this.m_u1.y;j=-this.m_ratio*l*this.m_u2.x;l=-this.m_ratio*l*this.m_u2.y;b.m_linearVelocity.x=
b.m_linearVelocity.x+b.m_invMass*c;b.m_linearVelocity.y=b.m_linearVelocity.y+b.m_invMass*h;b.m_angularVelocity=b.m_angularVelocity+b.m_invI*(d*h-f*c);e.m_linearVelocity.x=e.m_linearVelocity.x+e.m_invMass*j;e.m_linearVelocity.y=e.m_linearVelocity.y+e.m_invMass*l;e.m_angularVelocity=e.m_angularVelocity+e.m_invI*(k*l-g*j)}if(this.m_limitState1==u.e_atUpperLimit){c=b.m_linearVelocity.x+-b.m_angularVelocity*f;h=b.m_linearVelocity.y+b.m_angularVelocity*d;c=-(this.m_u1.x*c+this.m_u1.y*h);l=-this.m_limitMass1*
c;c=this.m_limitImpulse1;this.m_limitImpulse1=a.Max(0,this.m_limitImpulse1+l);l=this.m_limitImpulse1-c;c=-l*this.m_u1.x;h=-l*this.m_u1.y;b.m_linearVelocity.x=b.m_linearVelocity.x+b.m_invMass*c;b.m_linearVelocity.y=b.m_linearVelocity.y+b.m_invMass*h;b.m_angularVelocity=b.m_angularVelocity+b.m_invI*(d*h-f*c)}if(this.m_limitState2==u.e_atUpperLimit){j=e.m_linearVelocity.x+-e.m_angularVelocity*g;l=e.m_linearVelocity.y+e.m_angularVelocity*k;c=-(this.m_u2.x*j+this.m_u2.y*l);l=-this.m_limitMass2*c;c=this.m_limitImpulse2;
this.m_limitImpulse2=a.Max(0,this.m_limitImpulse2+l);l=this.m_limitImpulse2-c;j=-l*this.m_u2.x;l=-l*this.m_u2.y;e.m_linearVelocity.x=e.m_linearVelocity.x+e.m_invMass*j;e.m_linearVelocity.y=e.m_linearVelocity.y+e.m_invMass*l;e.m_angularVelocity=e.m_angularVelocity+e.m_invI*(k*l-g*j)}};x.prototype.SolvePositionConstraints=function(){var b=this.m_bodyA,e=this.m_bodyB,c,d=this.m_ground.m_xf.position.x+this.m_groundAnchor1.x,f=this.m_ground.m_xf.position.y+this.m_groundAnchor1.y,h=this.m_ground.m_xf.position.x+
this.m_groundAnchor2.x,k=this.m_ground.m_xf.position.y+this.m_groundAnchor2.y,g=0,j=0,o=0,r=0,q=0,t=0,s=0,x=0;if(this.m_state==u.e_atUpperLimit){c=b.m_xf.R;g=this.m_localAnchor1.x-b.m_sweep.localCenter.x;j=this.m_localAnchor1.y-b.m_sweep.localCenter.y;q=c.col1.x*g+c.col2.x*j;j=c.col1.y*g+c.col2.y*j;g=q;c=e.m_xf.R;o=this.m_localAnchor2.x-e.m_sweep.localCenter.x;r=this.m_localAnchor2.y-e.m_sweep.localCenter.y;q=c.col1.x*o+c.col2.x*r;r=c.col1.y*o+c.col2.y*r;o=q;c=b.m_sweep.c.x+g;q=b.m_sweep.c.y+j;t=
e.m_sweep.c.x+o;s=e.m_sweep.c.y+r;this.m_u1.Set(c-d,q-f);this.m_u2.Set(t-h,s-k);c=this.m_u1.Length();q=this.m_u2.Length();c>l.b2_linearSlop?this.m_u1.Multiply(1/c):this.m_u1.SetZero();q>l.b2_linearSlop?this.m_u2.Multiply(1/q):this.m_u2.SetZero();c=this.m_constant-c-this.m_ratio*q;x=a.Max(x,-c);c=a.Clamp(c+l.b2_linearSlop,-l.b2_maxLinearCorrection,0);s=-this.m_pulleyMass*c;c=-s*this.m_u1.x;q=-s*this.m_u1.y;t=-this.m_ratio*s*this.m_u2.x;s=-this.m_ratio*s*this.m_u2.y;b.m_sweep.c.x=b.m_sweep.c.x+b.m_invMass*
c;b.m_sweep.c.y=b.m_sweep.c.y+b.m_invMass*q;b.m_sweep.a=b.m_sweep.a+b.m_invI*(g*q-j*c);e.m_sweep.c.x=e.m_sweep.c.x+e.m_invMass*t;e.m_sweep.c.y=e.m_sweep.c.y+e.m_invMass*s;e.m_sweep.a=e.m_sweep.a+e.m_invI*(o*s-r*t);b.SynchronizeTransform();e.SynchronizeTransform()}if(this.m_limitState1==u.e_atUpperLimit){c=b.m_xf.R;g=this.m_localAnchor1.x-b.m_sweep.localCenter.x;j=this.m_localAnchor1.y-b.m_sweep.localCenter.y;q=c.col1.x*g+c.col2.x*j;j=c.col1.y*g+c.col2.y*j;g=q;c=b.m_sweep.c.x+g;q=b.m_sweep.c.y+j;this.m_u1.Set(c-
d,q-f);c=this.m_u1.Length();if(c>l.b2_linearSlop){this.m_u1.x=this.m_u1.x*(1/c);this.m_u1.y=this.m_u1.y*(1/c)}else this.m_u1.SetZero();c=this.m_maxLength1-c;x=a.Max(x,-c);c=a.Clamp(c+l.b2_linearSlop,-l.b2_maxLinearCorrection,0);s=-this.m_limitMass1*c;c=-s*this.m_u1.x;q=-s*this.m_u1.y;b.m_sweep.c.x=b.m_sweep.c.x+b.m_invMass*c;b.m_sweep.c.y=b.m_sweep.c.y+b.m_invMass*q;b.m_sweep.a=b.m_sweep.a+b.m_invI*(g*q-j*c);b.SynchronizeTransform()}if(this.m_limitState2==u.e_atUpperLimit){c=e.m_xf.R;o=this.m_localAnchor2.x-
e.m_sweep.localCenter.x;r=this.m_localAnchor2.y-e.m_sweep.localCenter.y;q=c.col1.x*o+c.col2.x*r;r=c.col1.y*o+c.col2.y*r;o=q;t=e.m_sweep.c.x+o;s=e.m_sweep.c.y+r;this.m_u2.Set(t-h,s-k);q=this.m_u2.Length();if(q>l.b2_linearSlop){this.m_u2.x=this.m_u2.x*(1/q);this.m_u2.y=this.m_u2.y*(1/q)}else this.m_u2.SetZero();c=this.m_maxLength2-q;x=a.Max(x,-c);c=a.Clamp(c+l.b2_linearSlop,-l.b2_maxLinearCorrection,0);s=-this.m_limitMass2*c;t=-s*this.m_u2.x;s=-s*this.m_u2.y;e.m_sweep.c.x=e.m_sweep.c.x+e.m_invMass*
t;e.m_sweep.c.y=e.m_sweep.c.y+e.m_invMass*s;e.m_sweep.a=e.m_sweep.a+e.m_invI*(o*s-r*t);e.SynchronizeTransform()}return x<l.b2_linearSlop};myChrome.postDefs.push(function(){myChrome.Dynamics.Joints.b2PulleyJoint.b2_minPulleyLength=2});myChrome.inherit(M,myChrome.Dynamics.Joints.b2JointDef);M.prototype.__super=myChrome.Dynamics.Joints.b2JointDef.prototype;M.b2PulleyJointDef=function(){myChrome.Dynamics.Joints.b2JointDef.b2JointDef.apply(this,arguments);this.groundAnchorA=new e;this.groundAnchorB=new e;
this.localAnchorA=new e;this.localAnchorB=new e};M.prototype.b2PulleyJointDef=function(){this.__super.b2JointDef.call(this);this.type=u.e_pulleyJoint;this.groundAnchorA.Set(-1,1);this.groundAnchorB.Set(1,1);this.localAnchorA.Set(-1,0);this.localAnchorB.Set(1,0);this.maxLengthB=this.lengthB=this.maxLengthA=this.lengthA=0;this.ratio=1;this.collideConnected=true};M.prototype.Initialize=function(a,b,e,c,d,f,h){h===void 0&&(h=0);this.bodyA=a;this.bodyB=b;this.groundAnchorA.SetV(e);this.groundAnchorB.SetV(c);
this.localAnchorA=this.bodyA.GetLocalPoint(d);this.localAnchorB=this.bodyB.GetLocalPoint(f);a=d.x-e.x;e=d.y-e.y;this.lengthA=Math.sqrt(a*a+e*e);e=f.x-c.x;c=f.y-c.y;this.lengthB=Math.sqrt(e*e+c*c);this.ratio=h;h=this.lengthA+this.ratio*this.lengthB;this.maxLengthA=h-this.ratio*x.b2_minPulleyLength;this.maxLengthB=(h-x.b2_minPulleyLength)/this.ratio};myChrome.inherit(D,myChrome.Dynamics.Joints.b2Joint);D.prototype.__super=myChrome.Dynamics.Joints.b2Joint.prototype;D.b2RevoluteJoint=function(){myChrome.Dynamics.Joints.b2Joint.b2Joint.apply(this,
arguments);this.K=new d;this.K1=new d;this.K2=new d;this.K3=new d;this.impulse3=new c;this.impulse2=new e;this.reduced=new e;this.m_localAnchor1=new e;this.m_localAnchor2=new e;this.m_impulse=new c;this.m_mass=new b};D.prototype.GetAnchorA=function(){return this.m_bodyA.GetWorldPoint(this.m_localAnchor1)};D.prototype.GetAnchorB=function(){return this.m_bodyB.GetWorldPoint(this.m_localAnchor2)};D.prototype.GetReactionForce=function(a){a===void 0&&(a=0);return new e(a*this.m_impulse.x,a*this.m_impulse.y)};
D.prototype.GetReactionTorque=function(a){a===void 0&&(a=0);return a*this.m_impulse.z};D.prototype.GetJointAngle=function(){return this.m_bodyB.m_sweep.a-this.m_bodyA.m_sweep.a-this.m_referenceAngle};D.prototype.GetJointSpeed=function(){return this.m_bodyB.m_angularVelocity-this.m_bodyA.m_angularVelocity};D.prototype.IsLimitEnabled=function(){return this.m_enableLimit};D.prototype.EnableLimit=function(a){this.m_enableLimit=a};D.prototype.GetLowerLimit=function(){return this.m_lowerAngle};D.prototype.GetUpperLimit=
function(){return this.m_upperAngle};D.prototype.SetLimits=function(a,b){a===void 0&&(a=0);b===void 0&&(b=0);this.m_lowerAngle=a;this.m_upperAngle=b};D.prototype.IsMotorEnabled=function(){this.m_bodyA.SetAwake(true);this.m_bodyB.SetAwake(true);return this.m_enableMotor};D.prototype.EnableMotor=function(a){this.m_enableMotor=a};D.prototype.SetMotorSpeed=function(a){a===void 0&&(a=0);this.m_bodyA.SetAwake(true);this.m_bodyB.SetAwake(true);this.m_motorSpeed=a};D.prototype.GetMotorSpeed=function(){return this.m_motorSpeed};
D.prototype.SetMaxMotorTorque=function(a){a===void 0&&(a=0);this.m_maxMotorTorque=a};D.prototype.GetMotorTorque=function(){return this.m_maxMotorTorque};D.prototype.b2RevoluteJoint=function(a){this.__super.b2Joint.call(this,a);this.m_localAnchor1.SetV(a.localAnchorA);this.m_localAnchor2.SetV(a.localAnchorB);this.m_referenceAngle=a.referenceAngle;this.m_impulse.SetZero();this.m_motorImpulse=0;this.m_lowerAngle=a.lowerAngle;this.m_upperAngle=a.upperAngle;this.m_maxMotorTorque=a.maxMotorTorque;this.m_motorSpeed=
a.motorSpeed;this.m_enableLimit=a.enableLimit;this.m_enableMotor=a.enableMotor;this.m_limitState=u.e_inactiveLimit};D.prototype.InitVelocityConstraints=function(b){var e=this.m_bodyA,c=this.m_bodyB,d,f=0;d=e.m_xf.R;var h=this.m_localAnchor1.x-e.m_sweep.localCenter.x,k=this.m_localAnchor1.y-e.m_sweep.localCenter.y,f=d.col1.x*h+d.col2.x*k,k=d.col1.y*h+d.col2.y*k,h=f;d=c.m_xf.R;var g=this.m_localAnchor2.x-c.m_sweep.localCenter.x,j=this.m_localAnchor2.y-c.m_sweep.localCenter.y,f=d.col1.x*g+d.col2.x*j,
j=d.col1.y*g+d.col2.y*j,g=f;d=e.m_invMass;var f=c.m_invMass,o=e.m_invI,r=c.m_invI;this.m_mass.col1.x=d+f+k*k*o+j*j*r;this.m_mass.col2.x=-k*h*o-j*g*r;this.m_mass.col3.x=-k*o-j*r;this.m_mass.col1.y=this.m_mass.col2.x;this.m_mass.col2.y=d+f+h*h*o+g*g*r;this.m_mass.col3.y=h*o+g*r;this.m_mass.col1.z=this.m_mass.col3.x;this.m_mass.col2.z=this.m_mass.col3.y;this.m_mass.col3.z=o+r;this.m_motorMass=1/(o+r);if(this.m_enableMotor==false)this.m_motorImpulse=0;if(this.m_enableLimit){var q=c.m_sweep.a-e.m_sweep.a-
this.m_referenceAngle;if(a.Abs(this.m_upperAngle-this.m_lowerAngle)<2*l.b2_angularSlop)this.m_limitState=u.e_equalLimits;else if(q<=this.m_lowerAngle){if(this.m_limitState!=u.e_atLowerLimit)this.m_impulse.z=0;this.m_limitState=u.e_atLowerLimit}else if(q>=this.m_upperAngle){if(this.m_limitState!=u.e_atUpperLimit)this.m_impulse.z=0;this.m_limitState=u.e_atUpperLimit}else{this.m_limitState=u.e_inactiveLimit;this.m_impulse.z=0}}else this.m_limitState=u.e_inactiveLimit;if(b.warmStarting){this.m_impulse.x=
this.m_impulse.x*b.dtRatio;this.m_impulse.y=this.m_impulse.y*b.dtRatio;this.m_motorImpulse=this.m_motorImpulse*b.dtRatio;b=this.m_impulse.x;q=this.m_impulse.y;e.m_linearVelocity.x=e.m_linearVelocity.x-d*b;e.m_linearVelocity.y=e.m_linearVelocity.y-d*q;e.m_angularVelocity=e.m_angularVelocity-o*(h*q-k*b+this.m_motorImpulse+this.m_impulse.z);c.m_linearVelocity.x=c.m_linearVelocity.x+f*b;c.m_linearVelocity.y=c.m_linearVelocity.y+f*q;c.m_angularVelocity=c.m_angularVelocity+r*(g*q-j*b+this.m_motorImpulse+
this.m_impulse.z)}else{this.m_impulse.SetZero();this.m_motorImpulse=0}};D.prototype.SolveVelocityConstraints=function(b){var e=this.m_bodyA,c=this.m_bodyB,d=0,f=0,h=0,k=0,g=0,j=e.m_linearVelocity,l=e.m_angularVelocity,o=c.m_linearVelocity,r=c.m_angularVelocity,q=e.m_invMass,s=c.m_invMass,t=e.m_invI,x=c.m_invI;if(this.m_enableMotor&&this.m_limitState!=u.e_equalLimits){f=this.m_motorMass*-(r-l-this.m_motorSpeed);h=this.m_motorImpulse;k=b.dt*this.m_maxMotorTorque;this.m_motorImpulse=a.Clamp(this.m_motorImpulse+
f,-k,k);f=this.m_motorImpulse-h;l=l-t*f;r=r+x*f}if(this.m_enableLimit&&this.m_limitState!=u.e_inactiveLimit){var b=e.m_xf.R,f=this.m_localAnchor1.x-e.m_sweep.localCenter.x,h=this.m_localAnchor1.y-e.m_sweep.localCenter.y,d=b.col1.x*f+b.col2.x*h,h=b.col1.y*f+b.col2.y*h,f=d,b=c.m_xf.R,k=this.m_localAnchor2.x-c.m_sweep.localCenter.x,g=this.m_localAnchor2.y-c.m_sweep.localCenter.y,d=b.col1.x*k+b.col2.x*g,g=b.col1.y*k+b.col2.y*g,k=d,b=o.x+-r*g-j.x- -l*h,A=o.y+r*k-j.y-l*f;this.m_mass.Solve33(this.impulse3,
-b,-A,-(r-l));if(this.m_limitState==u.e_equalLimits)this.m_impulse.Add(this.impulse3);else if(this.m_limitState==u.e_atLowerLimit){d=this.m_impulse.z+this.impulse3.z;if(d<0){this.m_mass.Solve22(this.reduced,-b,-A);this.impulse3.x=this.reduced.x;this.impulse3.y=this.reduced.y;this.impulse3.z=-this.m_impulse.z;this.m_impulse.x=this.m_impulse.x+this.reduced.x;this.m_impulse.y=this.m_impulse.y+this.reduced.y;this.m_impulse.z=0}}else if(this.m_limitState==u.e_atUpperLimit){d=this.m_impulse.z+this.impulse3.z;
if(d>0){this.m_mass.Solve22(this.reduced,-b,-A);this.impulse3.x=this.reduced.x;this.impulse3.y=this.reduced.y;this.impulse3.z=-this.m_impulse.z;this.m_impulse.x=this.m_impulse.x+this.reduced.x;this.m_impulse.y=this.m_impulse.y+this.reduced.y;this.m_impulse.z=0}}j.x=j.x-q*this.impulse3.x;j.y=j.y-q*this.impulse3.y;l=l-t*(f*this.impulse3.y-h*this.impulse3.x+this.impulse3.z);o.x=o.x+s*this.impulse3.x;o.y=o.y+s*this.impulse3.y;r=r+x*(k*this.impulse3.y-g*this.impulse3.x+this.impulse3.z)}else{b=e.m_xf.R;
f=this.m_localAnchor1.x-e.m_sweep.localCenter.x;h=this.m_localAnchor1.y-e.m_sweep.localCenter.y;d=b.col1.x*f+b.col2.x*h;h=b.col1.y*f+b.col2.y*h;f=d;b=c.m_xf.R;k=this.m_localAnchor2.x-c.m_sweep.localCenter.x;g=this.m_localAnchor2.y-c.m_sweep.localCenter.y;d=b.col1.x*k+b.col2.x*g;g=b.col1.y*k+b.col2.y*g;k=d;this.m_mass.Solve22(this.impulse2,-(o.x+-r*g-j.x- -l*h),-(o.y+r*k-j.y-l*f));this.m_impulse.x=this.m_impulse.x+this.impulse2.x;this.m_impulse.y=this.m_impulse.y+this.impulse2.y;j.x=j.x-q*this.impulse2.x;
j.y=j.y-q*this.impulse2.y;l=l-t*(f*this.impulse2.y-h*this.impulse2.x);o.x=o.x+s*this.impulse2.x;o.y=o.y+s*this.impulse2.y;r=r+x*(k*this.impulse2.y-g*this.impulse2.x)}e.m_linearVelocity.SetV(j);e.m_angularVelocity=l;c.m_linearVelocity.SetV(o);c.m_angularVelocity=r};D.prototype.SolvePositionConstraints=function(){var b=0,e,c=this.m_bodyA,d=this.m_bodyB,f=0,h=0,k=0,g=0;if(this.m_enableLimit&&this.m_limitState!=u.e_inactiveLimit){var b=d.m_sweep.a-c.m_sweep.a-this.m_referenceAngle,j=0;if(this.m_limitState==
u.e_equalLimits){b=a.Clamp(b-this.m_lowerAngle,-l.b2_maxAngularCorrection,l.b2_maxAngularCorrection);j=-this.m_motorMass*b;f=a.Abs(b)}else if(this.m_limitState==u.e_atLowerLimit){b=b-this.m_lowerAngle;f=-b;b=a.Clamp(b+l.b2_angularSlop,-l.b2_maxAngularCorrection,0);j=-this.m_motorMass*b}else if(this.m_limitState==u.e_atUpperLimit){f=b=b-this.m_upperAngle;b=a.Clamp(b-l.b2_angularSlop,0,l.b2_maxAngularCorrection);j=-this.m_motorMass*b}c.m_sweep.a=c.m_sweep.a-c.m_invI*j;d.m_sweep.a=d.m_sweep.a+d.m_invI*
j;c.SynchronizeTransform();d.SynchronizeTransform()}e=c.m_xf.R;j=this.m_localAnchor1.x-c.m_sweep.localCenter.x;b=this.m_localAnchor1.y-c.m_sweep.localCenter.y;h=e.col1.x*j+e.col2.x*b;b=e.col1.y*j+e.col2.y*b;j=h;e=d.m_xf.R;var o=this.m_localAnchor2.x-d.m_sweep.localCenter.x,r=this.m_localAnchor2.y-d.m_sweep.localCenter.y,h=e.col1.x*o+e.col2.x*r,r=e.col1.y*o+e.col2.y*r,o=h,k=d.m_sweep.c.x+o-c.m_sweep.c.x-j,g=d.m_sweep.c.y+r-c.m_sweep.c.y-b,q=k*k+g*g;e=Math.sqrt(q);var h=c.m_invMass,s=d.m_invMass,t=
c.m_invI,x=d.m_invI,A=10*l.b2_linearSlop;if(q>A*A){q=1/(h+s);k=q*-k;g=q*-g;c.m_sweep.c.x=c.m_sweep.c.x-0.5*h*k;c.m_sweep.c.y=c.m_sweep.c.y-0.5*h*g;d.m_sweep.c.x=d.m_sweep.c.x+0.5*s*k;d.m_sweep.c.y=d.m_sweep.c.y+0.5*s*g;k=d.m_sweep.c.x+o-c.m_sweep.c.x-j;g=d.m_sweep.c.y+r-c.m_sweep.c.y-b}this.K1.col1.x=h+s;this.K1.col2.x=0;this.K1.col1.y=0;this.K1.col2.y=h+s;this.K2.col1.x=t*b*b;this.K2.col2.x=-t*j*b;this.K2.col1.y=-t*j*b;this.K2.col2.y=t*j*j;this.K3.col1.x=x*r*r;this.K3.col2.x=-x*o*r;this.K3.col1.y=
-x*o*r;this.K3.col2.y=x*o*o;this.K.SetM(this.K1);this.K.AddM(this.K2);this.K.AddM(this.K3);this.K.Solve(D.tImpulse,-k,-g);k=D.tImpulse.x;g=D.tImpulse.y;c.m_sweep.c.x=c.m_sweep.c.x-c.m_invMass*k;c.m_sweep.c.y=c.m_sweep.c.y-c.m_invMass*g;c.m_sweep.a=c.m_sweep.a-c.m_invI*(j*g-b*k);d.m_sweep.c.x=d.m_sweep.c.x+d.m_invMass*k;d.m_sweep.c.y=d.m_sweep.c.y+d.m_invMass*g;d.m_sweep.a=d.m_sweep.a+d.m_invI*(o*g-r*k);c.SynchronizeTransform();d.SynchronizeTransform();return e<=l.b2_linearSlop&&f<=l.b2_angularSlop};
myChrome.postDefs.push(function(){myChrome.Dynamics.Joints.b2RevoluteJoint.tImpulse=new e});myChrome.inherit(I,myChrome.Dynamics.Joints.b2JointDef);I.prototype.__super=myChrome.Dynamics.Joints.b2JointDef.prototype;I.b2RevoluteJointDef=function(){myChrome.Dynamics.Joints.b2JointDef.b2JointDef.apply(this,arguments);this.localAnchorA=new e;this.localAnchorB=new e};I.prototype.b2RevoluteJointDef=function(){this.__super.b2JointDef.call(this);this.type=u.e_revoluteJoint;this.localAnchorA.Set(0,0);this.localAnchorB.Set(0,
0);this.motorSpeed=this.maxMotorTorque=this.upperAngle=this.lowerAngle=this.referenceAngle=0;this.enableMotor=this.enableLimit=false};I.prototype.Initialize=function(a,b,e){this.bodyA=a;this.bodyB=b;this.localAnchorA=this.bodyA.GetLocalPoint(e);this.localAnchorB=this.bodyB.GetLocalPoint(e);this.referenceAngle=this.bodyB.GetAngle()-this.bodyA.GetAngle()};myChrome.inherit(N,myChrome.Dynamics.Joints.b2Joint);N.prototype.__super=myChrome.Dynamics.Joints.b2Joint.prototype;N.b2WeldJoint=function(){myChrome.Dynamics.Joints.b2Joint.b2Joint.apply(this,
arguments);this.m_localAnchorA=new e;this.m_localAnchorB=new e;this.m_impulse=new c;this.m_mass=new b};N.prototype.GetAnchorA=function(){return this.m_bodyA.GetWorldPoint(this.m_localAnchorA)};N.prototype.GetAnchorB=function(){return this.m_bodyB.GetWorldPoint(this.m_localAnchorB)};N.prototype.GetReactionForce=function(a){a===void 0&&(a=0);return new e(a*this.m_impulse.x,a*this.m_impulse.y)};N.prototype.GetReactionTorque=function(a){a===void 0&&(a=0);return a*this.m_impulse.z};N.prototype.b2WeldJoint=
function(a){this.__super.b2Joint.call(this,a);this.m_localAnchorA.SetV(a.localAnchorA);this.m_localAnchorB.SetV(a.localAnchorB);this.m_referenceAngle=a.referenceAngle;this.m_impulse.SetZero();this.m_mass=new b};N.prototype.InitVelocityConstraints=function(a){var b,e=0,c=this.m_bodyA,d=this.m_bodyB;b=c.m_xf.R;var f=this.m_localAnchorA.x-c.m_sweep.localCenter.x,h=this.m_localAnchorA.y-c.m_sweep.localCenter.y,e=b.col1.x*f+b.col2.x*h,h=b.col1.y*f+b.col2.y*h,f=e;b=d.m_xf.R;var g=this.m_localAnchorB.x-
d.m_sweep.localCenter.x,j=this.m_localAnchorB.y-d.m_sweep.localCenter.y,e=b.col1.x*g+b.col2.x*j,j=b.col1.y*g+b.col2.y*j,g=e;b=c.m_invMass;var e=d.m_invMass,k=c.m_invI,o=d.m_invI;this.m_mass.col1.x=b+e+h*h*k+j*j*o;this.m_mass.col2.x=-h*f*k-j*g*o;this.m_mass.col3.x=-h*k-j*o;this.m_mass.col1.y=this.m_mass.col2.x;this.m_mass.col2.y=b+e+f*f*k+g*g*o;this.m_mass.col3.y=f*k+g*o;this.m_mass.col1.z=this.m_mass.col3.x;this.m_mass.col2.z=this.m_mass.col3.y;this.m_mass.col3.z=k+o;if(a.warmStarting){this.m_impulse.x=
this.m_impulse.x*a.dtRatio;this.m_impulse.y=this.m_impulse.y*a.dtRatio;this.m_impulse.z=this.m_impulse.z*a.dtRatio;c.m_linearVelocity.x=c.m_linearVelocity.x-b*this.m_impulse.x;c.m_linearVelocity.y=c.m_linearVelocity.y-b*this.m_impulse.y;c.m_angularVelocity=c.m_angularVelocity-k*(f*this.m_impulse.y-h*this.m_impulse.x+this.m_impulse.z);d.m_linearVelocity.x=d.m_linearVelocity.x+e*this.m_impulse.x;d.m_linearVelocity.y=d.m_linearVelocity.y+e*this.m_impulse.y;d.m_angularVelocity=d.m_angularVelocity+o*(g*
this.m_impulse.y-j*this.m_impulse.x+this.m_impulse.z)}else this.m_impulse.SetZero()};N.prototype.SolveVelocityConstraints=function(){var a,b=0,e=this.m_bodyA,d=this.m_bodyB,f=e.m_linearVelocity,h=e.m_angularVelocity,k=d.m_linearVelocity,g=d.m_angularVelocity,j=e.m_invMass,o=d.m_invMass,l=e.m_invI,r=d.m_invI;a=e.m_xf.R;var q=this.m_localAnchorA.x-e.m_sweep.localCenter.x,s=this.m_localAnchorA.y-e.m_sweep.localCenter.y,b=a.col1.x*q+a.col2.x*s,s=a.col1.y*q+a.col2.y*s,q=b;a=d.m_xf.R;var t=this.m_localAnchorB.x-
d.m_sweep.localCenter.x,u=this.m_localAnchorB.y-d.m_sweep.localCenter.y,b=a.col1.x*t+a.col2.x*u,u=a.col1.y*t+a.col2.y*u,t=b;a=k.x-g*u-f.x+h*s;var b=k.y+g*t-f.y-h*q,x=g-h,A=new c;this.m_mass.Solve33(A,-a,-b,-x);this.m_impulse.Add(A);f.x=f.x-j*A.x;f.y=f.y-j*A.y;h=h-l*(q*A.y-s*A.x+A.z);k.x=k.x+o*A.x;k.y=k.y+o*A.y;g=g+r*(t*A.y-u*A.x+A.z);e.m_angularVelocity=h;d.m_angularVelocity=g};N.prototype.SolvePositionConstraints=function(){var b,e=0,d=this.m_bodyA,f=this.m_bodyB;b=d.m_xf.R;var h=this.m_localAnchorA.x-
d.m_sweep.localCenter.x,k=this.m_localAnchorA.y-d.m_sweep.localCenter.y,e=b.col1.x*h+b.col2.x*k,k=b.col1.y*h+b.col2.y*k,h=e;b=f.m_xf.R;var o=this.m_localAnchorB.x-f.m_sweep.localCenter.x,g=this.m_localAnchorB.y-f.m_sweep.localCenter.y,e=b.col1.x*o+b.col2.x*g,g=b.col1.y*o+b.col2.y*g,o=e;b=d.m_invMass;var e=f.m_invMass,j=d.m_invI,r=f.m_invI,q=f.m_sweep.c.x+o-d.m_sweep.c.x-h,s=f.m_sweep.c.y+g-d.m_sweep.c.y-k,t=f.m_sweep.a-d.m_sweep.a-this.m_referenceAngle,u=10*l.b2_linearSlop,x=Math.sqrt(q*q+s*s),A=
a.Abs(t);if(x>u){j=j*1;r=r*1}this.m_mass.col1.x=b+e+k*k*j+g*g*r;this.m_mass.col2.x=-k*h*j-g*o*r;this.m_mass.col3.x=-k*j-g*r;this.m_mass.col1.y=this.m_mass.col2.x;this.m_mass.col2.y=b+e+h*h*j+o*o*r;this.m_mass.col3.y=h*j+o*r;this.m_mass.col1.z=this.m_mass.col3.x;this.m_mass.col2.z=this.m_mass.col3.y;this.m_mass.col3.z=j+r;u=new c;this.m_mass.Solve33(u,-q,-s,-t);d.m_sweep.c.x=d.m_sweep.c.x-b*u.x;d.m_sweep.c.y=d.m_sweep.c.y-b*u.y;d.m_sweep.a=d.m_sweep.a-j*(h*u.y-k*u.x+u.z);f.m_sweep.c.x=f.m_sweep.c.x+
e*u.x;f.m_sweep.c.y=f.m_sweep.c.y+e*u.y;f.m_sweep.a=f.m_sweep.a+r*(o*u.y-g*u.x+u.z);d.SynchronizeTransform();f.SynchronizeTransform();return x<=l.b2_linearSlop&&A<=l.b2_angularSlop};myChrome.inherit(K,myChrome.Dynamics.Joints.b2JointDef);K.prototype.__super=myChrome.Dynamics.Joints.b2JointDef.prototype;K.b2WeldJointDef=function(){myChrome.Dynamics.Joints.b2JointDef.b2JointDef.apply(this,arguments);this.localAnchorA=new e;this.localAnchorB=new e};K.prototype.b2WeldJointDef=function(){this.__super.b2JointDef.call(this);
this.type=u.e_weldJoint;this.referenceAngle=0};K.prototype.Initialize=function(a,b,e){this.bodyA=a;this.bodyB=b;this.localAnchorA.SetV(this.bodyA.GetLocalPoint(e));this.localAnchorB.SetV(this.bodyB.GetLocalPoint(e));this.referenceAngle=this.bodyB.GetAngle()-this.bodyA.GetAngle()}})();
(function(){var l=myChrome.Dynamics.b2DebugDraw;l.b2DebugDraw=function(){this.m_xformScale=this.m_fillAlpha=this.m_alpha=this.m_lineThickness=this.m_drawScale=1;var d=this;this.m_sprite={graphics:{clear:function(){d.m_ctx.clearRect(0,0,d.m_ctx.canvas.width,d.m_ctx.canvas.height)}}}};l.prototype._color=function(d,b){return"rgba("+((d&16711680)>>16)+","+((d&65280)>>8)+","+(d&255)+","+b+")"};l.prototype.b2DebugDraw=function(){this.m_drawFlags=0};l.prototype.SetFlags=function(d){d===void 0&&(d=0);this.m_drawFlags=
d};l.prototype.GetFlags=function(){return this.m_drawFlags};l.prototype.AppendFlags=function(d){d===void 0&&(d=0);this.m_drawFlags=this.m_drawFlags|d};l.prototype.ClearFlags=function(d){d===void 0&&(d=0);this.m_drawFlags=this.m_drawFlags&~d};l.prototype.SetSprite=function(d){this.m_ctx=d};l.prototype.GetSprite=function(){return this.m_ctx};l.prototype.SetDrawScale=function(d){d===void 0&&(d=0);this.m_drawScale=d};l.prototype.GetDrawScale=function(){return this.m_drawScale};l.prototype.SetLineThickness=
function(d){d===void 0&&(d=0);this.m_lineThickness=d;this.m_ctx.strokeWidth=d};l.prototype.GetLineThickness=function(){return this.m_lineThickness};l.prototype.SetAlpha=function(d){d===void 0&&(d=0);this.m_alpha=d};l.prototype.GetAlpha=function(){return this.m_alpha};l.prototype.SetFillAlpha=function(d){d===void 0&&(d=0);this.m_fillAlpha=d};l.prototype.GetFillAlpha=function(){return this.m_fillAlpha};l.prototype.SetXFormScale=function(d){d===void 0&&(d=0);this.m_xformScale=d};l.prototype.GetXFormScale=
function(){return this.m_xformScale};l.prototype.DrawPolygon=function(d,b,a){if(b){var e=this.m_ctx,c=this.m_drawScale;e.beginPath();e.strokeStyle=this._color(a.color,this.m_alpha);e.moveTo(d[0].x*c,d[0].y*c);for(a=1;a<b;a++)e.lineTo(d[a].x*c,d[a].y*c);e.lineTo(d[0].x*c,d[0].y*c);e.closePath();e.stroke()}};l.prototype.DrawSolidPolygon=function(d,b,a){if(b){var e=this.m_ctx,c=this.m_drawScale;e.beginPath();e.strokeStyle=this._color(a.color,this.m_alpha);e.fillStyle=this._color(a.color,this.m_fillAlpha);
e.moveTo(d[0].x*c,d[0].y*c);for(a=1;a<b;a++)e.lineTo(d[a].x*c,d[a].y*c);e.lineTo(d[0].x*c,d[0].y*c);e.closePath();e.fill();e.stroke()}};l.prototype.DrawCircle=function(d,b,a){if(b){var e=this.m_ctx,c=this.m_drawScale;e.beginPath();e.strokeStyle=this._color(a.color,this.m_alpha);e.arc(d.x*c,d.y*c,b*c,0,Math.PI*2,true);e.closePath();e.stroke()}};l.prototype.DrawSolidCircle=function(d,b,a,e){if(b){var c=this.m_ctx,h=this.m_drawScale,f=d.x*h,k=d.y*h;c.moveTo(0,0);c.beginPath();c.strokeStyle=this._color(e.color,
this.m_alpha);c.fillStyle=this._color(e.color,this.m_fillAlpha);c.arc(f,k,b*h,0,Math.PI*2,true);c.moveTo(f,k);c.lineTo((d.x+a.x*b)*h,(d.y+a.y*b)*h);c.closePath();c.fill();c.stroke()}};l.prototype.DrawSegment=function(d,b,a){var e=this.m_ctx,c=this.m_drawScale;e.strokeStyle=this._color(a.color,this.m_alpha);e.beginPath();e.moveTo(d.x*c,d.y*c);e.lineTo(b.x*c,b.y*c);e.closePath();e.stroke()};l.prototype.DrawTransform=function(d){var b=this.m_ctx,a=this.m_drawScale;b.beginPath();b.strokeStyle=this._color(16711680,
this.m_alpha);b.moveTo(d.position.x*a,d.position.y*a);b.lineTo((d.position.x+this.m_xformScale*d.R.col1.x)*a,(d.position.y+this.m_xformScale*d.R.col1.y)*a);b.strokeStyle=this._color(65280,this.m_alpha);b.moveTo(d.position.x*a,d.position.y*a);b.lineTo((d.position.x+this.m_xformScale*d.R.col2.x)*a,(d.position.y+this.m_xformScale*d.R.col2.y)*a);b.closePath();b.stroke()}})();var i;for(i=0;i<myChrome.postDefs.length;++i)myChrome.postDefs[i]();delete myChrome.postDefs;
(function(l){var d=function(){throw"UID cannot be instantiated";};d._nextID=0;d.get=function(){return d._nextID++};l.UID=d})(window);
(function(l){var d=function(){throw"Ticker cannot be instantiated.";};d.useRAF=null;d.animationTarget=null;d._listeners=null;d._pauseable=null;d._paused=false;d._inited=false;d._startTime=0;d._pausedTime=0;d._ticks=0;d._pausedTickers=0;d._interval=50;d._lastTime=0;d._times=null;d._tickTimes=null;d._rafActive=false;d._timeoutID=null;d.addListener=function(b,a){d._inited||d.init();d.removeListener(b);d._pauseable[d._listeners.length]=a==null?true:a;d._listeners.push(b)};d.init=function(){d._inited=
true;d._times=[];d._tickTimes=[];d._pauseable=[];d._listeners=[];d._times.push(d._lastTime=d._startTime=d._getTime());d.setInterval(d._interval)};d.removeListener=function(b){d._listeners!=null&&(b=d._listeners.indexOf(b),b!=-1&&(d._listeners.splice(b,1),d._pauseable.splice(b,1)))};d.removeAllListeners=function(){d._listeners=[];d._pauseable=[]};d.setInterval=function(b){d._interval=b;d._inited&&d._setupTick()};d.getInterval=function(){return d._interval};d.setFPS=function(b){d.setInterval(1E3/b)};
d.getFPS=function(){return 1E3/d._interval};d.getMeasuredFPS=function(b){if(d._times.length<2)return-1;b==null&&(b=d.getFPS()|0);b=Math.min(d._times.length-1,b);return 1E3/((d._times[0]-d._times[b])/b)};d.setPaused=function(b){d._paused=b};d.getPaused=function(){return d._paused};d.getTime=function(b){return d._getTime()-d._startTime-(b?d._pausedTime:0)};d.getTicks=function(b){return d._ticks-(b?d._pausedTickers:0)};d._handleAF=function(b){b-d._lastTime>=d._interval-1&&d._tick();d._rafActive=false;
d._setupTick()};d._handleTimeout=function(){d._tick();d.timeoutID=null;d._setupTick()};d._setupTick=function(){if(!(d._rafActive||d.timeoutID!=null)){if(d.useRAF){var b=l.requestAnimationFrame||l.webkitRequestAnimationFrame||l.mozRequestAnimationFrame||l.oRequestAnimationFrame||l.msRequestAnimationFrame;if(b){b(d._handleAF,d.animationTarget);d._rafActive=true;return}}d.timeoutID=setTimeout(d._handleTimeout,d._interval)}};d._tick=function(){d._ticks++;var b=d._getTime(),a=b-d._lastTime,e=d._paused;
e&&(d._pausedTickers++,d._pausedTime=d._pausedTime+a);d._lastTime=b;for(var c=d._pauseable,h=d._listeners.slice(),f=h?h.length:0,k=0;k<f;k++){var l=c[k],t=h[k];t==null||e&&l||t.tick==null||t.tick(a,e)}for(d._tickTimes.unshift(d._getTime()-b);d._tickTimes.length>100;)d._tickTimes.pop();for(d._times.unshift(b);d._times.length>100;)d._times.pop()};d._getTime=function(){return(new Date).getTime()};l.Ticker=d})(window);
(function(l){var d=function(a,b,c,d,f){this.initialize(a,b,c,d,f)},b=d.prototype;b.stageX=0;b.stageY=0;b.type=null;b.nativeEvent=null;b.onMouseMove=null;b.onMouseUp=null;b.target=null;b.initialize=function(a,b,c,d,f){this.type=a;this.stageX=b;this.stageY=c;this.target=d;this.nativeEvent=f};b.clone=function(){return new d(this.type,this.stageX,this.stageY,this.target,this.nativeEvent)};b.toString=function(){return"[MouseEvent (type="+this.type+" stageX="+this.stageX+" stageY="+this.stageY+")]"};l.MouseEvent=
d})(window);
(function(l){var d=function(a,b,c,d,f,k){this.initialize(a,b,c,d,f,k)},b=d.prototype;d.identity=null;d.DEG_TO_RAD=Math.PI/180;b.a=1;b.b=0;b.c=0;b.d=1;b.tx=0;b.ty=0;b.alpha=1;b.shadow=null;b.compositeOperation=null;b.initialize=function(a,b,c,d,f,k){if(a!=null)this.a=a;this.b=b||0;this.c=c||0;if(d!=null)this.d=d;this.tx=f||0;this.ty=k||0};b.prepend=function(a,b,c,d,f,k){var l=this.tx;if(a!=1||b!=0||c!=0||d!=1){var t=this.a,q=this.c;this.a=t*a+this.b*c;this.b=t*b+this.b*d;this.c=q*a+this.d*c;this.d=
q*b+this.d*d}this.tx=l*a+this.ty*c+f;this.ty=l*b+this.ty*d+k};b.append=function(a,b,c,d,f,k){var l=this.a,t=this.b,q=this.c,s=this.d;this.a=a*l+b*q;this.b=a*t+b*s;this.c=c*l+d*q;this.d=c*t+d*s;this.tx=f*l+k*q+this.tx;this.ty=f*t+k*s+this.ty};b.prependMatrix=function(a){this.prepend(a.a,a.b,a.c,a.d,a.tx,a.ty);this.prependProperties(a.alpha,a.shadow,a.compositeOperation)};b.appendMatrix=function(a){this.append(a.a,a.b,a.c,a.d,a.tx,a.ty);this.appendProperties(a.alpha,a.shadow,a.compositeOperation)};
b.prependTransform=function(a,b,c,h,f,k,l,t,q){if(f%360)var s=f*d.DEG_TO_RAD,f=Math.cos(s),s=Math.sin(s);else{f=1;s=0}if(t||q){this.tx=this.tx-t;this.ty=this.ty-q}k||l?(k=k*d.DEG_TO_RAD,l=l*d.DEG_TO_RAD,this.prepend(f*c,s*c,-s*h,f*h,0,0),this.prepend(Math.cos(l),Math.sin(l),-Math.sin(k),Math.cos(k),a,b)):this.prepend(f*c,s*c,-s*h,f*h,a,b)};b.appendTransform=function(a,b,c,h,f,k,l,t,q){if(f%360)var s=f*d.DEG_TO_RAD,f=Math.cos(s),s=Math.sin(s);else{f=1;s=0}k||l?(k=k*d.DEG_TO_RAD,l=l*d.DEG_TO_RAD,this.append(Math.cos(l),
Math.sin(l),-Math.sin(k),Math.cos(k),a,b),this.append(f*c,s*c,-s*h,f*h,0,0)):this.append(f*c,s*c,-s*h,f*h,a,b);if(t||q){this.tx=this.tx-(t*this.a+q*this.c);this.ty=this.ty-(t*this.b+q*this.d)}};b.rotate=function(a){var b=Math.cos(a),a=Math.sin(a),c=this.a,d=this.c,f=this.tx;this.a=c*b-this.b*a;this.b=c*a+this.b*b;this.c=d*b-this.d*a;this.d=d*a+this.d*b;this.tx=f*b-this.ty*a;this.ty=f*a+this.ty*b};b.skew=function(a,b){a=a*d.DEG_TO_RAD;b=b*d.DEG_TO_RAD;this.append(Math.cos(b),Math.sin(b),-Math.sin(a),
Math.cos(a),0,0)};b.scale=function(a,b){this.a=this.a*a;this.d=this.d*b;this.tx=this.tx*a;this.ty=this.ty*b};b.translate=function(a,b){this.tx=this.tx+a;this.ty=this.ty+b};b.identity=function(){this.alpha=this.a=this.d=1;this.b=this.c=this.tx=this.ty=0;this.shadow=this.compositeOperation=null};b.invert=function(){var a=this.a,b=this.b,c=this.c,d=this.d,f=this.tx,k=a*d-b*c;this.a=d/k;this.b=-b/k;this.c=-c/k;this.d=a/k;this.tx=(c*this.ty-d*f)/k;this.ty=-(a*this.ty-b*f)/k};b.isIdentity=function(){return this.tx==
0&&this.ty==0&&this.a==1&&this.b==0&&this.c==0&&this.d==1};b.decompose=function(a){a==null&&(a={});a.x=this.tx;a.y=this.ty;a.scaleX=Math.sqrt(this.a*this.a+this.b*this.b);a.scaleY=Math.sqrt(this.c*this.c+this.d*this.d);var b=Math.atan2(-this.c,this.d),c=Math.atan2(this.b,this.a);b==c?(a.rotation=c/d.DEG_TO_RAD,this.a<0&&this.d>=0&&(a.rotation=a.rotation+(a.rotation<=0?180:-180)),a.skewX=a.skewY=0):(a.skewX=b/d.DEG_TO_RAD,a.skewY=c/d.DEG_TO_RAD);return a};b.reinitialize=function(a,b,c,d,f,k,l,t,q){this.initialize(a,
b,c,d,f,k);this.alpha=l||1;this.shadow=t;this.compositeOperation=q;return this};b.appendProperties=function(a,b,c){this.alpha=this.alpha*a;this.shadow=b||this.shadow;this.compositeOperation=c||this.compositeOperation};b.prependProperties=function(a,b,c){this.alpha=this.alpha*a;this.shadow=this.shadow||b;this.compositeOperation=this.compositeOperation||c};b.clone=function(){var a=new d(this.a,this.b,this.c,this.d,this.tx,this.ty);a.shadow=this.shadow;a.alpha=this.alpha;a.compositeOperation=this.compositeOperation;
return a};b.toString=function(){return"[Matrix2D (a="+this.a+" b="+this.b+" c="+this.c+" d="+this.d+" tx="+this.tx+" ty="+this.ty+")]"};d.identity=new d(1,0,0,1,0,0);l.Matrix2D=d})(window);(function(l){var d=function(a,b){this.initialize(a,b)},b=d.prototype;b.x=0;b.y=0;b.initialize=function(a,b){this.x=a==null?0:a;this.y=b==null?0:b};b.clone=function(){return new d(this.x,this.y)};b.toString=function(){return"[Point (x="+this.x+" y="+this.y+")]"};l.Point=d})(window);
(function(l){var d=function(a,b,c,d){this.initialize(a,b,c,d)},b=d.prototype;b.x=0;b.y=0;b.width=0;b.height=0;b.initialize=function(a,b,c,d){this.x=a==null?0:a;this.y=b==null?0:b;this.width=c==null?0:c;this.height=d==null?0:d};b.clone=function(){return new d(this.x,this.y,this.width,this.height)};b.toString=function(){return"[Rectangle (x="+this.x+" y="+this.y+" width="+this.width+" height="+this.height+")]"};l.Rectangle=d})(window);
(function(l){var d=function(a,b,c,d){this.initialize(a,b,c,d)},b=d.prototype;d.identity=null;b.color=null;b.offsetX=0;b.offsetY=0;b.blur=0;b.initialize=function(a,b,c,d){this.color=a;this.offsetX=b;this.offsetY=c;this.blur=d};b.toString=function(){return"[Shadow]"};b.clone=function(){return new d(this.color,this.offsetX,this.offsetY,this.blur)};d.identity=new d("transparent",0,0,0);l.Shadow=d})(window);
(function(l){var d=function(a){this.initialize(a)},b=d.prototype;b.complete=true;b._animations=null;b._frames=null;b._images=null;b._data=null;b._loadCount=0;b._frameHeight=0;b._frameWidth=0;b._numFrames=0;b._regX=0;b._regY=0;b.initialize=function(a){var b,c,d;if(a!=null){if(a.images&&(c=a.images.length)>0){d=this._images=[];for(b=0;b<c;b++){var f=a.images[b];if(!(f instanceof Image)){var k=f,f=new Image;f.src=k}d.push(f);if(!f.getContext&&!f.complete){this._loadCount++;this.complete=false;(function(a){f.onload=
function(){a._handleImageLoad()}})(this)}}}if(a.frames!=null)if(a.frames instanceof Array){this._frames=[];d=a.frames;b=0;for(c=d.length;b<c;b++){k=d[b];this._frames.push({image:this._images[k[4]?k[4]:0],rect:new Rectangle(k[0],k[1],k[2],k[3]),regX:k[5]||0,regY:k[6]||0})}}else{c=a.frames;this._frameWidth=c.width;this._frameHeight=c.height;this._regX=c.regX||0;this._regY=c.regY||0;this._numFrames=c.count;this._loadCount==0&&this._calculateFrames()}if((c=a.animations)!=null){this._animations=[];this._data=
{};for(var l in c){a={name:l};k=c[l];if(isNaN(k))if(k instanceof Array){a.frequency=k[3];a.next=k[2];d=a.frames=[];for(b=k[0];b<=k[1];b++)d.push(b)}else{a.frequency=k.frequency;a.next=k.next;d=a.frames=k.frames.slice(0)}else d=a.frames=[k];a.next=d.length<2||a.next==false?null:a.next==true?l:a.next;if(!a.frequency)a.frequency=1;this._animations.push(l);this._data[l]=a}}}};b.getNumFrames=function(a){return a==null?this._frames?this._frames.length:this._numFrames:(a=this._data[a],a==null?0:a.frames.length)};
b.getAnimations=function(){return this._animations.slice(0)};b.getAnimation=function(a){return this._data[a]};b.getFrame=function(a){return this.complete&&this._frames&&(frame=this._frames[a])?frame:null};b.toString=function(){return"[SpriteSheet]"};b.clone=function(){var a=new d;a.complete=this.complete;a._animations=this._animations;a._frames=this._frames;a._images=this._images;a._data=this._data;a._frameHeight=this._frameHeight;a._frameWidth=this._frameWidth;a._numFrames=this._numFrames;a._loadCount=
this._loadCount;return a};b._handleImageLoad=function(){if(--this._loadCount==0){this._calculateFrames();this.complete=true}};b._calculateFrames=function(){if(!(this._frames||this._frameWidth==0)){this._frames=[];for(var a=0,b=this._frameWidth,c=this._frameHeight,d=0,f=this._images;d<f.length;d++){for(var k=f[d],l=(k.width+1)/b|0,t=(k.height+1)/c|0,t=this._numFrames>0?Math.min(this._numFrames-a,l*t):l*t,q=0;q<t;q++)this._frames.push({image:k,rect:new Rectangle(q%l*b,(q/l|0)*c,b,c),regX:this._regX,
regY:this._regY});a=a+t}this._numFrames=a}};l.SpriteSheet=d})(window);
(function(l){function d(a,b){this.f=a;this.params=b}d.prototype.exec=function(a){this.f.apply(a,this.params)};var b=function(){this.initialize()},a=b.prototype;b.getRGB=function(a,b,d,f){a!=null&&d==null&&(f=b,d=a&255,b=a>>8&255,a=a>>16&255);return f==null?"rgb("+a+","+b+","+d+")":"rgba("+a+","+b+","+d+","+f+")"};b.getHSL=function(a,b,d,f){return f==null?"hsl("+a%360+","+b+"%,"+d+"%)":"hsla("+a%360+","+b+"%,"+d+"%,"+f+")"};b.STROKE_CAPS_MAP=["butt","round","square"];b.STROKE_JOINTS_MAP=["miter","round",
"bevel"];b._ctx=document.createElement("canvas").getContext("2d");b.beginCmd=new d(b._ctx.beginPath,[]);b.fillCmd=new d(b._ctx.fill,[]);b.strokeCmd=new d(b._ctx.stroke,[]);a._strokeInstructions=null;a._strokeStyleInstructions=null;a._fillInstructions=null;a._instructions=null;a._oldInstructions=null;a._activeInstructions=null;a._active=false;a._dirty=false;a.initialize=function(){this.clear();this._ctx=b._ctx};a.draw=function(a){this._dirty&&this._updateInstructions();for(var b=this._instructions,
d=0,f=b.length;d<f;d++)b[d].exec(a)};a.moveTo=function(a,b){this._activeInstructions.push(new d(this._ctx.moveTo,[a,b]));return this};a.lineTo=function(a,b){this._dirty=this._active=true;this._activeInstructions.push(new d(this._ctx.lineTo,[a,b]));return this};a.arcTo=function(a,b,h,f,k){this._dirty=this._active=true;this._activeInstructions.push(new d(this._ctx.arcTo,[a,b,h,f,k]));return this};a.arc=function(a,b,h,f,k,l){this._dirty=this._active=true;l==null&&(l=false);this._activeInstructions.push(new d(this._ctx.arc,
[a,b,h,f,k,l]));return this};a.quadraticCurveTo=function(a,b,h,f){this._dirty=this._active=true;this._activeInstructions.push(new d(this._ctx.quadraticCurveTo,[a,b,h,f]));return this};a.bezierCurveTo=function(a,b,h,f,k,l){this._dirty=this._active=true;this._activeInstructions.push(new d(this._ctx.bezierCurveTo,[a,b,h,f,k,l]));return this};a.rect=function(a,b,h,f){this._dirty=this._active=true;this._activeInstructions.push(new d(this._ctx.rect,[a,b,h,f]));return this};a.closePath=function(){if(this._active){this._dirty=
true;this._activeInstructions.push(new d(this._ctx.closePath,[]))}return this};a.clear=function(){this._instructions=[];this._oldInstructions=[];this._activeInstructions=[];this._strokeStyleInstructions=this._strokeInstructions=this._fillInstructions=null;this._active=this._dirty=false;return this};a.beginFill=function(a){this._active&&this._newPath();this._fillInstructions=a?[new d(this._setProp,["fillStyle",a])]:null;return this};a.beginLinearGradientFill=function(a,b,h,f,k,l){this._active&&this._newPath();
h=this._ctx.createLinearGradient(h,f,k,l);f=0;for(k=a.length;f<k;f++)h.addColorStop(b[f],a[f]);this._fillInstructions=[new d(this._setProp,["fillStyle",h])];return this};a.beginRadialGradientFill=function(a,b,h,f,k,l,t,q){this._active&&this._newPath();h=this._ctx.createRadialGradient(h,f,k,l,t,q);f=0;for(k=a.length;f<k;f++)h.addColorStop(b[f],a[f]);this._fillInstructions=[new d(this._setProp,["fillStyle",h])];return this};a.beginBitmapFill=function(a,b){this._active&&this._newPath();var h=this._ctx.createPattern(a,
b||"");this._fillInstructions=[new d(this._setProp,["fillStyle",h])];return this};a.endFill=function(){this.beginFill(null);return this};a.setStrokeStyle=function(a,c,h,f){this._active&&this._newPath();this._strokeStyleInstructions=[new d(this._setProp,["lineWidth",a==null?"1":a]),new d(this._setProp,["lineCap",c==null?"butt":isNaN(c)?c:b.STROKE_CAPS_MAP[c]]),new d(this._setProp,["lineJoin",h==null?"miter":isNaN(h)?h:b.STROKE_JOINTS_MAP[h]]),new d(this._setProp,["miterLimit",f==null?"10":f])];return this};
a.beginStroke=function(a){this._active&&this._newPath();this._strokeInstructions=a?[new d(this._setProp,["strokeStyle",a])]:null;return this};a.beginLinearGradientStroke=function(a,b,h,f,k,l){this._active&&this._newPath();h=this._ctx.createLinearGradient(h,f,k,l);f=0;for(k=a.length;f<k;f++)h.addColorStop(b[f],a[f]);this._strokeInstructions=[new d(this._setProp,["strokeStyle",h])];return this};a.beginRadialGradientStroke=function(a,b,h,f,k,l,t,q){this._active&&this._newPath();h=this._ctx.createRadialGradient(h,
f,k,l,t,q);f=0;for(k=a.length;f<k;f++)h.addColorStop(b[f],a[f]);this._strokeInstructions=[new d(this._setProp,["strokeStyle",h])];return this};a.beginBitmapStroke=function(a,b){this._active&&this._newPath();var h=this._ctx.createPattern(a,b||"");this._strokeInstructions=[new d(this._setProp,["strokeStyle",h])];return this};a.endStroke=function(){this.beginStroke(null);return this};a.curveTo=a.quadraticCurveTo;a.drawRect=a.rect;a.drawRoundRect=function(a,b,d,f,k){this.drawRoundRectComplex(a,b,d,f,
k,k,k,k);return this};a.drawRoundRectComplex=function(a,b,h,f,k,l,t,q){this._dirty=this._active=true;this._activeInstructions.push(new d(this._ctx.moveTo,[a+k,b]),new d(this._ctx.lineTo,[a+h-l,b]),new d(this._ctx.arc,[a+h-l,b+l,l,-Math.PI/2,0,false]),new d(this._ctx.lineTo,[a+h,b+f-t]),new d(this._ctx.arc,[a+h-t,b+f-t,t,0,Math.PI/2,false]),new d(this._ctx.lineTo,[a+q,b+f]),new d(this._ctx.arc,[a+q,b+f-q,q,Math.PI/2,Math.PI,false]),new d(this._ctx.lineTo,[a,b+k]),new d(this._ctx.arc,[a+k,b+k,k,Math.PI,
Math.PI*3/2,false]));return this};a.drawCircle=function(a,b,d){this.arc(a,b,d,0,Math.PI*2);return this};a.drawEllipse=function(a,b,h,f){this._dirty=this._active=true;var k=h/2*0.5522848,l=f/2*0.5522848,t=a+h,q=b+f,h=a+h/2,f=b+f/2;this._activeInstructions.push(new d(this._ctx.moveTo,[a,f]),new d(this._ctx.bezierCurveTo,[a,f-l,h-k,b,h,b]),new d(this._ctx.bezierCurveTo,[h+k,b,t,f-l,t,f]),new d(this._ctx.bezierCurveTo,[t,f+l,h+k,q,h,q]),new d(this._ctx.bezierCurveTo,[h-k,q,a,f+l,a,f]));return this};a.drawPolyStar=
function(a,b,h,f,k,l){this._dirty=this._active=true;k==null&&(k=0);k=1-k;l==null?l=0:l=l/(180/Math.PI);var t=Math.PI/f;this._activeInstructions.push(new d(this._ctx.moveTo,[a+Math.cos(l)*h,b+Math.sin(l)*h]));for(var q=0;q<f;q++){l=l+t;k!=1&&this._activeInstructions.push(new d(this._ctx.lineTo,[a+Math.cos(l)*h*k,b+Math.sin(l)*h*k]));l=l+t;this._activeInstructions.push(new d(this._ctx.lineTo,[a+Math.cos(l)*h,b+Math.sin(l)*h]))}return this};a.clone=function(){var a=new b;a._instructions=this._instructions.slice();
a._activeInstructions=this._activeInstructions.slice();a._oldInstructions=this._oldInstructions.slice();if(this._fillInstructions)a._fillInstructions=this._fillInstructions.slice();if(this._strokeInstructions)a._strokeInstructions=this._strokeInstructions.slice();if(this._strokeStyleInstructions)a._strokeStyleInstructions=this._strokeStyleInstructions.slice();a._active=this._active;a._dirty=this._dirty;return a};a.toString=function(){return"[Graphics]"};a.mt=a.moveTo;a.lt=a.lineTo;a.at=a.arcTo;a.bt=
a.bezierCurveTo;a.qt=a.quadraticCurveTo;a.a=a.arc;a.r=a.rect;a.cp=a.closePath;a.c=a.clear;a.f=a.beginFill;a.lf=a.beginLinearGradientFill;a.rf=a.beginRadialGradientFill;a.bf=a.beginBitmapFill;a.ef=a.endFill;a.ss=a.setStrokeStyle;a.s=a.beginStroke;a.ls=a.beginLinearGradientStroke;a.rs=a.beginRadialGradientStroke;a.bs=a.beginBitmapStroke;a.es=a.endStroke;a.dr=a.drawRect;a.rr=a.drawRoundRect;a.rc=a.drawRoundRectComplex;a.dc=a.drawCircle;a.de=a.drawEllipse;a.dp=a.drawPolyStar;a._updateInstructions=function(){this._instructions=
this._oldInstructions.slice();this._instructions.push(b.beginCmd);this._fillInstructions&&this._instructions.push.apply(this._instructions,this._fillInstructions);this._strokeInstructions&&(this._instructions.push.apply(this._instructions,this._strokeInstructions),this._strokeStyleInstructions&&this._instructions.push.apply(this._instructions,this._strokeStyleInstructions));this._instructions.push.apply(this._instructions,this._activeInstructions);this._fillInstructions&&this._instructions.push(b.fillCmd);
this._strokeInstructions&&this._instructions.push(b.strokeCmd)};a._newPath=function(){this._dirty&&this._updateInstructions();this._oldInstructions=this._instructions;this._activeInstructions=[];this._active=this._dirty=false};a._setProp=function(a,b){this[a]=b};l.Graphics=b})(window);
(function(l){var d=function(){this.initialize()},b=d.prototype;d.suppressCrossDomainErrors=false;d._hitTestCanvas=document.createElement("canvas");d._hitTestCanvas.width=d._hitTestCanvas.height=1;d._hitTestContext=d._hitTestCanvas.getContext("2d");d._nextCacheID=1;b.alpha=1;b.cacheCanvas=null;b.id=-1;b.mouseEnabled=true;b.name=null;b.parent=null;b.regX=0;b.regY=0;b.rotation=0;b.scaleX=1;b.scaleY=1;b.skewX=0;b.skewY=0;b.shadow=null;b.visible=true;b.x=0;b.y=0;b.compositeOperation=null;b.snapToPixel=
false;b.onPress=null;b.onClick=null;b.onDoubleClick=null;b.onMouseOver=null;b.onMouseOut=null;b.tick=null;b.filters=null;b.cacheID=0;b._cacheOffsetX=0;b._cacheOffsetY=0;b._cacheDataURLID=0;b._cacheDataURL=null;b._matrix=null;b.initialize=function(){this.id=UID.get();this._matrix=new Matrix2D};b.isVisible=function(){return this.visible&&this.alpha>0&&this.scaleX!=0&&this.scaleY!=0};b.draw=function(a,b){if(b||!this.cacheCanvas)return false;a.drawImage(this.cacheCanvas,this._cacheOffsetX,this._cacheOffsetY);
return true};b.cache=function(a,b,c,h){if(this.cacheCanvas==null)this.cacheCanvas=document.createElement("canvas");var f=this.cacheCanvas.getContext("2d");this.cacheCanvas.width=c;this.cacheCanvas.height=h;f.clearRect(0,0,c+1,h+1);f.setTransform(1,0,0,1,-a,-b);this.draw(f,true,this._matrix.reinitialize(1,0,0,1,-a,-b));this._cacheOffsetX=a;this._cacheOffsetY=b;this._applyFilters();this.cacheID=d._nextCacheID++};b.updateCache=function(a){if(this.cacheCanvas==null)throw"cache() must be called before updateCache()";
var b=this.cacheCanvas.getContext("2d");b.setTransform(1,0,0,1,-this._cacheOffsetX,-this._cacheOffsetY);a?b.globalCompositeOperation=a:b.clearRect(0,0,this.cacheCanvas.width+1,this.cacheCanvas.height+1);this.draw(b,true);if(a)b.globalCompositeOperation="source-over";this._applyFilters();this.cacheID=d._nextCacheID++};b.uncache=function(){this._cacheDataURL=this.cacheCanvas=null;this.cacheID=this._cacheOffsetX=this._cacheOffsetY=0};b.getCacheDataURL=function(){if(!this.cacheCanvas)return null;if(this.cacheID!=
this._cacheDataURLID)this._cacheDataURL=this.cacheCanvas.toDataURL();return this._cacheDataURL};b.getStage=function(){for(var a=this;a.parent;)a=a.parent;return a instanceof Stage?a:null};b.localToGlobal=function(a,b){var c=this.getConcatenatedMatrix(this._matrix);if(c==null)return null;c.append(1,0,0,1,a,b);return new Point(c.tx,c.ty)};b.globalToLocal=function(a,b){var c=this.getConcatenatedMatrix(this._matrix);if(c==null)return null;c.invert();c.append(1,0,0,1,a,b);return new Point(c.tx,c.ty)};
b.localToLocal=function(a,b,c){a=this.localToGlobal(a,b);return c.globalToLocal(a.x,a.y)};b.setTransform=function(a,b,c,d,f,k,l,t,q){this.x=a||0;this.y=b||0;this.scaleX=c==null?1:c;this.scaleY=d==null?1:d;this.rotation=f||0;this.skewX=k||0;this.skewY=l||0;this.regX=t||0;this.regY=q||0};b.getConcatenatedMatrix=function(a){a?a.identity():a=new Matrix2D;for(var b=this;b!=null;){a.prependTransform(b.x,b.y,b.scaleX,b.scaleY,b.rotation,b.skewX,b.skewY,b.regX,b.regY);a.prependProperties(b.alpha,b.shadow,
b.compositeOperation);b=b.parent}return a};b.hitTest=function(a,b){var c=d._hitTestContext,h=d._hitTestCanvas;c.setTransform(1,0,0,1,-a,-b);this.draw(c);c=this._testHit(c);h.width=0;h.width=1;return c};b.clone=function(){var a=new d;this.cloneProps(a);return a};b.toString=function(){return"[DisplayObject (name="+this.name+")]"};b.cloneProps=function(a){a.alpha=this.alpha;a.name=this.name;a.regX=this.regX;a.regY=this.regY;a.rotation=this.rotation;a.scaleX=this.scaleX;a.scaleY=this.scaleY;a.shadow=
this.shadow;a.skewX=this.skewX;a.skewY=this.skewY;a.visible=this.visible;a.x=this.x;a.y=this.y;a.mouseEnabled=this.mouseEnabled;a.compositeOperation=this.compositeOperation;if(this.cacheCanvas){a.cacheCanvas=this.cacheCanvas.cloneNode(true);a.cacheCanvas.getContext("2d").putImageData(this.cacheCanvas.getContext("2d").getImageData(0,0,this.cacheCanvas.width,this.cacheCanvas.height),0,0)}};b.applyShadow=function(a,b){b=b||Shadow.identity;a.shadowColor=b.color;a.shadowOffsetX=b.offsetX;a.shadowOffsetY=
b.offsetY;a.shadowBlur=b.blur};b._tick=function(){this.tick&&this.tick()};b._testHit=function(a){try{var b=a.getImageData(0,0,1,1).data[3]>1}catch(c){if(!d.suppressCrossDomainErrors)throw"An error has occured. This is most likely due to security restrictions on reading canvas pixel data with local or cross-domain images.";}return b};b._applyFilters=function(){if(this.filters&&this.filters.length!=0&&this.cacheCanvas)for(var a=this.filters.length,b=this.cacheCanvas.getContext("2d"),c=this.cacheCanvas.width,
d=this.cacheCanvas.height,f=0;f<a;f++)this.filters[f].applyFilter(b,0,0,c,d)};l.DisplayObject=d})(window);
(function(l){var d=function(){this.initialize()},b=d.prototype=new DisplayObject;b.children=null;b.DisplayObject_initialize=b.initialize;b.initialize=function(){this.DisplayObject_initialize();this.children=[]};b.isVisible=function(){return this.visible&&this.alpha>0&&this.children.length&&this.scaleX!=0&&this.scaleY!=0};b.DisplayObject_draw=b.draw;b.draw=function(a,b,c){var h=Stage._snapToPixelEnabled;if(this.DisplayObject_draw(a,b))return true;for(var c=c||this._matrix.reinitialize(1,0,0,1,0,0,
this.alpha,this.shadow,this.compositeOperation),b=this.children.length,f=this.children.slice(0),k=0;k<b;k++){var l=f[k];if(l.isVisible()){var t=false,q=l._matrix.reinitialize(c.a,c.b,c.c,c.d,c.tx,c.ty,c.alpha,c.shadow,c.compositeOperation);q.appendTransform(l.x,l.y,l.scaleX,l.scaleY,l.rotation,l.skewX,l.skewY,l.regX,l.regY);q.appendProperties(l.alpha,l.shadow,l.compositeOperation);if(!(l instanceof d&&l.cacheCanvas==null)){h&&l.snapToPixel&&q.a==1&&q.b==0&&q.c==0&&q.d==1?a.setTransform(q.a,q.b,q.c,
q.d,q.tx+0.5|0,q.ty+0.5|0):a.setTransform(q.a,q.b,q.c,q.d,q.tx,q.ty);a.globalAlpha=q.alpha;a.globalCompositeOperation=q.compositeOperation||"source-over";(t=q.shadow)&&this.applyShadow(a,t)}l.draw(a,false,q);t&&this.applyShadow(a)}}return true};b.addChild=function(a){if(a==null)return a;var b=arguments.length;if(b>1){for(var c=0;c<b;c++)this.addChild(arguments[c]);return arguments[b-1]}a.parent&&a.parent.removeChild(a);a.parent=this;this.children.push(a);return a};b.addChildAt=function(a,b){var c=
arguments.length;if(c>2){for(var b=arguments[d-1],d=0;d<c-1;d++)this.addChildAt(arguments[d],b+d);return arguments[c-2]}a.parent&&a.parent.removeChild(a);a.parent=this;this.children.splice(b,0,a);return a};b.removeChild=function(a){var b=arguments.length;if(b>1){for(var c=true,d=0;d<b;d++)c=c&&this.removeChild(arguments[d]);return c}return this.removeChildAt(this.children.indexOf(a))};b.removeChildAt=function(a){var b=arguments.length;if(b>1){for(var c=[],d=0;d<b;d++)c[d]=arguments[d];c.sort(function(a,
b){return b-a});for(var f=true,d=0;d<b;d++)f=f&&this.removeChildAt(c[d]);return f}if(a<0||a>this.children.length-1)return false;b=this.children[a];if(b!=null)b.parent=null;this.children.splice(a,1);return true};b.removeAllChildren=function(){for(var a=this.children;a.length;)a.pop().parent=null};b.getChildAt=function(a){return this.children[a]};b.sortChildren=function(a){this.children.sort(a)};b.getChildIndex=function(a){return this.children.indexOf(a)};b.getNumChildren=function(){return this.children.length};
b.swapChildrenAt=function(a,b){var c=this.children,d=c[a],f=c[b];d&&f&&(c[a]=f,c[b]=d)};b.swapChildren=function(a,b){for(var c=this.children,d,f,k=0,l=c.length;k<l;k++)if(c[k]==a&&(d=k),c[k]==b&&(f=k),d!=null&&f!=null)return;k!=l&&(c[d]=b,c[f]=a)};b.setChildIndex=function(a,b){for(var c=this.children,d=0,f=c.length;d<f;d++)if(c[d]==a)break;d==f||b<0||b>f||d==b||(c.splice(b,1),b<d&&d--,c.splice(a,d,0))};b.contains=function(a){for(;a;){if(a==this)return true;a=a.parent}return false};b.hitTest=function(a,
b){return this.getObjectUnderPoint(a,b)!=null};b.getObjectsUnderPoint=function(a,b){var c=[],d=this.localToGlobal(a,b);this._getObjectsUnderPoint(d.x,d.y,c);return c};b.getObjectUnderPoint=function(a,b){var c=this.localToGlobal(a,b);return this._getObjectsUnderPoint(c.x,c.y)};b.clone=function(a){var b=new d;this.cloneProps(b);if(a)for(var c=b.children=[],h=0,f=this.children.length;h<f;h++){var k=this.children[h].clone(a);k.parent=b;c.push(k)}return b};b.toString=function(){return"[Container (name="+
this.name+")]"};b._tick=function(a){for(var b=this.children.length-1;b>=0;b--){var c=this.children[b];c._tick&&c._tick(a)}this.tick&&this.tick()};b._getObjectsUnderPoint=function(a,b,c,h){var f=DisplayObject._hitTestContext,k=DisplayObject._hitTestCanvas,l=this._matrix,t=h&1&&(this.onPress||this.onClick||this.onDoubleClick)||h&2&&(this.onMouseOver||this.onMouseOut);if(this.cacheCanvas)if(this.getConcatenatedMatrix(l),f.setTransform(l.a,l.b,l.c,l.d,l.tx-a,l.ty-b),f.globalAlpha=l.alpha,this.draw(f),
this._testHit(f)){if(k.width=0,k.width=1,t)return this}else return null;for(var q=this.children.length-1;q>=0;q--){var s=this.children[q];if(s.isVisible()&&s.mouseEnabled)if(s instanceof d)if(t){if(s._getObjectsUnderPoint(a,b))return this}else{if(s=s._getObjectsUnderPoint(a,b,c,h),!c&&s)return s}else if(!h||t||h&1&&(s.onPress||s.onClick||s.onDoubleClick)||h&2&&(s.onMouseOver||s.onMouseOut))if(s.getConcatenatedMatrix(l),f.setTransform(l.a,l.b,l.c,l.d,l.tx-a,l.ty-b),f.globalAlpha=l.alpha,s.draw(f),
this._testHit(f)){if(k.width=0,k.width=1,t)return this;if(c)c.push(s);else return s}}return null};l.Container=d})(window);
(function(l){var d=function(a){this.initialize(a)},b=d.prototype=new Container;d._snapToPixelEnabled=false;b.autoClear=true;b.canvas=null;b.mouseX=null;b.mouseY=null;b.onMouseMove=null;b.onMouseUp=null;b.onMouseDown=null;b.snapToPixelEnabled=false;b.mouseInBounds=false;b.tickOnUpdate=true;b._activeMouseEvent=null;b._activeMouseTarget=null;b._mouseOverIntervalID=null;b._mouseOverX=0;b._mouseOverY=0;b._mouseOverTarget=null;b.Container_initialize=b.initialize;b.initialize=function(a){this.Container_initialize();
this.canvas=a instanceof HTMLCanvasElement?a:document.getElementById(a);this._enableMouseEvents(true)};b.update=function(){if(this.canvas){this.autoClear&&this.clear();d._snapToPixelEnabled=this.snapToPixelEnabled;if(this.tickOnUpdate){if(this.tick==this.update){var a=1;this.tick=null}this._tick(true);if(a)this.tick=this.update}this.draw(this.canvas.getContext("2d"),false,this.getConcatenatedMatrix(this._matrix))}};b.tick=b.update;b.clear=function(){if(this.canvas){var a=this.canvas.getContext("2d");
a.setTransform(1,0,0,1,0,0);a.clearRect(0,0,this.canvas.width,this.canvas.height)}};b.toDataURL=function(a,b){b||(b="image/png");var c=this.canvas.getContext("2d"),d=this.canvas.width,f=this.canvas.height,k;if(a){k=c.getImageData(0,0,d,f);var l=c.globalCompositeOperation;c.globalCompositeOperation="destination-over";c.fillStyle=a;c.fillRect(0,0,d,f)}var t=this.canvas.toDataURL(b);if(a){c.clearRect(0,0,d,f);c.putImageData(k,0,0);c.globalCompositeOperation=l}return t};b.enableMouseOver=function(a){if(this._mouseOverIntervalID){clearInterval(this._mouseOverIntervalID);
this._mouseOverIntervalID=null}if(a==null)a=20;else if(a<=0)return;var b=this;this._mouseOverIntervalID=setInterval(function(){b._testMouseOver()},1E3/Math.min(50,a));this._mouseOverX=NaN;this._mouseOverTarget=null};b.clone=function(){var a=new d(null);this.cloneProps(a);return a};b.toString=function(){return"[Stage (name="+this.name+")]"};b._enableMouseEvents=function(){var a=this,b=l.addEventListener?l:document;b.addEventListener("mouseup",function(b){a._handleMouseUp(b)},false);b.addEventListener("mousemove",
function(b){a._handleMouseMove(b)},false);b.addEventListener("dblclick",function(b){a._handleDoubleClick(b)},false);this.canvas&&this.canvas.addEventListener("mousedown",function(b){a._handleMouseDown(b)},false)};b._handleMouseMove=function(a){if(this.canvas){if(!a)a=l.event;var b=this.mouseInBounds;this._updateMousePosition(a.pageX,a.pageY);if(b||this.mouseInBounds){a=new MouseEvent("onMouseMove",this.mouseX,this.mouseY,this,a);if(this.onMouseMove)this.onMouseMove(a);if(this._activeMouseEvent&&this._activeMouseEvent.onMouseMove)this._activeMouseEvent.onMouseMove(a)}}else this.mouseX=
this.mouseY=null};b._updateMousePosition=function(a,b){var c=this.canvas;do{a=a-c.offsetLeft;b=b-c.offsetTop}while(c=c.offsetParent);if(this.mouseInBounds=a>=0&&b>=0&&a<this.canvas.width&&b<this.canvas.height){this.mouseX=a;this.mouseY=b}};b._handleMouseUp=function(a){var b=new MouseEvent("onMouseUp",this.mouseX,this.mouseY,this,a);if(this.onMouseUp)this.onMouseUp(b);if(this._activeMouseEvent&&this._activeMouseEvent.onMouseUp)this._activeMouseEvent.onMouseUp(b);if(this._activeMouseTarget&&this._activeMouseTarget.onClick&&
this._getObjectsUnderPoint(this.mouseX,this.mouseY,null,true,this._mouseOverIntervalID?3:1)==this._activeMouseTarget)this._activeMouseTarget.onClick(new MouseEvent("onClick",this.mouseX,this.mouseY,this._activeMouseTarget,a));this._activeMouseEvent=this._activeMouseTarget=null};b._handleMouseDown=function(a){if(this.onMouseDown)this.onMouseDown(new MouseEvent("onMouseDown",this.mouseX,this.mouseY,this,a));var b=this._getObjectsUnderPoint(this.mouseX,this.mouseY,null,this._mouseOverIntervalID?3:1);
if(b){if(b.onPress instanceof Function&&(a=new MouseEvent("onPress",this.mouseX,this.mouseY,b,a),b.onPress(a),a.onMouseMove||a.onMouseUp))this._activeMouseEvent=a;this._activeMouseTarget=b}};b._testMouseOver=function(){if(!(this.mouseX==this._mouseOverX&&this.mouseY==this._mouseOverY&&this.mouseInBounds)){var a=null;if(this.mouseInBounds){a=this._getObjectsUnderPoint(this.mouseX,this.mouseY,null,3);this._mouseOverX=this.mouseX;this._mouseOverY=this.mouseY}if(this._mouseOverTarget!=a){if(this._mouseOverTarget&&
this._mouseOverTarget.onMouseOut)this._mouseOverTarget.onMouseOut(new MouseEvent("onMouseOut",this.mouseX,this.mouseY,this._mouseOverTarget));if(a&&a.onMouseOver)a.onMouseOver(new MouseEvent("onMouseOver",this.mouseX,this.mouseY,a));this._mouseOverTarget=a}}};b._handleDoubleClick=function(a){if(this.onDoubleClick)this.onDoubleClick(new MouseEvent("onDoubleClick",this.mouseX,this.mouseY,this,a));var b=this._getObjectsUnderPoint(this.mouseX,this.mouseY,null,this._mouseOverIntervalID?3:1);if(b&&b.onDoubleClick instanceof
Function)b.onDoubleClick(new MouseEvent("onPress",this.mouseX,this.mouseY,b,a))};l.Stage=d})(window);
(function(l){var d=function(a){this.initialize(a)},b=d.prototype=new DisplayObject;b.image=null;b.snapToPixel=true;b.DisplayObject_initialize=b.initialize;b.initialize=function(a){this.DisplayObject_initialize();typeof a=="string"?(this.image=new Image,this.image.src=a):this.image=a};b.isVisible=function(){return this.visible&&this.alpha>0&&this.scaleX!=0&&this.scaleY!=0&&this.image&&(this.image.complete||this.image.getContext||this.image.readyState>=2)};b.DisplayObject_draw=b.draw;b.draw=function(a,
b){if(this.DisplayObject_draw(a,b))return true;a.drawImage(this.image,0,0);return true};b.clone=function(){var a=new d(this.image);this.cloneProps(a);return a};b.toString=function(){return"[Bitmap (name="+this.name+")]"};l.Bitmap=d})(window);
(function(l){var d=function(a){this.initialize(a)},b=d.prototype=new DisplayObject;b.onAnimationEnd=null;b.currentFrame=-1;b.currentAnimation=null;b.paused=true;b.spriteSheet=null;b.snapToPixel=true;b.offset=0;b.currentAnimationFrame=0;b._advanceCount=0;b._animation=null;b.DisplayObject_initialize=b.initialize;b.initialize=function(a){this.DisplayObject_initialize();this.spriteSheet=a};b.isVisible=function(){return this.visible&&this.alpha>0&&this.scaleX!=0&&this.scaleY!=0&&this.spriteSheet.complete&&
this.currentFrame>=0};b.DisplayObject_draw=b.draw;b.draw=function(a,b){if(this.DisplayObject_draw(a,b))return true;this._normalizeFrame();var c=this.spriteSheet.getFrame(this.currentFrame);if(c!=null){var d=c.rect;a.drawImage(c.image,d.x,d.y,d.width,d.height,-c.regX,-c.regY,d.width,d.height);return true}};b.gotoAndPlay=function(a){this.paused=false;this._goto(a)};b.gotoAndStop=function(a){this.paused=true;this._goto(a)};b.advance=function(){this._animation?this.currentAnimationFrame++:this.currentFrame++;
this._normalizeFrame()};b.clone=function(){var a=new d(this.spriteSheet);this.cloneProps(a);return a};b.toString=function(){return"[BitmapAnimation (name="+this.name+")]"};b._tick=function(a){var b=this._animation?this._animation.frequency:1;a&&!this.paused&&(++this._advanceCount+this.offset)%b==0&&this.advance()};b._normalizeFrame=function(){var a=this._animation;if(a)if(this.currentAnimationFrame>=a.frames.length){if(a.next?this._goto(a.next):(this.paused=true,this.currentAnimationFrame=a.frames.length-
1,this.currentFrame=a.frames[this.currentAnimationFrame]),this.onAnimationEnd)this.onAnimationEnd(this,a.name)}else this.currentFrame=a.frames[this.currentAnimationFrame];else if(this.currentFrame>=this.spriteSheet.getNumFrames()&&(this.currentFrame=0,this.onAnimationEnd))this.onAnimationEnd(this,null)};b.DisplayObject_cloneProps=b.cloneProps;b.cloneProps=function(a){this.DisplayObject_cloneProps(a);a.onAnimationEnd=this.onAnimationEnd;a.currentFrame=this.currentFrame;a.currentAnimation=this.currentAnimation;
a.paused=this.paused;a.offset=this.offset;a._animation=this._animation;a.currentAnimationFrame=this.currentAnimationFrame};b._goto=function(a){if(isNaN(a)){var b=this.spriteSheet.getAnimation(a);if(b){this.currentAnimationFrame=0;this._animation=b;this.currentAnimation=a;this._normalizeFrame()}}else{this.currentAnimation=this._animation=null;this.currentFrame=a}};l.BitmapAnimation=d})(window);
(function(l){var d=function(a){this.initialize(a)},b=d.prototype=new DisplayObject;b.graphics=null;b.DisplayObject_initialize=b.initialize;b.initialize=function(a){this.DisplayObject_initialize();this.graphics=a?a:new Graphics};b.isVisible=function(){return this.visible&&this.alpha>0&&this.scaleX!=0&&this.scaleY!=0&&this.graphics};b.DisplayObject_draw=b.draw;b.draw=function(a,b){if(this.DisplayObject_draw(a,b))return true;this.graphics.draw(a);return true};b.clone=function(a){a=new d(a&&this.graphics?
this.graphics.clone():this.graphics);this.cloneProps(a);return a};b.toString=function(){return"[Shape (name="+this.name+")]"};l.Shape=d})(window);
(function(l){var d=function(a,b,c){this.initialize(a,b,c)},b=d.prototype=new DisplayObject;d._workingContext=document.createElement("canvas").getContext("2d");b.text="";b.font=null;b.color=null;b.textAlign=null;b.textBaseline=null;b.maxWidth=null;b.outline=false;b.lineHeight=null;b.lineWidth=null;b.DisplayObject_initialize=b.initialize;b.initialize=function(a,b,c){this.DisplayObject_initialize();this.text=a;this.font=b;this.color=c?c:"#000"};b.isVisible=function(){return Boolean(this.visible&&this.alpha>
0&&this.scaleX!=0&&this.scaleY!=0&&this.text!=null&&this.text!="")};b.DisplayObject_draw=b.draw;b.draw=function(a,b){if(this.DisplayObject_draw(a,b))return true;this.outline?a.strokeStyle=this.color:a.fillStyle=this.color;a.font=this.font;a.textAlign=this.textAlign?this.textAlign:"start";a.textBaseline=this.textBaseline?this.textBaseline:"alphabetic";for(var c=String(this.text).split(/(?:\r\n|\r|\n)/),d=this.lineHeight==null?this.getMeasuredLineHeight():this.lineHeight,f=0,k=0,l=c.length;k<l;k++){var t=
a.measureText(c[k]).width;if(this.lineWidth==null||t<this.lineWidth)this._drawTextLine(a,c[k],f);else{for(var t=c[k].split(/(\s)/),q=t[0],s=1,u=t.length;s<u;s=s+2)a.measureText(q+t[s]+t[s+1]).width>this.lineWidth?(this._drawTextLine(a,q,f),f=f+d,q=t[s+1]):q=q+(t[s]+t[s+1]);this._drawTextLine(a,q,f)}f=f+d}return true};b.getMeasuredWidth=function(){return this._getWorkingContext().measureText(this.text).width};b.getMeasuredLineHeight=function(){return this._getWorkingContext().measureText("M").width*
1.2};b.clone=function(){var a=new d(this.text,this.font,this.color);this.cloneProps(a);return a};b.toString=function(){return"[Text (text="+(this.text.length>20?this.text.substr(0,17)+"...":this.text)+")]"};b.DisplayObject_cloneProps=b.cloneProps;b.cloneProps=function(a){this.DisplayObject_cloneProps(a);a.textAlign=this.textAlign;a.textBaseline=this.textBaseline;a.maxWidth=this.maxWidth;a.outline=this.outline;a.lineHeight=this.lineHeight;a.lineWidth=this.lineWidth};b._getWorkingContext=function(){var a=
d._workingContext;a.font=this.font;a.textAlign=this.textAlign?this.textAlign:"start";a.textBaseline=this.textBaseline?this.textBaseline:"alphabetic";return a};b._drawTextLine=function(a,b,c){this.outline?a.strokeText(b,0,c,this.maxWidth):a.fillText(b,0,c,this.maxWidth||65535)};l.Text=d})(window);
(function(l){var d=function(){throw"SpriteSheetUtils cannot be instantiated";};d._workingCanvas=document.createElement("canvas");d._workingContext=d._workingCanvas.getContext("2d");d.addFlippedFrames=function(b,a,e,c){if(a||e||c){var h=0;a&&d._flip(b,++h,true,false);e&&d._flip(b,++h,false,true);c&&d._flip(b,++h,true,true)}};d.extractFrame=function(b,a){isNaN(a)&&(a=b.getAnimation(a).frames[0]);var e=b.getFrame(a);if(!e)return null;var c=e.rect,h=d._workingCanvas;h.width=c.width;h.height=c.height;
d._workingContext.drawImage(e.image,c.x,c.y,c.width,c.height,0,0,c.width,c.height);e=new Image;e.src=h.toDataURL("image/png");return e};d._flip=function(b,a,e,c){for(var h=b._images,f=d._workingCanvas,k=d._workingContext,l=h.length/a,t=0;t<l;t++){var q=h[t];q.__tmp=t;f.width=q.width;f.height=q.height;k.setTransform(e?-1:1,0,0,c?-1:1,e?q.width:0,c?q.height:0);k.drawImage(q,0,0);var s=new Image;s.src=f.toDataURL("image/png");s.width=q.width;s.height=q.height;h.push(s)}k=b._frames;f=k.length/a;for(t=
0;t<f;t++){var q=k[t],u=q.rect.clone(),s=h[q.image.__tmp+l*a],C={image:s,rect:u,regX:q.regX,regY:q.regY};if(e){u.x=s.width-u.x-u.width;C.regX=u.width-q.regX}if(c){u.y=s.height-u.y-u.height;C.regY=u.height-q.regY}k.push(C)}e="_"+(e?"h":"")+(c?"v":"");c=b._animations;b=b._data;h=c.length/a;for(t=0;t<h;t++){k=c[t];q=b[k];l={name:k+e,frequency:q.frequency,next:q.next,frames:[]};q.next&&(l.next=l.next+e);k=q.frames;q=0;for(s=k.length;q<s;q++)l.frames.push(k[q]+f*a);b[l.name]=l;c.push(l.name)}};l.SpriteSheetUtils=
d})(window);
(function(l){var d=function(a){this.initialize(a)},b=d.prototype=new DisplayObject;b.htmlElement=null;b._style=null;b.DisplayObject_initialize=b.initialize;b.initialize=function(a){typeof a=="string"&&(a=document.getElementById(a));this.DisplayObject_initialize();this.mouseEnabled=false;if(this.htmlElement=a){this._style=a.style;this._style.position="absolute";this._style.transformOrigin=this._style.webkitTransformOrigin=this._style.msTransformOrigin=this._style.MozTransformOrigin="0% 0%"}};b.isVisible=
function(){return this.htmlElement!=null};b.draw=function(){if(this.htmlElement!=null){var a=this._matrix,b=this.htmlElement;b.style.opacity=""+a.alpha;b.style.visibility=this.visible?"visible":"hidden";b.style.transform=b.style.webkitTransform=b.style.oTransform=b.style.msTransform=["matrix("+a.a,a.b,a.c,a.d,a.tx,a.ty+")"].join();b.style.MozTransform=["matrix("+a.a,a.b,a.c,a.d,a.tx+"px",a.ty+"px)"].join();return true}};b.cache=function(){};b.uncache=function(){};b.updateCache=function(){};b.hitTest=
function(){};b.localToGlobal=function(){};b.globalToLocal=function(){};b.localToLocal=function(){};b.clone=function(){var a=new d;this.cloneProps(a);return a};b.toString=function(){return"[DOMElement (name="+this.name+")]"};b._tick=function(){if(this.htmlElement!=null)this.htmlElement.style.visibility="hidden"};l.DOMElement=d})(window);
(function(l){var d=function(){this.initialize()},b=d.prototype;b.initialize=function(){};b.getBounds=function(){return new Rectangle(0,0,0,0)};b.applyFilter=function(){};b.toString=function(){return"[Filter]"};b.clone=function(){return new d};l.Filter=d})(window);
(function(l){var d=function(){throw"Touch cannot be instantiated";};d.isSupported=function(){return"ontouchstart"in l};d.enable=function(b){if(b!=null&&d.isSupported()){b._primaryTouchId=-1;b._handleTouchMoveListener=null;b.canvas.addEventListener("touchstart",function(a){d._handleTouchStart(b,a)},false);document.addEventListener("touchend",function(a){d._handleTouchEnd(b,a)},false)}};d._handleTouchStart=function(b,a){a.preventDefault();if(b._primaryTouchId==-1){b._handleTouchMoveListener=b._handleTouchMoveListener||
function(a){d._handleTouchMove(b,a)};document.addEventListener("touchmove",b._handleTouchMoveListener,false);var e=a.changedTouches[0];b._primaryTouchId=e.identifier;b._updateMousePosition(e.pageX,e.pageY);b._handleMouseDown(e)}};d._handleTouchMove=function(b,a){var e=d._findPrimaryTouch(b,a.changedTouches);e&&b._handleMouseMove(e)};d._handleTouchEnd=function(b,a){var e=d._findPrimaryTouch(b,a.changedTouches);if(e){b._primaryTouchId=-1;b._handleMouseUp(e);document.removeEventListener("touchmove",
b._handleTouchMoveListener);b._handleTouchMoveListener=null}};d._findPrimaryTouch=function(b,a){for(var e=a.length,c=0;c<e;c++){var d=a[c];if(d.identifier==b._primaryTouchId)return d}return null};l.Touch=d})(window);
(function(l){var d=function(a,b){this.initialize(a,b)},b=d.prototype;d.NONE=0;d.LOOP=1;d.REVERSE=2;d.IGNORE={};d._tweens=[];d._plugins={};d.get=function(a,b,c){return new d(a,b,c)};d.tick=function(a,b){for(var c=d._tweens,h=c.length-1;h>=0;h--){var f=c[h];if(!b||f.ignoreGlobalPause)f.tick(f._useTicks?1:a)}};Ticker&&Ticker.addListener(d,false);d.removeTweens=function(a){if(a.tweenjs_count){for(var b=d._tweens,c=b.length-1;c>=0;c--)b[c]._target==a&&b.splice(c,1);a.tweenjs_count=0}};d.installPlugin=
function(a,b){var c=a.priority;if(c==null)a.priority=c=0;for(var h=0,f=b.length,k=d._plugins;h<f;h++){var l=b[h];if(k[l]){for(var t=k[l],q=0,s=t.length;q<s;q++)if(c<t[q].priority)break;k[l].splice(q,0,a)}else k[l]=[a]}};d._register=function(a,b){var c=a._target;if(b){if(c)c.tweenjs_count=c.tweenjs_count?c.tweenjs_count+1:1;d._tweens.push(a)}else{c&&c.tweenjs_count--;c=d._tweens.indexOf(a);c!=-1&&d._tweens.splice(c,1)}};b.ignoreGlobalPause=false;b.loop=false;b.duration=0;b.pluginData=null;b._paused=
false;b._curQueueProps=null;b._initQueueProps=null;b._steps=null;b._actions=null;b._prevPosition=0;b._stepPosition=0;b._prevPos=-1;b._target=null;b._useTicks=false;b.initialize=function(a,b,c){this._target=a;if(b){this._useTicks=b.useTicks;this.ignoreGlobalPause=b.ignoreGlobalPause;this.loop=b.loop;b.override&&d.removeTweens(a)}this.pluginData=c||{};this._curQueueProps={};this._initQueueProps={};this._steps=[];this._actions=[];b&&b.paused?this._paused=true:d._register(this,true);b&&b.position!=null&&
this.setPosition(b.position,d.NONE)};b.wait=function(a){if(a==null||a<=0)return this;var b=this._cloneProps(this._curQueueProps);return this._addStep({d:a,p0:b,e:this._linearEase,p1:b})};b.to=function(a,b,c){if(isNaN(b)||b<0)b=0;return this._addStep({d:b||0,p0:this._cloneProps(this._curQueueProps),e:c,p1:this._cloneProps(this._appendQueueProps(a))})};b.call=function(a,b,c){return this._addAction({f:a,p:b?b:[this],o:c?c:this._target})};b.set=function(a,b){return this._addAction({f:this._set,o:this,
p:[a,b?b:this._target]})};b.play=function(a){return this.call(a.setPaused,[false],a)};b.pause=function(a){a||(a=this);return this.call(a.setPaused,[true],a)};b.setPosition=function(a,b){a<0&&(a=0);b==null&&(b=1);var c=a,d=false;if(c>=this.duration)this.loop?c=c%this.duration:(c=this.duration,d=true);if(c==this._prevPos)return d;if(this._target)if(d)this._updateTargetProps(null,1);else if(this._steps.length>0){for(var f=0,k=this._steps.length;f<k;f++)if(this._steps[f].t>c)break;f=this._steps[f-1];
this._updateTargetProps(f,(this._stepPosition=c-f.t)/f.d,c)}f=this._prevPos;this._prevPos=c;this._prevPosition=a;b!=0&&this._actions.length>0&&(this._useTicks?this._runActions(c,c):b==1&&c<f?(f!=this.duration&&this._runActions(f,this.duration),this._runActions(0,c,true)):this._runActions(f,c));d&&this.setPaused(true);return d};b.tick=function(a){this._paused||this.setPosition(this._prevPosition+a)};b.setPaused=function(a){if(this._paused!=!!a){this._paused=!!a;d._register(this,!a)}return this};b.w=
b.wait;b.t=b.to;b.c=b.call;b.s=b.set;b.toString=function(){return"[Tween]"};b.clone=function(){throw"Tween can not be cloned.";};b._updateTargetProps=function(a,b,c){var h,f,k,l;!a&&b==1?h=f=this._curQueueProps:(a.e&&(b=a.e(b,0,1,1)),h=a.p0,f=a.p1);for(n in this._initQueueProps){if((k=h[n])==null)h[n]=k=this._initQueueProps[n];if((l=f[n])==null)f[n]=l=k;k=k==l||b==0||b==1||typeof k!="number"?b==1?l:k:k+(l-k)*b;var t=false;if(l=d._plugins[n])for(var q=0,s=l.length;q<s;q++){var u=l[q].tween(this,n,
k,h,f,b,c,!a);u==d.IGNORE?t=true:k=u}t||(this._target[n]=k)}};b._runActions=function(a,b,c){var d=a,f=b,k=-1,l=this._actions.length,t=1;for(a>b&&(d=b,f=a,k=l,l=t=-1);(k=k+t)!=l;){var b=this._actions[k],q=b.t;(q==f||q>d&&q<f||c&&q==a)&&b.f.apply(b.o,b.p)}};b._appendQueueProps=function(a){var b,c,h,f;for(f in a){if(this._initQueueProps[f]==null){c=this._target[f];if(b=d._plugins[f])for(var k=0,l=b.length;k<l;k++){h=b[k].init(this,f,c);h!=d.IGNORE&&(c=h)}this._initQueueProps[f]=c}this._curQueueProps[f]=
a[f]}return this._curQueueProps};b._cloneProps=function(a){var b={},c;for(c in a)b[c]=a[c];return b};b._addStep=function(a){if(a.d>0){this._steps.push(a);a.t=this.duration;this.duration=this.duration+a.d}return this};b._addAction=function(a){a.t=this.duration;this._actions.push(a);return this};b._set=function(a,b){for(var c in a)b[c]=a[c]};l.Tween=d})(window);
(function(l){var d=function(a,b,c){this.initialize(a,b,c)},b=d.prototype;b.ignoreGlobalPause=false;b.duration=0;b.loop=false;b._paused=true;b._tweens=null;b._labels=null;b._prevPosition=0;b._prevPos=-1;b._useTicks=false;b.initialize=function(a,b,c){this._tweens=[];if(c){this._useTicks=c.useTicks;this.loop=c.loop;this.ignoreGlobalPause=c.ignoreGlobalPause}a&&this.addTween.apply(this,a);this.setLabels(b);(!c||!c.paused)&&Tween._register(this,true);c&&c.position!=null&&this.setPosition(c.position,Tween.NONE)};
b.addTween=function(a){var b=arguments.length;if(b>1){for(var c=0;c<b;c++)this.addTween(arguments[c]);return arguments[0]}if(b==0)return null;this.removeTween(a);this._tweens.push(a);a.setPaused(true);a._paused=false;a._useTicks=this._useTicks;if(a.duration>this.duration)this.duration=a.duration;this._prevPos>=0&&a.setPosition(this._prevPos,Tween.NONE);return a};b.removeTween=function(a){var b=arguments.length;if(b>1){for(var c=true,d=0;d<b;d++)c=c&&this.removeTween(arguments[d]);return c}if(b==0)return false;
b=this._tweens.indexOf(a);return b!=-1?(this._tweens.splice(b,1),a.duration>=this.duration&&this.updateDuration(),true):false};b.addLabel=function(a,b){this._labels[a]=b};b.setLabels=function(a){this._labels=a?a:{}};b.gotoAndPlay=function(a){this.setPaused(false);this._goto(a)};b.gotoAndStop=function(a){this.setPaused(true);this._goto(a)};b.setPosition=function(a,b){a<0&&(a=0);var c=this.loop?a%this.duration:a,d=!this.loop&&a>=this.duration;if(c==this._prevPos)return d;this._prevPosition=a;this._prevPos=
c;for(var f=0,k=this._tweens.length;f<k;f++)if(this._tweens[f].setPosition(c,b),c!=this._prevPos)return false;d&&this.setPaused(true);return d};b.setPaused=function(a){if(this._paused!=!!a){this._paused=!!a;Tween._register(this,!a)}};b.updateDuration=function(){for(var a=this.duration=0,b=this._tweens.length;a<b;a++)if(tween=this._tweens[a],tween.duration>this.duration)this.duration=tween.duration};b.tick=function(a){this.setPosition(this._prevPosition+a)};b.resolve=function(a){var b=parseFloat(a);
isNaN(b)&&(b=this._labels[a]);return b};b.toString=function(){return"[Timeline]"};b.clone=function(){throw"Timeline can not be cloned.";};b._goto=function(a){a=this.resolve(a);a!=null&&this.setPosition(a)};l.Timeline=d})(window);
(function(l){var d=function(){throw"Ease cannot be instantiated.";};d.linear=function(b){return b};d.none=d.linear;d.get=function(b){b<-1&&(b=-1);b>1&&(b=1);return function(a){return b==0?a:b<0?a*(a*-b+1+b):a*((2-a)*b+(1-b))}};d.getPowIn=function(b){return function(a){return Math.pow(a,b)}};d.getPowOut=function(b){return function(a){return 1-Math.pow(1-a,b)}};d.getPowInOut=function(b){return function(a){return(a=a*2)<1?0.5*Math.pow(a,b):1-0.5*Math.abs(Math.pow(2-a,b))}};d.quadIn=d.getPowIn(2);d.quadOut=
d.getPowOut(2);d.quadInOut=d.getPowInOut(2);d.cubicIn=d.getPowIn(3);d.cubicOut=d.getPowOut(3);d.cubicInOut=d.getPowInOut(3);d.quartIn=d.getPowIn(4);d.quartOut=d.getPowOut(4);d.quartInOut=d.getPowInOut(4);d.quintIn=d.getPowIn(5);d.quintOut=d.getPowOut(5);d.quintInOut=d.getPowInOut(5);d.sineIn=function(b){return 1-Math.cos(b*Math.PI/2)};d.sineOut=function(b){return Math.sin(b*Math.PI/2)};d.sineInOut=function(b){return-0.5*(Math.cos(Math.PI*b)-1)};d.getBackIn=function(b){return function(a){return a*
a*((b+1)*a-b)}};d.backIn=d.getBackIn(1.7);d.getBackOut=function(b){return function(a){return--a*a*((b+1)*a+b)+1}};d.backOut=d.getBackOut(1.7);d.getBackInOut=function(b){b=b*1.525;return function(a){return(a=a*2)<1?0.5*a*a*((b+1)*a-b):0.5*((a=a-2)*a*((b+1)*a+b)+2)}};d.backInOut=d.getBackInOut(1.7);d.circIn=function(b){return-(Math.sqrt(1-b*b)-1)};d.circOut=function(b){return Math.sqrt(1- --b*b)};d.circInOut=function(b){return(b=b*2)<1?-0.5*(Math.sqrt(1-b*b)-1):0.5*(Math.sqrt(1-(b=b-2)*b)+1)};d.bounceIn=
function(b){return 1-d.bounceOut(1-b)};d.bounceOut=function(b){return b<1/2.75?7.5625*b*b:b<2/2.75?7.5625*(b=b-1.5/2.75)*b+0.75:b<2.5/2.75?7.5625*(b=b-2.25/2.75)*b+0.9375:7.5625*(b=b-2.625/2.75)*b+0.984375};d.bounceInOut=function(b){return b<0.5?d.bounceIn(b*2)*0.5:d.bounceOut(b*2-1)*0.5+0.5};d.getElasticIn=function(b,a){var d=Math.PI*2;return function(c){if(c==0||c==1)return c;var h=a/d*Math.asin(1/b);return-(b*Math.pow(2,10*(c=c-1))*Math.sin((c-h)*d/a))}};d.elasticIn=d.getElasticIn(1,0.3);d.getElasticOut=
function(b,a){var d=Math.PI*2;return function(c){if(c==0||c==1)return c;var h=a/d*Math.asin(1/b);return b*Math.pow(2,-10*c)*Math.sin((c-h)*d/a)+1}};d.elasticOut=d.getElasticOut(1,0.3);d.getElasticInOut=function(b,a){var d=Math.PI*2;return function(c){var h=a/d*Math.asin(1/b);return(c=c*2)<1?-0.5*b*Math.pow(2,10*(c=c-1))*Math.sin((c-h)*d/a):b*Math.pow(2,-10*(c=c-1))*Math.sin((c-h)*d/a)*0.5+1}};d.elasticInOut=d.getElasticInOut(1,0.3*1.5);l.Ease=d})(window);var vivek={};
vivek.irs=function(){var l,d,b,a=[],e=0,c=myChrome.Common.Math.b2Vec2,h=myChrome.Dynamics.b2BodyDef,f=myChrome.Dynamics.b2Body,k=myChrome.Dynamics.b2FixtureDef,r=myChrome.Dynamics.b2World,t=myChrome.Collision.Shapes.b2PolygonShape;thedebugDraw=myChrome.Dynamics.b2DebugDraw;window.onload=function(){q.setup();q.ticker();F.setup()};var q;q={setup:function(){l=document.getElementById("mycanvas");l.getContext("2d");debugCanvas=document.getElementById("debugCanvas");debugContext=debugCanvas.getContext("2d");
stage=new Stage(l);stage.snapPixelsEnabled=true;stage.mouseEventsEnabled=true;var a=new Graphics;a.setStrokeStyle(1);a.beginStroke(Graphics.getRGB(51,181,229));a.beginFill(Graphics.getRGB(255,0,0));a.moveTo(0,0).lineTo(870,0);a.moveTo(0,550).lineTo(870,550);a.moveTo(15,250).lineTo(15,550);a.moveTo(315,550).lineTo(315,250);a=new Shape(a);stage.addChild(a)},ticker:function(){Ticker.setFPS(30);Ticker.useRAF=true;Ticker.addListener(vivek.irs)},getElementPosition:function(a){for(var b="",c=0,d=0;typeof a==
"object"&&typeof a.tagName!="undefined";){d=d+a.offsetTop;c=c+a.offsetLeft;b=a.tagName.toUpperCase();b=="BODY"&&(a=0);if(typeof a=="object"&&typeof a.offsetParent=="object")a=a.offsetParent}return{x:c,y:d}}};var s,u,C;s={spawn:function(){switch(Math.floor(1+Math.random()*8)){case 1:u="img/Template2.png";C="#c4e23a";break;case 2:u="img/Template2B.png";C="#e2c43a";break;case 3:u="img/Template2C.png";C="#b1a675";break;case 4:u="img/Template2D.png";C="#adb345";break;case 5:u="img/Template2E.png";C="#8bcdb8";
break;case 6:u="img/Template2F.png";C="#afa8f2";break;case 7:u="img/Template2G.png";C="#9ccd8b";break;case 8:u="img/Template2H.png";C="#cba8f2"}var a=new Bitmap(u);a.regX=40;a.regY=40;var b=new Bitmap("img/logo.png");b.regX=27;b.regY=27;var c=new Container;c.addChild(a);c.addChild(b);c.x=Math.round(30+Math.random()*180);c.y=-3;c.snapToPixel=true;c.mouseEnabled=true;c.setClickedstatus=false;c.greatColor=C;c.onPress=function(){this.setClickedstatus=true};stage.addChild(c);F.addBodies(c)}};var F,o=[],
G,z=[],J=function(c,e){this.body=c;this.container=e;this.update=function(c){if(this.container.setClickedstatus==false){this.container.rotation=this.body.GetAngle()*(180/Math.PI);this.container.x=this.body.GetWorldCenter().x*30;this.container.y=this.body.GetWorldCenter().y*30;this.container.rotation=this.body.GetAngle()*(180/Math.PI)}else{o.splice(c,1);a.splice(c,1);G.DestroyBody(this.body);var e=this.container,c=this.container.getChildAt(1);if(d!=null){Tween.get(d.getChildAt(1)).to({scaleX:1,scaleY:1},
1E3);if(b!=null){console.log(b);Tween.get(b).to({lineHeight:0},5E3);stage.removeChild(b)}Tween.get(d.getChildAt(0)).to({alpha:1});Tween.get(d).to({x:415,y:510},3E3).wait(1E3).to({x:870,y:510,rotation:360},3E3).to({alpha:0})}Tween.get(this.container).to({x:270,y:100,rotation:160},2E3).to({x:415,y:100,rotation:0},3E3,Ease.bounceOut).call(function(){Tween.get(e.getChildAt(0)).to({alpha:0},2E3);b=new Text("Android Development","24px Arial","#3296BB");b.x=600;b.y=100;stage.addChild(b)});d=this.container;
Tween.get(c).wait(3E3).to({scaleX:1.5,scaleY:1.5},3E3)}};this.move=function(a,b){if(b>this.skin.y){this.skin.x=this.skin.x+0.1;this.skin.y=this.skin.y-0.1}else this.skin.y=this.skin.y+0.1};o.push(this)},H=function(){var a=new thedebugDraw;a.SetSprite(debugContext);a.SetDrawScale(30);a.SetFillAlpha(0.7);a.SetLineThickness(1);a.SetFlags(thedebugDraw.e_shapeBit|thedebugDraw.e_jointBit);G.SetDebugDraw(a)};F={setup:function(){G=new r(new c(0,10),true);H();var a=new k;a.density=1;a.restitution=0.5;a.shape=
new t;a.shape.SetAsBox(14.5,1/30);var b=new h;b.type=f.b2_staticBody;b.position.x=14.5;b.position.y=18.3;G.CreateBody(b).CreateFixture(a);a=new k;a.density=1;a.restitution=0;a.shape=new t;a.shape.SetAsBox(1/30,5);b=new h;b.type=f.b2_staticBody;b.position.x=14/30;b.position.y=400/30;G.CreateBody(b).CreateFixture(a);a=new k;a.density=1;a.restitution=0;a.shape=new t;a.shape.SetAsBox(1/30,5);b=new h;b.type=f.b2_staticBody;b.position.x=314/30;b.position.y=400/30;G.CreateBody(b).CreateFixture(a)},addDebug:H,
update:function(){for(var b=0;b<z.length;b++){var c=z[b].GetUserData();stage.removeChild(c.container);o.splice(o.indexOf(c),1);z[b].SetUserData(null);G.DestroyBody(z[b])}z=[];for(b=0;b<o.length;b++)o[b].update(b);G.Step(0.05,10,10);G.ClearForces();if(a.length>8){z.push(a[0]);a.splice(0,1)}},addBodies:function(b){var c=new k;c.density=1;c.restitution=0.5;c.shape=new t;c.shape.SetAsBox(40/30,40/30);var d=new h;d.type=f.b2_dynamicBody;d.position.x=b.x/30;d.position.y=b.y/30;d=G.CreateBody(d);d.CreateFixture(c);
b=new J(d,b);d.SetUserData(b);a.push(d)},killBody:function(a){a.SetUserData(null);G.DestroyBody(a)}};return{tick:function(){F.update();stage.update();e++;e%20===0&&s.spawn()}}}();